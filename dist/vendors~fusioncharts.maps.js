(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{51:function(e,t,o){"use strict";o.r(t);var n=o(1),i=o.n(n),r=o(33),a=o(0);function l(){var e,t,o,n,i=this.config,r=this.getChildren("legend")&&this.getChildren("legend")[0],l=this.getChildren("gLegend")&&this.getChildren("gLegend")[0],s=this.getFromEnv("dataSource").colorrange,c=i.hasLegend,h={},d=this.hasGradientLegend,g=this.getFromEnv("dataSource").chart,u=Object(a.Lb)(g.mapbycategory,0);d&&s&&Object(a.Lb)(s.gradient)&&!u?(e=l.conf,d=!0,i.gLegendEnabled=!0,n=.5,t=e.legendPosition):(e=r&&r.config,d=!1,i.gLegendEnabled=!1,n=(t=e&&e.legendPos)===a.t?.8:.4),o=t===a.t?i.availableWidth*n:i.availableHeight*n,d?h=this.manageGradientLegendSpace(o):!1!==c&&r&&!r.getState("removed")&&(h=r&&r._manageLegendPosition(o)),this._allocateSpace({bottom:h&&h.bottom||0,right:h&&h.right||0})}function s(e){var t,o,n,i,r=this.config,l=this.getFromEnv("gLegend"),s=l&&l.conf;return r.gLegendPadding=Object(a.Lb)(this.getFromEnv("chart-attrib").legendpadding,10),n=Math.min(r.gLegendPadding,.5*e),s?(t=s.legendPosition,i=l.getLogicalSpace(e),o=t===a.p?{bottom:(i.height||0)+n}:{right:(i.width||0)+n}):o={bottom:0,right:0},o}var c=function(e){var t,o,n,i,r=e.getFromEnv("dataSource").dataset,l=t=e.getChildren().canvas[0].getChildren("vCanvas")[0],s=e.config.defaultDatasetType||"";r?((n=e.getDSGroupdef())&&(Object(a.P)(t,n,"datasetGroup_"+s,1,[r]),i=t.getChildren("datasetGroup_"+s)),i&&(l=i[0]),o=e.getDSdef(),Object(a.U)(l,o,"dataset",r.length,r)):e.setChartMessage()},h=o(7),d=o.n(h),g=o(4),u=o(3),b={"*.legendItem.legendItem":function(){return{"icon.appearing":function(e){return[{initialAttr:{opacity:0},slot:"plot",startEnd:{start:.5,end:1},finalAttr:{opacity:Object(a.Lb)(e.attr.opacity,1)}}]},"background.appearing":function(e){return[{initialAttr:{opacity:0},slot:"plot",startEnd:{start:.5,end:1},finalAttr:{opacity:e.attr.opacity}}]},"icon.disappearing":function(){return[{finalAttr:{opacity:0},slot:"initial"}]}}}},f=a.Nb.POINTER,p="M",m="L",v="Z",y=function(e,t){var o=e.config,n=e.getLinkedParent().config,i=n.symbolWidth,r=Object(a.Lb)(n.padding,4),l=.5*i,s=(n.initialItemX||0)+o._legendX+r,c=(n.initialItemY||0)+o._legendY-r,h=s+n.symbolPadding+l,d=c+(o._markerYGutter||0)+n.symbolPadding+l,g=Object(a.Db)(o.anchorSide),u=o.symbol=g&&g.split("_")||[],b="spoke"===u[0]?1:0;return("line"===o.type||o.drawLine)&&(l*=.6),{path:Object(a.Mb)([u[1]||2,h,d,l,o.startAngle,o.spoke||b]),cursor:t.cursor||f,stroke:t.stroke,fill:t.fill,"stroke-width":t["stroke-width"]||.5}};Object(u.a)({name:"legendItemAnimation",type:"animationRule",extension:b});var C=function(e){function t(){var t;return(t=e.call(this)||this)._stateCosmetics={},t._legendState=[],t}i()(t,e);var o=t.prototype;return o.getName=function(){return"legendItem"},o.parseLegendCosmetics=function(){var e,t,o,n=this.getLinkedParent(),i=n.getLegendState(),r=this.getLegendState(),l=["default"],s={};for(l=l.concat(i,r),o=0;o<l.length;o++)e=n.getStateCosmetics(l[o]),t=this.getStateCosmetics(l[o]),e&&("function"==typeof e?s=e(s,this):Object(a.X)(s,e)),t&&("function"==typeof t?s=t(s,this):Object(a.X)(s,t));return s},o.getType=function(){return"legendItem"},o.configure=function(e){var t,o,n=this.config;for(t in e)if(e.hasOwnProperty(t))if("object"!=typeof e[t])n[t]=e[t];else{var i=n[t]?n[t]:{};for(o in e[t])i[o]=e[t][o];n[t]=i}},o.itemClickFn=function(){var e=this.getFromEnv("chart-attrib"),t=Object(a.Lb)(e.interactivelegend,1),o=this.getLinkedItem("owner");t&&o.legendInteractivity(this)},o.dispose=function(){this.removeEventListener("fc-click",this.click),this.removeEventListener("fc-mouseover",this.mouseover),this._dispose()},o.getLegendState=function(){return this._legendState},o.hasState=function(e){var t,o,n=this.getLegendState();for(t=0,o=n.length;t<o;t++)if(n[t]===e)return!0;return!1},o.setLegendState=function(e,t){this.hasState(e)||(t?this._legendState.push(e):this._legendState.unshift(e)),this.asyncDraw()},o.__setDefaultConfig=function(){e.prototype.__setDefaultConfig.call(this),this.config.eventArguments={}},o.removeLegendState=function(e){var t,o,n=1;if(e)for(t=0,o=this._legendState.length;t<o&&n;t++)e===this._legendState[t]&&(this._legendState.splice(t,1),n=0);else this._legendState.length=0;this.asyncDraw()},o.removeStateCosmetics=function(e){delete this._stateCosmetics[e]},o.setStateCosmetics=function(e,t){this._stateCosmetics[e]=t},o.getStateCosmetics=function(e){return this._stateCosmetics[e]},o.draw=function(){var e,t,o,n,i,r,l,s,c,h,d,g,u,b,C,L,O,x,k,w,j,F,S,A,E,_,I,P,T,M,B,R,D,J,G,N,V,W,H=this.getLinkedParent(),X=H.getFromEnv("chart").config,z=this.getFromEnv("animationManager"),Y=this.config,K=H.config,U=K.legendHeight,Z=K.symbolPadding,$=K.symbolWidth,q=K.interactiveLegend,Q=K.textPadding||2,ee=Object(a.Lb)(K.padding,4),te=K.itemHoverStyle,oe=H.getChildContainer("itemGroup"),ne=K.drawCustomLegendIcon,ie=this.hasState("hidden"),re={};o=(e=this.parseLegendCosmetics()).symbol,n=K.initialItemX||0,i=K.initialItemY||0,c=Y.type,k=e.symbol.stroke||"000000",w=e.symbol.fill,t=e.symbol.lineWidth||K.lineWidth,F=Y.anchorSide,S=Y.drawLine,h=n+Y._legendX+ee,d=i+Y._legendY-ee,B=this.getGraphicalElement("legendItemBackground"),s=this.getGraphicalElement("legendItemText"),g=this.getGraphicalElement("legendItemLine"),b=this.getGraphicalElement("legendItemSymbol"),!(q=Object(a.Jb)(Y.interactiveLegend,q))&&(e.cursor="default"),R=e.text,V=h+U+Q-2,W=d+(Y._legendTestY||0),R.text=Y.name,R.x=V,R.y=W,l=z.setAnimation({el:s||"text",attr:R,component:this,container:oe,label:"icon"}),s||(l=this.addGraphicalElement("legendItemText",l)),l.data("legendItem",Y),D=!1,ne&&!1!==Y.customLegendIcon?(_=!ie&&o.borderColor,I=Object(a.Jb)(o.borderAlpha),A=!ie&&o.bgColor,E=Object(a.Jb)(o.bgAlpha,"100"),P=e.symbol.rawFillColor,w=ie?e.symbol.fill:A||P,w=Object(a.R)(w,E),T=e.symbol.rawStrokeColor,k=ie?e.symbol.stroke:_||T||P,k=Object(a.R)(k,I),C=h+Z+(L=.5*$),r=d+(Y._markerYGutter||0)+Z+L,O="spoke"===(x=Object(a.Db)(o.sides)&&Object(a.Db)(o.sides).split("_")||[])[0]?1:0,J={path:Object(a.Mb)([x[1]||2,C,r,L,o.startAngle||0,O]),cursor:e.symbol.cursor||f,stroke:k,fill:w,"stroke-width":Object(a.Lb)(o.borderThickness,1)}):"line"===c||S?(r=d+(Y._markerYGutter||0)+Z+.5*$,N={path:[p,h+Z,r,m,h+Z+$,r]},D=!0,re={opacity:X.legendiconalpha||1,"stroke-width":t,stroke:k,cursor:e.cursor||f},F&&(J=y(this,e.symbol))):F?J=y(this,e.symbol):"line"!==c&&(k=Y.symbolStroke||k,J={path:function(e,t,o,n,i){var r,a,l,s,c,h,d,g,u,b=[p];switch(i){case"column":case"dragColumn":case"column3D":case"realtimeColumn":case"errorBar2D":a=.5*(r=.25*o),l=.7*n,s=.4*n,b=b.concat([e,t+n,"l",0,-l,r,0,0,l,"z","m",r+a,0,"l",0,-n,r,0,0,n,"z","m",r+a,0,"l",0,-s,r,0,0,s,"z"]);break;case"bar2D":case"bar3D":r=.3*o,a=.6*o,s=(l=n/4)/2,b=b.concat([e,t,m,e+a,t,e+a,t+l,e,t+l,v,p,e,t+l+s,m,e+o,t+l+s,e+o,t+l+s+l,e,t+2*l+s,v,p,e,t+2*(l+s),m,e+r,t+2*(l+s),e+r,t+n,e,t+n,v]);break;case"area":case"area3d":case"areaspline":case"dragArea":case"realTimeArea":case"splinearea":r=.3*o,a=.6*o,l=.6*n,s=.2*n,c=.8*n,b=b.concat([e,t+c,m,e,t+l,e+r,t+s,e+a,t+l,e+o,t+s,e+o,t+c,v]);break;case"pie2D":case"pie3d":case"doughnut2D":case"doughnut3D":a=.9*(r=.5*o),1,1,h=e+r+1,g=t+r-1,d=e+r-1,u=t+r+1,b=b.concat([h,g,m,h,g-a+1,"A",a-1,a-1,0,0,1,h+a-1,g,v,p,d,u,m,d,u-a,"A",a,a,0,1,0,d+a,u,v]);break;case"boxandwhisker2d":b=b.concat([e,t,m,e+o,t,e+o,t+n,e,t+n,v]);break;default:b=b.concat([e,t,m,e+o,t,e+o,t+n,e,t+n,v])}return{path:b}}(h+Z,d+(Y._markerYGutter||0)+Z,$,$,c).path,"stroke-width":.5,stroke:k,fill:w,cursor:e.cursor||f}),N&&D?(Object.assign(N,re),g=z.setAnimation({el:g||"path",attr:N,component:this,callback:function(){this.show()},container:oe}),this.getGraphicalElement("legendItemLine")||(g=this.addGraphicalElement("legendItemLine",g))):g&&g.hide(),J?(J.opacity=Object(a.Lb)(e.symbol.opacity,1),u=z.setAnimation({el:b||"path",attr:J,component:this,callback:function(){this.show()},container:oe,label:"icon"}),b&&b.node||(u=this.addGraphicalElement("legendItemSymbol",u)),u.data("legendItem",Y)):b&&b.hide(),j=e.background&&e.background.legendBackgroundColor?Object(a.R)(e.background.legendBackgroundColor,e.background.alpha):a.C,G={x:h,y:d,width:Y._totalWidth,height:Y._legendH,r:0,fill:j,opacity:1,"stroke-width":1,stroke:"none",cursor:e.symbol.cursor||f},M=z.setAnimation({el:B||"rect",attr:G,css:void 0,component:this,label:"background",container:oe}),B||this.addGraphicalElement("legendItemBackground",M),M.data("legendItem",this).data("interactive",q).data("itemHoverStyle",te).data("itemStyle",e)},t}(g.a),L=o(14),O=[{initialAttr:{opacity:0},finalAttr:{opacity:1},slot:"plot"}],x=[{slot:"plot",startEnd:{start:0,end:.5}}],k=[{slot:"intial"}],w={"*.legend.legend":function(){return{"legendGroup.appearing":O,"legendGroup.updating":x,"legendGroup.disappearing":k,"scrollbar.appearing":O,"scrollbar.updating":x,"scrollbar.disappearing":k}}},j=o(5),F={left:a.u,right:a.q,center:a.s},S=Math,A=S.min,E=S.max,_=S.floor,I=S.ceil,P=a.Nb.NORMAL,T={fontWeight:{1:a.Nb.BOLD,0:P},fontStyle:{1:"italic",0:P},textDecoration:{1:"underline",0:a.Nb.noneStr}};Object(u.a)({name:"legendAnimation",type:"animationRule",extension:w});var M,B,R,D,J,G,N,V,W,H,X,z=function(e){function t(){var t;t=e.call(this)||this;var o=d()(t);return o._stateCosmetics={},o._legendState=[],o.dragDraw=function(){o.draw()},o.drawScroll=function(){o.createItemGroup()},o.config.handlers=function(e){var t,o;return{dragstart:function(){t=e.config.xL||e.config.xPos,o=e.config.yL||e.config.yPos},dragmove:function(n){var i,r,a=n.originalEvent.data[0],l=n.originalEvent.data[1],s=e.config,c=e.getFromEnv("chartConfig"),h=(s.borderWidth||0)+2;i=A(E(t+a,h),c.width-s.width-h),r=A(E(o+l,h),c.height-s.height-h),s.xPos=s.xL=i,s.yPos=s.yL=r,e.addJob("draw",e.dragDraw,j.b&&j.b.draw)}}}(o),t}i()(t,e);var o=t.prototype;return o.createItem=function(e){var t;return t=new C,this.attachChild(t,"legendItem"),t.setLinkedItem("owner",e),t.addEventListener("mouseover",(function(){t.setLegendState("hover",!0)})),t.addEventListener("mouseout",(function(){t.removeLegendState("hover")})),t.getId()},o.getItem=function(e){var t=this.getChildren().legendItem;if(void 0===e)return!1;if(t)for(var o=0;o<t.length;o++)if(t[o].getId()===e)return t[o]},o.getSortedLegendItems=function(){var e,t,o=this.getChildren("legendItem")||[],n=this.config.reverselegend,i={},r=[];for(e=0,t=o.length;e<t;e++)void 0===o[e].config.index?i[t+e]=o[e]:i[o[e].config.index]=o[e];return Object.keys(i).sort((function(e,t){return n?t-e:e-t})).forEach((function(e){r.push(i[e])})),r},o.disposeItem=function(e){var t=this.getItem(e);t&&t.remove()},o.getName=function(){return"legend"},o.getType=function(){return"legend"},o.__setDefaultConfig=function(){e.prototype.__setDefaultConfig.call(this);var t=this.config;t.enabled=!0,t.symbolWidth=12,t.borderRadius=1,t.lastScrollPos=0,t.oriSymbolPadding=3,t.textPadding=4,t.scrollY=0,t.backgroundColor="#ffffff",t.initialItemX=0,t.title={text:a.b,x:0,y:0,padding:2},t.scroll={},t.itemStyle={}},o.createLegendGroup=function(){var e,t=this.config,o=this.getFromEnv("chart"),n=o.config,i=this.getFromEnv("animationManager"),r=.5*(t.borderWidth||0)+2,a=this.getContainer("legendGroup");t.xL&&(t.xL=A(E(t.xL,r),n.width-t.width-r)),t.yL&&(t.yL=A(E(t.yL,r),n.height-t.height-r)),e=i.setAnimation({el:a||"group",attr:{name:"legendGroup",transform:["T",t.xL||t.xPos,t.yL||t.yPos]},container:o.getChildContainer("legendGroup"),component:this}),a||this.addContainer("legendGroup",e)},o.draw=function(){this.createLegendGroup(),this.drawLegendBox(),this.createItemGroup(),this.drawCaption(),this.createScrollGroup(),this.decideScroll()},o.decideScroll=function(){var e=this.config;e.scroll.enabled?this.createScrollBar():e.hasScroll&&(this.getChildren("legendScrollBar")[0].remove(),e.hasScroll=!1)},o.createItemGroup=function(){var e,t=this.getFromEnv("animationManager"),o=this.getContainer("legendGroup"),n=this.getChildContainer("itemGroup"),i=Object(a.Lb)(this.config.padding,4),r=.5*i,l=Math.max(this.config.height-i,0),s=","+this.config.width+","+l;return e=t.setAnimation({el:n||"group",attr:{name:"item",transform:["T",0,this.config.scrollY||0]},container:o,component:this}),n||this.addChildContainer("itemGroup",e),this.config.scroll.enabled?e.attr({"clip-rect":"0,"+r+s}):e.attr({"clip-rect":null}),e},o.createScrollGroup=function(){var e=this.getFromEnv("animationManager"),t=this.getChildContainer("scrollGroup"),o=this.getContainer("legendGroup");this.config.scroll.enabled&&!this.getGraphicalElement("scrollbarContainer")&&this.addGraphicalElement("scrollbarContainer",e.setAnimation({el:t||"group",attr:{name:"scrollGroup"},container:o,component:this,label:"scrollbar"}))},o.createScrollBar=function(){var e,t,o,n,i,r,l=this,s=l.config,c=l.getFromEnv("chart-attrib"),h=l.getChildren("legendScrollBar")&&l.getChildren("legendScrollBar")[0],d=s.borderWidth||0,g=.5*d,u=Object(a.Lb)(s.padding,4),b=s.width,f=s.height;e={conf:{isHorizontal:!1},handler:{scroll:function(e){s.lastScrollPos=e,s.scrollY=(o-s.totalHeight)*e,l.addJob("scrollDraw",l.drawScroll,j.b&&j.b.draw)},mousedown:function(e){e.preventDefault(),e.stopPropagation()}}},c.legendscrollbgcolor&&(e.conf.color=Object(a.R)(c.legendscrollbgcolor)),h||(h=l.attachChild(new L.b,"legendScrollBar"),this.config.hasScroll=!0),h.configure(e.conf),h.attachEventHandlers(e.handler),t=h.config,o=Math.max(f-u,0),n=b-h.getLogicalSpace().width-d+.5*u,i=g,r=Math.max(f-d,0),t.scrollRatio=(o+u)/s.totalHeight,t.startPercent=0,t.scrollPosition=s.lastScrollPos,t.parentLayer=l.getChildContainer("scrollGroup"),h.setDimension({x:n,y:i,height:r})},o.drawCaption=function(){var e,t,o,n,i=this.getChildContainer("itemGroup"),r=this.getGraphicalElement("caption"),l=this.getFromEnv("animationManager"),s=this.config,c=Object(a.Lb)(s.padding,4),h=s.scroll.enabled,d=s.width;if(s.title&&s.title.text!==a.b&&s.validLegendItem){switch(s.title.align){case a.u:o=c;break;case a.q:o=d-c-(h?10:0);break;default:o=.5*d}t=s.title.style,e={text:s.title.text,title:s.title.originalText||a.b,x:o,y:c,fill:s.title.style.color,direction:s.textDirection,"line-height":t.lineHeight,"vertical-align":a.v,"text-anchor":s.title.align,opacity:1},n={"font-weight":t.fontWeight,"font-style":t.fontStyle,"font-family":t.fontFamily,"font-size":t.fontSize},r&&r.show(),r?l.setAnimation({el:r,attr:e,component:this}):(r=l.setAnimation({el:"text",attr:e,component:this,container:i}),(r=this.addGraphicalElement("caption",r)).css(n)),this.getFromEnv("toolTipController").enableToolTip(r,s.title.originalText)}else r&&l.setAnimation({el:r,component:this,doNotRemove:!0,callback:function(){r.hide()}})},o.drawLegendBox=function(){var e,t=this.getFromEnv("animationManager"),o=this.config,n=this.getContainer("legendGroup"),i=o.width,r=this.getGraphicalElement("box"),a=o.height,l=o.borderRadius,s=o.backgroundColor,c=o.borderColor,h=o.borderAlpha,d=o.backgroundAlpha,g=o.borderWidth||0;return e=t.setAnimation({el:r||"rect",attr:{x:0,y:0,width:i,height:a,r:l,stroke:c,"stroke-width":g,fill:s||"none","stroke-opacity":h/100,"fill-opacity":d/100,cursor:o.legendAllowDrag?"move":"default"},container:n,component:this,label:"legendGroup"}),r||(this.addGraphicalElement("box",e),e.shadow(o.shadow)),e},o.getPosition=function(){var e,t,o,n,i,r=this.getFromEnv("chart").config,l=this.config,s=r.height-r.canvasBottom,c=r.canvasLeft,h=r.canvasWidth,d=l.chartMarginLeft||0,g=l.chartMarginRight||0,u=l.chartMarginBottom||0,b=r.actionBarHeight||0,f=l.actualCanvasMarginLeft||0,p=r.actualCanvasMarginBottom||0,m=r.actualCanvasMarginRight||0,v=l.alignLegendWithCanvas,y=r.height,C=r.canvasTop,L=l.width||0,O=l.height||0,x=r.borderWidth,k=r.oriCanvasLeft,w=r.oriTopSpace,j=r.oriBottomSpace,F=0,S=l.borderWidth||0;return l.legendPos===a.t&&(l.align=a.t,l.verticalAlign=a.s,i=l.layout="vertical"),i?(e=r.width-g-m-L-x,t=(F=Object(a.Lb)(w,C))+.5*(y-Object(a.Lb)(j,s)-F-O)+(l.y||0)):(o=r.width-(d+f+(g+m)),n=v?h-L:o-L,e=(v?Object(a.Lb)(k,c):d+f)+n/2,t=y-O-p-u-b),Object(a.T)(e,t,L,O,S)},o.setTranslation=function(e,t){var o=this.config;o._translateX=e,o._translateY=t,o.translate="t"+e+","+t},o.allocatePosition=function(){var e,t=this.config;e=t.translate?Object(a.T)(t._translateX,t._translateY,t.width,t.height,t.borderWidth):this.getPosition(),t.xPos=e.x,t.yPos=e.y,t.width=e.width,t.height=e.height},o._manageLegendPosition=function(e){var t=this.config,o=t.legendPos;return t.padding=4,t.textPadding=4,o===a.t?this._placeLegendBlockRight(e):this._placeLegendBlockBottom(e)},o.setDimension=function(e){var t,o,n,i,r,l,s,c,h,d,g,u,b,f,p,m,v,y,C,L,O,x,k,w,j=this.config,F=this.getSortedLegendItems(),S=F.length,P=e.width,T=e.height,M=T,B=0,R=0,D=0,J=0,G=0,N=0,V=0,W=0,H=[],X=!1,z=j.padding,Y=j.textPadding,K=this.getFromEnv("smartLabel"),U=this.getStateCosmetics("default"),Z=parseInt(U.text["font-size"],10)||10,$=0,q=0,Q=j.title,ee=Q.padding,te=j.minimiseWrappingInLegend,oe=j.legendPadding,ne=j.legendScale,ie=j.alignLegendWithCanvas,re=j.numColumns,ae=j.oriSymbolPadding,le=P;for(f={width:2*z,height:2*z},(b=Z+1)<=0&&(b=1),P=Math.max(P-2*z,0),ae*=ne,(b=A(b*=ne,P))<=0&&(ae=b=0),j.symbolWidth=b,j.textPadding=4,j.legendHeight=u=b+2*ae,j.rowHeight=l=E(parseInt(U.text["line-height"],10)||12,u),r=Y+ae+z,K.setStyle(Object(a.X)({},U.text)),p=K.getOriSize(a.A).height,s=oe+j.borderWidth/2+1,s=E(A(s,T-p-8),0),oe=.05*l,j.initialItemY=0,j.initialItemX=0,m=0;m<S;m+=1)o=t=(i=F[m]).config||(i.config={}),(n=t.name=Object(a.Ib)(o.label))===a.b||0===o.enabled||!1===o.enabled||i.getState("removed")?t.enabled=0:(t.enabled=1,D+=1,O=!0,x=K.getOriSize(n),B=E(B,x.width),N=E(N,A(x.height,M)),R+=x.width);if(j.validLegendItem=O,J=R/D,R+=(w=u+oe+Y+ae+2*z)*D,j.x=!ie&&R>le?0:j.x,O){for(J+=w,B+=w,re>0&&D<re&&(re=D),R<=P&&(re<=0||re===D)?(re=D,G=J=R/D,X=!0,N>l&&(W=(N-l)/2,l=N)):re>0&&(G=P/re)>J?G>B&&(G=B):P>B&&(te||1.5*J>B)?(D<(re=_(P/B))&&(re=D),G=B):P>=2*J?(D<(re=_(P/J))&&(re=D),(G=_(P/re))>B&&(G=B)):(re=1,G=P),j.itemWidth=G,(c=I(G-w))<0&&(ae=c=Y=0),j.symbolPadding=ae,j.textPadding=Y,j.width=Math.max(G*re-oe,0),Q.oriText!==a.b&&(K.setStyle(Q.style),x=K.getSmartText(Q.oriText,P,M),Q.text=x.text,x.tooltext&&(Q.originalText=x.tooltext),g=x.width+2*z,j.width<g&&(j.initialItemX=(g-j.width)/2,j.width=g),j.initialItemY=V=x.height+ee),K.setStyle(Object(a.X)({},U.text)),m=0;m<S;m+=1)if(0!==(t=(i=F[m]).config).enabled){if(0===c&&(H[q]=!0,t.name=a.b,v=1,C=parseInt(q/re,10),y=q%re,t._legendX=y*G,t._legendY=C*l+2*z,t._legendH=v*l,t._totalWidth=b+ae),X)(x=K.getOriSize(t.name)).height<l&&(t._legendTestY=(l-x.height)/2),t._markerYGutter=W,t._legendX=$,t._legendY=2*z,t._legendH=l,t._totalWidth=b+r+x.width,$+=x.width+w;else{for(x=K.getSmartText(t.name,c,M),t.name=x.text,x.tooltext&&(t.originalText=x.tooltext);!0===H[q];)q+=1;for(h=x.height/l,d=q,v=0;v<h;v+=1,d+=re)H[d]=!0;x.height<l&&(t._legendTestY=(l-x.height)/2),C=parseInt(q/re,10),y=q%re,t._legendX=y*G,t._legendY=C*l+2*z,t._legendH=v*l,t._totalWidth=b+r+x.width}q++}L=X?1:I(H.length/re),f.height+=L*l+V,j.height=j.totalHeight=f.height,j.rowHeight=l,j.legendNumColumns=re,j.height-2*ae>T?(j.height=T,(k=j.scroll||(j.scroll={})).enabled=!0,k.flatScrollBars=j.flatScrollBars,k.scrollBar3DLighting=j.scrollBar3DLighting,j.width=j.width+12>P?j.width:j.width+12):j.scroll.enabled=!1,s+=j.height,j.isActive=!0,j.enabled=!0}else j.enabled=!1,j.width=0,s=0;return{width:P,height:s}},o._placeLegendBlockBottom=function(e){var t,o,n,i,r,l=this.getFromEnv("chart"),s=l.config,c=l.getFromEnv("chartWidth"),h=l.getFromEnv("chartHeight"),d=s.canvasLeft,g=s.width-(s.canvasRight||0),u=l.getFromEnv("smartLabel"),b=this.config,f=b.chartMarginLeft,p=b.chartMarginRight,m=b.chartMarginTop,v=b.alignLegendWithCanvas,y=this.getSortedLegendItems().length,C=b.legendPadding,L=s.canvasMarginRight,O=s.canvasMarginLeft,x=l.getChildren("yAxis"),k=x&&x[0].config.isVertical?x:l.getChildren("xAxis"),w=k&&k[0],j=k&&k[1],F=w&&w.config||{},S=j&&j.config||{},A=F.nameMaxW,E=S.nameMaxW,_=F.name&&F.name.style||{},I=S.name&&S.name.style||{},P=F.axisName||a.b,T=S.axisName||a.b,M=s.canvasWidth-s.canvasMarginLeft-s.canvasMarginRight;return b.paddingBottom=s.height-s.canvasBottom,u.useEllipsesOnOverflow(s.useEllipsesWhenOverflow),u.setStyle(_),i=u.getOriSize(P),u.setStyle(I),r=u.getOriSize(T),M<C&&(b.padding=C=M=0),(i||r)&&(o=Object(a.Lb)(i.height,0)>Object(a.Lb)(r.height,0)?(n=A)&&i.width:(n=E)&&r.width),M=v?M:c-(o+m>h-e?2*n+p+f+L+O:p+f+O+L),b.showLegend&&0!==y?(b.x=(d-f-g+p)/2,t=this.setDimension({width:M,height:e}).height):(t=0,b.height=0,b.width=0),{bottom:t,right:0}},o._placeLegendBlockRight=function(e){var t,o,n,i,r,l,s,c,h,d,g=e,u=this.config,b=this.getFromEnv("chart"),f=b.config,p=b.getFromEnv("smartLabel"),m=b.getChildren("canvas")&&b.getChildren("canvas")[0].config.canvasBorderThickness||0,v=u.textPadding,y=u.title.padding,C=u.oriSymbolPadding,L=u.legendPadding,O=u.legendScale,x=this.getStateCosmetics("default"),k=parseInt(x.text["font-size"],10),w=2*f.canvasHeight,j=0,F=2*u.padding,S={width:F,height:F},_={},I=!1,P=this.getSortedLegendItems(),T=P.length,M=0;if(u.initialItemY=0,u.initialItemX=0,(g-=F+L)<L&&(u.padding=L=g=0),(i=k+1)<=0&&(i=1),C*=O,(i=A(i*=O,g))<=0&&(C=i=0),u.symbolPadding=C,u.symbolWidth=i,u.legendHeight=r=i+2*C,u.rowHeight=E(parseInt(x.text["line-height"],10)||12,r),t=L+u.borderWidth/2+m,(n=g-r-L-v)<0&&(n=0),p.useEllipsesOnOverflow(f.useEllipsesWhenOverflow),p.setStyle(Object(a.X)({},x.text)),u.showLegend&&0!==T){for(M=0;M<T;M+=1)P[M].getState("removed")||(h=l=(d=P[M]).config||(d.config={}),s=l.name=Object(a.Ib)(h.label),l._legendX=0,l._legendY=S.height,0!==h.enabled&&!1!==h.enabled&&s!==a.b?(l.enabled=1,I=!0,0===n?(S.height+=l._legendH=r,l.name=a.b,l._totalWidth=i+C):(o=p.getSmartText(s,n,w),l.name=o.text,o.tooltext&&(l.originalText=o.tooltext),o.height<r&&(l._legendTestY=(r-o.height)/2),l._totalWidth=i+C+v+o.width+L,S.height+=l._legendH=E(o.height,r),j=E(o.width,j))):l.enabled=0);u.validLegendItem=I,I?(u.itemWidth=j+r+L+v,u.width=u.itemWidth+F,u.title.oriText!==a.b&&(p.setStyle(u.title.style),o=p.getSmartText(u.title.oriText,g,w),u.title.text=o.text,o.tooltext&&(u.title.originalText=o.tooltext),c=o.width+F,u.width<c&&(u.initialItemX=(c-u.width)/2,u.width=c),u.initialItemY=o.height+y,S.height+=u.initialItemY),u.height=u.totalHeight=S.height,t=A(u.width+t,g),_.right=t+L,u.isActive=!0,u.enabled=!0):(u.enabled=!1,u.width=0,_.right=0)}else _.right=0,u.height=0,u.width=0;return _},o.postSpaceManager=function(){var e=this.config,t=e.legendPos,o=this.getFromEnv("chart").config.canvasHeight;t===a.t&&(e.height>o?(e.height=o,e.scroll.enabled=!0,e.scroll.flatScrollBars=e.flatScrollBars,e.scroll.scrollBar3DLighting=e.scrollBar3DLighting,e.width+=(e.scroll.scrollBarWidth=10)+(e.scroll.scrollBarPadding=2)):e.scroll.enabled=!1)},o.configureAttributes=function(t){void 0===t&&(t={}),e.prototype.configureAttributes.call(this,t);var o,n,i,r,l,s=this.config,c=this.getFromEnv("chart"),h=c.config,d=this.getFromEnv("style"),g=c.getFromEnv("chart-attrib"),u=c.config.is3D,b=this.getFromEnv("color-manager"),f=u?a.M.chart3D:a.M.chart2D,p=s.interactiveLegend=!1!==c.hasInteractiveLegend&&Boolean(Object(a.Lb)(g.interactivelegend,1)),m=Object(a.Lb)(g.useroundedges,0),v=d.outCancolor,y=t.style&&t.style.text,C=Object(a.Jb)(g.legenditemfont,y&&y["font-family"],d.outCanfontFamily),L=Object(a.Lb)(g.legendiconscale,1),O=Object(a.Kb)(g.legenditemfontsize,y&&y["font-size"],d.fontSize)+"px",x=Object(a.Jb)(g.legenditemfontcolor,y&&y.color,v).replace(/^#?([a-f0-9]+)/gi,"#$1"),k=Object(a.gb)(Object(a.Jb)(g.legenditemhoverfontcolor,x));s.isActive=!1,s.chartMarginTop=h.origMarginTop,s.chartMarginRight=h.origMarginRight,s.chartMarginBottom=h.origMarginBottom,s.chartMarginLeft=h.origMarginLeft,s.reverselegend=Object(a.Lb)(g.reverselegend,0),s.showLegend=Object(a.Lb)(g.showlegend,!c.dontShowLegendByDefault,1),o=Object(a.Ub)({fontSize:O}),s.legendPos=Object(a.Jb)(g.legendposition,c.legendposition,t.legendPosition,a.p).toLowerCase(),s.numColumns=Object(a.Lb)(g.legendnumcolumns,0),s.xL=s.yL=0,(L<=0||L>5)&&(L=1),s.drawCustomLegendIcon=Object(a.Lb)(g.drawcustomlegendicon,t.drawcustomlegendicon,0),s.legendScale=L,s.legendPadding=Object(a.Lb)(g.legendpadding,7),s.alignLegendWithCanvas=Object(a.Lb)(t.alignlegendwithcanvas,h.alignLegendWithCanvas),s.title.style={fontFamily:Object(a.Jb)(g.legendcaptionfont,C),fontSize:Object(a.Kb)(g.legendcaptionfontsize,d.fontSize)+"px",color:Object(a.Jb)(g.legendcaptionfontcolor,v).replace(/^#?([a-f0-9]+)/gi,"#$1"),fontWeight:T.fontWeight[Object(a.Lb)(g.legendcaptionfontbold,1)]||a.b},l=g.legendcaptionalignment?g.legendcaptionalignment.toLowerCase():F.center,s.title.align=F[l]||F.center,s.title.style["text-anchor"]=s.title.align,s.padding=4,n=Object(a.Jb)(g.legendbordercolor,b.getColor(f.legendBorderColor)),i=s.borderAlpha=Object(a.Lb)(g.legendborderalpha,100),s.borderColor=Object(a.R)(n,i),s.borderWidth=Object(a.Lb)(g.legendborderthickness,t.legendborderthickness,!m||g.legendbordercolor?1:0),s.borderRadius=Object(a.Lb)(m,0),s.backgroundAlpha=r=Object(a.Lb)(g.legendbgalpha,t.legendbgalpha,100),s.backgroundColor=Object(a.R)(Object(a.Jb)(g.legendbgcolor,b.getColor(f.legendBgColor)),r),s.symbol3DLighting=Boolean(Object(a.Lb)(g.use3dlighting,g.useplotgradientcolor,1)),s.shadow=Boolean(Object(a.Lb)(g.legendshadow,1)),s.shadow&&(s.shadow={enabled:s.shadow,opacity:E(i,r)/100}),s.prevReversed=Boolean(Object(a.Lb)(s.reversed,0)),s.reversed=Boolean(Object(a.Lb)(g.reverselegend,0)),s.lineWidth=Object(a.Lb)(g.linethickness,2),s.borderRadius=Object(a.Lb)(g.legendborderradius,m?3:0),s.legendAllowDrag=Boolean(Object(a.Lb)(g.legendallowdrag,0)),s.title.oriText=Object(a.Ib)(Object(a.hb)(g.legendcaption,a.b)),s.legendScrollBgColor=Object(a.gb)(Object(a.Jb)(g.legendscrollbgcolor,g.scrollcolor,b.getColor("altHGridColor"))),s.legendScrollBarColor=Object(a.Jb)(g.legendscrollbarcolor,n),s.legendScrollBtnColor=Object(a.Jb)(g.legendscrollbtncolor,n),s.minimiseWrappingInLegend=Object(a.Lb)(g.minimisewrappinginlegend,0),s.flatScrollBars=Object(a.Lb)(g.flatscrollbars,0),s.scrollBar3DLighting=Object(a.Lb)(g.scrollbar3dlighting,1),s.orderReversed=!1,this.setStateCosmetics("hidden",{symbol:{fill:Object(a.R)(Object(a.Jb)(g.legenditemhiddencolor,"cccccc").replace(/^#?([a-f0-9]+)/gi,"#$1")),stroke:Object(a.R)(Object(a.Jb)(g.legenditemhiddencolor,"cccccc").replace(/^#?([a-f0-9]+)/gi,"#$1"))},text:{fill:Object(a.R)(Object(a.Jb)(g.legenditemhiddencolor,"cccccc").replace(/^#?([a-f0-9]+)/gi,"#$1"))}}),this.setStateCosmetics("default",{text:{fill:Object(a.R)(x),"font-family":C,cursor:p?a.Nb.POINTER:"default","font-size":O,"line-height":o,"vertical-align":a.v,"text-anchor":a.u,direction:"rtl"===h.textDirection?"rtl":"initial","font-weight":T.fontWeight[Object(a.Lb)(g.legenditemfontbold,0)]||a.b},symbol:{bgColor:Object(a.Jb)(g.legendiconbgcolor),cursor:p?a.Nb.POINTER:"default",borderColor:Object(a.Jb)(g.legendiconbordercolor),bgAlpha:Object(a.Jb)(g.legendiconbgalpha,g.legendiconalpha,100),borderAlpha:Object(a.Jb)(g.legendiconborderalpha,g.legendiconalpha,100),borderThickness:Object(a.Lb)(g.legendiconborderthickness),startAngle:Object(a.Lb)(g.legendiconstartangle,45),sides:Object(a.Lb)(g.legendiconsides,t.legendiconsides,4)}}),this.setStateCosmetics("hover",(function(e,t){return t.hasState("hidden")||(e.text||(e.text={}),e.text.fill=Object(a.R)(k.replace(/^#?([a-f0-9]+)/gi,"#$1")),e.text.cursor="inherit"),e})),s.legendAllowDrag&&!s._dragEvtListenerBinded?(this.addEventListener("fc-dragstart",s.handlers.dragstart),this.addEventListener("fc-dragmove",s.handlers.dragmove),s._dragEvtListenerBinded=!0):!s.legendAllowDrag&&s._dragEvtListenerBinded&&(this.removeEventListener("fc-dragstart",s.handlers.dragstart),this.removeEventListener("fc-dragmove",s.handlers.dragmove),s._dragEvtListenerBinded=!1)},o.getLegendState=function(){return this._legendState},o.hasState=function(e){var t,o,n=this.getLegendState();for(t=0,o=n.length;t<o;t++)if(n[t]===e)return!0;return!1},o.setLegendState=function(e,t){this.hasState(e)||(t?this._legendState.push(e):this._legendState.unshift(e)),this.asyncDraw()},o.removeLegendState=function(e){var t,o,n=1;if(e)for(t=0,o=this._legendState.length;t<o&&n;t++)e===this._legendState[t]&&(this._legendState.splice(t,1),n=0);else this._legendState.length=0;this.asyncDraw()},o.setStateCosmetics=function(e,t){this._stateCosmetics[e]=t},o.removeStateCosmetics=function(e){delete this._stateCosmetics[e]},o.getStateCosmetics=function(e){return this._stateCosmetics[e]},o.hide=function(){var e=this.getFromEnv("chart").getChildContainer("legendGroup");e&&e.hide()},t}(g.a),Y=function(e){var t;Object(a.P)(e,z,"legend"),(t=e.getChildren("legend")[0]).configure(),e.addToEnv("legend",t),e.config.showLegend||t.remove()},K=function(e){function t(){var t;return(t=e.call(this)||this).registerFactory("dataset",c,["vCanvas"]),t.registerFactory("legend",Y),t}i()(t,e),t.getName=function(){return"MSCartesian"};var o=t.prototype;return o.getName=function(){return"MSCartesian"},o.getType=function(){return"chartAPI"},o._manageLegendSpace=function(){l.call(this)},o.manageGradientLegendSpace=function(e){return s.call(this,e)},t}(r.a),U=o(31),Z=o(9),$=o(2),q=o(29),Q=[{initialAttr:function(){return{opacity:0}},finalAttr:function(){return{opacity:1}}}],ee=function(){return Q[0].slot="plot",Q},te=function(e){return[{finalAttr:function(){return e.finalAttr}}]},oe=function(){return Q[0].slot="final",Q},ne=function(){return[{initialAttr:{opacity:0},finalAttr:{opacity:1},slot:"final"}]},ie=function(){return Q[0].slot="final",Q},re=function(e){return[{finalAttr:function(){return e.finalAttr}}]},ae=function(e){return[{initialAttr:function(){return Object.assign({opacity:0},e.attr)},finalAttr:function(){return e.attr},slot:"plot"}]},le=function(e){return[{initialAttr:function(){return Object.assign({opacity:0},e.attr)},finalAttr:function(){return e.attr},slot:"plot"}]},se={"initial.dataset.entities":function(){return{"path.appearing":ee,"path.updating":te,"labelConnectors.appearing":oe,"labelConnectors.updating":null,"entityLabel.appearing":ne,"*":null}},"initial.dataset.markers":function(){return{markers:null,"markerItem.appearing":ie,"markerItem.updating":re}},"initial.group.mapGroup":function(){return{"group.appearing":ae,"group.updating":le,"*":null}}},ce=Object(u.b)("redraphael","plugin"),he=window.navigator.userAgent,de=/msie/i.test(he)&&!window.opera,ge=window.Math,ue=ge.min,be=ge.max,fe=/stroke/gi,pe=/AppleWebKit/.test(he),me=ge.ceil,ve=function(e,t){var o=t?Object(a.X)(e.FCcolor,t,!1,!0):{FCcolor:e};return o.toString=a.Xb,o},ye=function(e,t){var o,n,i={};if(n=t||1,!e||"object"!=typeof e)return i;for(o in e)fe.test(o)||("stroke-width"===o?(i[o]=Number(e[o])/n,pe&&(i[o]=i[o]&&me(i[o])||0)):i[o]=e[o]);return i},Ce={right:function(){return arguments[1]},left:function(e,t){return e-t},center:function(e,t){return 2*ue(t,e-t)}},Le={top:function(){return arguments[1]},middle:function(e,t){return 2*ue(t,e-t)},bottom:function(e,t){return e-t}},Oe=function(e,t){e&&e.graphics.outlines.attr(t)};Object(u.a)({name:"mapsAnimation",type:"animationRule",extension:se}),M=ce,J=window.parseFloat,G=M._createNode,N=M._setFillAndStroke,V=M.el.constructor,W={Q:"L",Z:"X",q:"l",z:"x",",":" "},H=/,?([achlmqrstvxz]),?/gi,X=function(){return this.join(",").replace(H,B)},M.svg?(B="$1",R=function(){var e=this,t=M.is(arguments[0],"array")?arguments[0]:Array.prototype.slice.call(arguments);t?"string"==typeof t?t=t.replace(H,B):t.toString=X:t="M0,0",e.node.setAttribute("d",t.toString())},M._engine.litepath=function(e,t,o,n,i){var r,a=G("path");return(n||t).canvas.appendChild(a),(r=new V(a,t,n)).type="litepath",r.id=a.raphaelid=M._oid++,a.raphael=!0,N(r,i||{fill:"none",stroke:"#000"}),r},M._getPath.litepath=function(e){return M.parsePathString(e.node.getAttribute("d"))}):M.vml&&(B=function(e,t){return W[t]||t},D=function(){var e=this;return e._transform.apply(e,arguments),e._.bcoord&&(e.node.coordsize=e._.bcoord),e},R=function(e){var t=e;return t?"string"==typeof t?t=t.replace(H,B):t.toString=X:t="M0,0",this.node.path=t,this},M._engine.litepath=function(e,t,o,n,i){var r,a=G("shape"),l=a.style,s=new V(a,t,n),c=i||{fill:"none",stroke:"#000"},h=o;return l.cssText="position:absolute;left:0;top:0;width:21600px;height:21600px;",h=J(h),isNaN(h)?a.coordsize="21600 21600":(s._.bzoom=h,l.width="1px",l.height="1px",a.coordsize=s._.bcoord=h+" "+h),a.coordorigin=t.coordorigin,s.type="litepath",s.id=a.raphaelid=M._oid++,a.raphael=!0,s._transform=s.transform,s.transform=D,M._setFillAndStroke(s,c),(n||t).canvas.appendChild(a),(r=G("skew")).on=!0,a.appendChild(r),s.skew=r,s},M._getPath.litepath=function(e){return M.parsePathString(e.node.path||"")}),M.fn.litepath=function(e,t,o){var n,i,r,a=e,l=t,s=o;return"object"==typeof a&&a.constructor!==V&&(n=a,i=(a=a.litepath).zoom,s=a.group),l&&l.constructor===V?(s=l,i=void 0):i=l,a&&a.constructor===V&&(s=a,a=""),(r=M._engine.litepath(a,this,i,s,n)).ca.litepath=R,a&&r.attr("litepath",M.is(a,"array")?[a]:a),this.__set__&&this.__set__.push(r),this._elementsById[r.id]=r};var xe=function(e){function t(){var t;return(t=e.call(this)||this).components={},t}i()(t,e);var o=t.prototype;return o.getName=function(){return"entities"},o.getType=function(){return"dataset"},o.configureAttributes=function(e){if(e){this.JSONData={data:e};var o,n,i,r,l,s,c,h,d=this,g=d.getFromEnv("chart").jsonData,u=d.config,b=g.map||g.chart,f=[],p=d.getFromEnv("colorManager"),m=g.entitydef||[];for(l in!u.attachEvent&&p&&(d.addExtEventListener("legendUpdate",(function(){if("legend"===(h=arguments[1]).component)d.legendInteractivity(h.legendItem,h.colorObj);else for(f=h.maxMinArray,s=f.length,c=0;c<s;c++)d.updateEntityColors(f[c].min,f[c].max)}),p),u.attachEvent=!0),o=g.data&&g.data[0]&&g.data[0].data?d.JSONData=g.data[0].data||[]:d.JSONData=g.data||[],u.useSNameAsId=Object(a.Lb)(b.usesnameasid,0),this._redefineEntities(m),n=d.components.data,u.showTooltip=Object(a.Lb)(b.showtooltip,1),u.showHoverEffect=Object(a.Lb)(b.showhovereffect,0),o=function(e){for(var t,o=e&&e.length||0,n={};o--;)void 0!==(t=e[o]).id&&(n[t.id.toLowerCase()]=t);return n}(o),d.calculateDataLimits(),!g.colorrange&&d._detachChild(d.getChildren("colorRange")&&d.getChildren("colorRange")[0]),n)i=o[l],r=n[l],i?this._configureEntity(l,r,Object(a.xb)(t._sanitizeEntityOptions(Object(a.X)({},i)),r.config)):this._configureEntity(l,r,r.config)}},o.updateEntityColors=function(e,t){var o,n,i,r,a,l=this.components.data,s=this.getFromEnv("chart").config.entityOpts,c=s.nullEntityAlpha,h=s.nullEntityColor,d=ve({fill:h,alpha:c}),g={"fill-opacity":0};for(r in l)l.hasOwnProperty(r)&&(i=(n=(o=l[r]).config).cleanValue,a={"fill-opacity":(n.alphaArr||[])[0]/100||1},null==i?(Oe(o,d),o.hidden=!1):i<e||i>t?(Oe(o,g),o.hidden=!0):(Oe(o,a),o.hidden=!1))},o.legendInteractivity=function(e,t){var o,n,i,r,a,l,s=this.getFromEnv("chart"),c=this.components.data,h=e.config,d=e.hasState("hidden"),g=this.getFromEnv("colorManager"),u={},b={"fill-opacity":0};for(o in s.getFromEnv("animationManager").setAnimationState("legendInteraction"),c)c.hasOwnProperty(o)&&(i=(h=(n=c[o]).config).cleanValue,l=g.getColorObj(i),r=h.visibleEntityAttr,u["fill-opacity"]=r["fill-opacity"],a=d?u:b,t.code===(!l.outOfRange&&l.code)&&(n.hidden=!d,Oe(n,a),d?e&&e.removeLegendState("hidden"):e.setLegendState("hidden")))},o.calculateDataLimits=function(){var e,t,o,n,i=this.getFromEnv("chart"),r=this.config,a=i.jsonData.data||[],l=this.getFromEnv("number-formatter"),s=1/0,c=-1/0;for(n=0,o=a.length;n<o;n++)t=a[n].value,e=l.getCleanValue(t),s=ue(s,e),c=be(c,e);r.max=c,r.min=s},o._configureEntity=function(e,t,o){var n,i,r,l,s,c,h,d,g,u,b,f,p,m,v,y,C,L,O,x,k,w,j=this.getFromEnv("chart"),F=this.config,S=this.getFromEnv("number-formatter"),A=j.config.entityOpts,E=t.config,_=t.labelConfig,I=o.value,P=E.cleanValue=S.getCleanValue(I),T=E.formattedValue=void 0!==P?S.dataLabels(P):void 0,M=Object(a.Lb)(o.showtooltip,A.showTooltip),B=this._getDefaultTooltip(t,o,this),R={formattedValue:T,sName:o.shortLabel,lName:o.label},D=A.dataLabels.style,J=E.toolText=M?Object(a.Ib)(Object(a.Jb)(Object(a.Hb)(Object(a.Jb)(o.tooltext,A.tooltext,B),[1,2,7,38,39],R,o))):"",G=E.borderColor=Object(a.Jb)(o.bordercolor,A.borderColor),N=E.borderAlpha=Object(a.Jb)(o.borderalpha,A.borderAlpha),V=E.borderThickness=Object(a.Lb)(o.borderthickness,A.borderThickness),W=A.hoverOnNull,H=E.useHoverColor=Object(a.Lb)(o.showhovereffect,o.usehovercolor,W?A.showHoverEffect:isNaN(I)?0:A.showHoverEffect),X=E.labelAlignment,z=this.getFromEnv("colorManager");if(t.hidden=!1,E.showLabel=Object(a.Lb)(o.showlabel,A.showLabels),E.labelPadding=Object(a.Lb)(o.labelpadding,A.labelPadding),E.fontFamily=Object(a.Jb)(o.font,D.fontFamily),E.fontSize=Object(a.Lb)(parseInt(o.fontsize,10),parseInt(D.fontSize,10)),E.fontBold=Object(a.Lb)(o.fontbold,0),E.fontColor=Object(a.Jb)(o.labelcolor,o.fontcolor,D.color),E.labelBgColor=Object(a.Jb)(o.labelbgcolor,D.bgColor)||"",E.labelBorderColor=Object(a.Jb)(o.labelbordercolor,D.borderColor)||"",E.connectorColor=Object(a.Jb)(o.labelconnectorcolor,A.connectorColor),E.connectorAlpha=Object(a.Jb)(o.labelconnectoralpha,A.connectorAlpha),E.hoverBorderThickness=Object(a.Lb)(o.borderhoverthickness,o.hoverborderthickness,A.hoverBorderThickness),E.hoverBorderColor=Object(a.Jb)(o.borderhovercolor,o.hoverbordercolor,A.hoverBorderColor,E.borderColor),E.hoverBorderAlpha=Object(a.Jb)(o.borderhoveralpha,o.hoverborderalpha,A.hoverBorderAlpha,E.borderAlpha),E.connectorThickness=Object(a.Lb)(o.labelconnectorthickness,A.connectorThickness),E.origConnectorThickness=E.connectorThickness,E.borderThickness=V,E.link=o.link,E.isVisible=!0,E.id=e,E.originalId=o.origId,null!==P&&(n=z&&z.getColor(P))&&!n.outOfRange&&(y=n.code,void 0!==n.oriAlpha&&(C=n.oriAlpha+"")),void 0!==Object(a.Jb)(o.color,o.alpha,o.angle,o.ratio)?(s=Object(a.Jb)(o.color,y,A.fillColor),c=Object(a.Jb)(o.alpha,C,A.fillAlpha),h=Object(a.Jb)(o.angle,A.fillAngle),d=Object(a.Jb)(o.ratio,A.fillRatio),g=ve({color:s,alpha:c,angle:h,ratio:d})):(m=ve({color:Object(a.Jb)(y,A.fillColor),alpha:Object(a.Jb)(C,A.fillAlpha),angle:Object(a.Jb)(A.fillAngle),ratio:Object(a.Jb)(A.fillRatio)}),p=ve({color:Object(a.Jb)(A.nullEntityColor),alpha:Object(a.Jb)(A.nullEntityAlpha),angle:Object(a.Jb)(A.nullEntityAngle),ratio:Object(a.Jb)(A.nullEntityRatio)}),s=(g=null===P?p:m).FCcolor.color,c=g.FCcolor.alpha,h=g.FCcolor.angle,d=g.FCcolor.ratio),""===J&&(F.showTooltip=0),E.visibleEntityAttr={stroke:Object(a.R)(G,N),fill:(E.fillColor=g).toString(),"fill-opacity":c/100},w=c.split(","),E.alphaArr=w,H&&(void 0!==Object(a.Jb)(o.fillhovercolor,o.fillhoveralpha,o.fillhoverangle,o.fillhoverratio,o.hoverfillcolor,o.hoverfillalpha,o.hoverfillratio,o.hoverfillangle)?(s=Object(a.Jb)(o.fillhovercolor,o.hoverfillcolor,A.hoverFillColor),c=Object(a.Jb)(o.fillhoveralpha,o.hoverfillalpha,A.hoverFillAlpha),h=Object(a.Jb)(o.fillhoverangle,o.hoverfillangle,A.hoverFillAngle),d=Object(a.Jb)(o.fillhoverratio,o.hoverfillratio,A.hoverFillRatio),v=ve({color:s,alpha:c,angle:h,ratio:d})):(A.hoverColorObject||(A.hoverColorObject=ve({color:A.hoverFillColor,alpha:A.hoverFillAlpha,angle:A.hoverFillAngle,ratio:A.hoverFillRatio})),v=A.hoverColorObject),E.hoverColor=v),!_&&(_=t.labelConfig={}),u=E.fontColor,b=E.fontFamily,f=E.fontBold,J=E.toolText,i=E.link,X?(r=X[0],l=X[1]):(r="center",l="middle"),_.align=r,_.vAlign=l,_.fontColor=u,_.bgColor=E.labelBgColor,_.borderColor=E.labelBorderColor,_.fontFamily=b,_.fontBold=f,_.toolText=J,_.link=i,"object"==typeof E.options)for(L=E.entityLabels=E.entityLabels||[],k=(x=E.labels||[]).length;k--;)L[k]||(L[k]={config:{}}),_=L[k].config,(X=x[k].labelAlignment)?(r=X[0],l=X[1]):(r="center",l="middle"),_.align=r,_.vAlign=l,_.displayValue=this.getDisplayValue(t,x[k],E.options.isDataEnabled,!k,o),_.toolText=J,_.align=r,_.vAlign=l,_.bgColor=E.labelBgColor,_.borderColor=E.labelBorderColor,_.fontColor=u,_.fontFamily=b,_.fontBold=f,_.toolText=J;else O={shortText:E.shortLabel,text:E.label},_.displayValue=this.getDisplayValue(t,O,!0,!0,o)},o.getDisplayValue=function(e,t,o,n,i){var r,l=this.getFromEnv("chart").config.entityOpts,s=e.config,c=s.cleanValue,h=s.formattedValue,d=l.labelSepChar;return o?n&&void 0!==i.displayvalue?r=i.displayvalue:(r=Object(a.Jb)(l.includeNameInLabels?l.useShortName?t.shortText:t.text:""),l.includeValueInLabels&&null!==c&&(r=void 0===r?h:r+d+h)):r=s.label,r},t._sanitizeEntityOptions=function(e){return delete e.outlines,delete e.label,delete e.shortlabel,delete e.labelposition,delete e.labelalignment,delete e.labelconnectors,e},o._redefineEntities=function(e){var t,o,n,i,r,l,s,c,h,d,g,u,b=this.config,f={},p={},m=this.getFromEnv("chart").config.entities,v=b.useSNameAsId,y=0;for(t=e.length;t--;)if(n=(o=e[t]).internalid,i=o.newid?o.newid:n,r=o.sname,l=o.lname,u=m[n],n=Object(a.Zb)(n),i=(i=Object(a.Zb)(i))&&i.toLowerCase(),u){for(g in f[i]=c={origId:n},p[n]=!0,u)c[g]=u[g];c.shortLabel=r||u.shortLabel,c.label=l||u.label,c.showhovereffect=o.showhovereffect,c.fillhovercolor=o.fillhovercolor,c.fillhoveralpha=o.fillhoveralpha,c.fillhoverangle=o.fillhoverangle,c.fillhoverratio=o.fillhoverratio,c.borderhoverthickness=o.borderhoverthickness}for(s in(d=this.components.data)||(d=this.components.data={}),f)d[s=s.toLowerCase()]||(d[s]={config:{}}),d[s].config=f[s],y+=1;for(s in h=d,m)if(c=m[s],!p[s=Object(a.Zb)(s)]){for(g in v?((u=h[c.shortLabel.toLowerCase()])||(u=h[c.shortLabel.toLowerCase()]={}),u.config={},u.origId=c.shortLabel):((u=h[s.toLowerCase()])||(u=h[s.toLowerCase()]={}),u.config={},u.config.origId=s),c)u.config[g]=c[g];y+=1}b.entityCount=y},o.draw=function(){var e=this.config,t=this.getFromEnv("chart"),o=a.tb?200:10;this.createContainer(),this.config.ready=!1,e.BATCH_SIZE=o,e.labelBatchSize=a.tb?200:20,this._batchRender()(0),t.config.entityFlag=!0,t.checkComplete()},o._batchRender=function(){var e,t,o,n,i,r=this,a=r.config,l=r.getFromEnv("chart").config.entities.firstEntity,s=r.components.data,c=a.BATCH_SIZE,h=a.entityKeys=l?r._getKeys(l,s):Object.keys(s),d=a.entityLength=h.length;return function a(l){for(e=l,o=0;void 0!==h[e];)if(t=s[h[e]],i=r.drawEntity(t,c),o+=i,t.config.drawn&&((n=e===d-1?t:s[h[e-1]])&&(n.config.drawn=!1,n.config.outlineStartIndex=void 0),e++),o>=c){r.addJob("entityDraw",a.bind(r,e),j.b.entitydraw);break}e===d&&(r._addEventListenersToEntities(0),r.initComplete())}},o._addEventListenersToEntities=function(e){var t,o,n,i=this.components.data,r=this.config,a=r.BATCH_SIZE,l=r.entityKeys,s=r.entityLength,c=0;for(t=e;t<s;t++)if((n=(o=i[l[t]]).config.options)&&!1===n.isDataEnabled||this.addMouseGestures(o),++c===a){this.addJob("_addEventListenersToEntities",this._addEventListenersToEntities.bind(this,t),j.b.entitydraw);break}},t._getKeys=function(e,t){for(var o=[e],n=e;t[n];)n=t[n].nextId,o.push(n);return o},o._getDefaultTooltip=function(e,t){var o,n,i=e.config.cleanValue,r=e.config.formattedValue,a=this.getFromEnv("chart").config.entityOpts;if("object"==typeof e.config.options){if(!(n=t.labels&&t.labels[0]))return;o=(a.useSNameInTooltip?n.shortText:n.text)+(null===i?"":a.tooltipSepChar+r)}else o=(a.useSNameInTooltip?t.shortLabel:t.label)+(null===i?"":a.tooltipSepChar+r);return o},o.drawEntity=function(e,t){var o,n,i,r,l,s,c,h,d=this.getFromEnv("chart"),g=d.getFromEnv("animationManager"),u=e.config,b=a.tb||!de?"litepath":"path",f=d.config.entityOpts,p=u.outlines,m=this.getFromEnv("toolTipController"),v=this.getLinkedParent().getChildContainer("plot"),y=this.getLinkedParent().getChildContainer("plotShadow"),C=u.toolText,L=f.shadow,O=[],x={};if(this._configureEntityDrawingParams(e),n=(u=e.config).visibleEntityAttr,h=u.shadowOptions,o=void 0===u.outlineStartIndex?p.length:u.outlineStartIndex,e.graphics||(e.graphics={}),s=0,O=u.outlinePath||(u.outlinePath=[]),c=u.customStrokeWidthModifier,"object"==typeof u.options){for(;o--;)if(O=p[o].outline,i=!0===u.options.isDataEnabled?n:Object(a.X)(Object(a.X)({},n),ye(p[o].style,c)),(r=e.graphics.outlines)||(r=e.graphics.outlines=[]),!r[o]&&(r[o]={}),l=r[o].outline,i[b]=O,(l=r[o].outline=g.setAnimation({el:b,container:v,attr:i,component:this,label:"path"})).shadow(!!L&&h,y),m.enableToolTip(l,C),s++,u.outlineStartIndex=o,s===t)return s;return u.drawn=!0,s}for(;o--;)if(O=p[o].concat(O),s++,u.outlineStartIndex=o,s===t)return u.outlinePath=O,s;return!e.graphics.outlines&&(n[b]=O),Object.assign(x,n,e.hidden&&{"fill-opacity":0}||{}),e.graphics.outlines=g.setAnimation({el:e.graphics.outlines||b,container:v,attr:x,component:this,label:"path"}),u.drawn=!0,u.outlineStartIndex=0,u.outlinePath=[],e.graphics.outlines.shadow(!!L&&h,y),m.enableToolTip(e.graphics.outlines,C),s},o._configureEntityDrawingParams=function(e){var t,o=this.getFromEnv("chart"),n=e.config,i=o.config.entityOpts,r=o.config.scalingParams,l=!de||a.tb,s=r.scaleFactor,c=r.strokeWidth,h=(l?o.baseScaleFactor:1)*c,d=1===i.scaleBorder,g=n.borderThickness,u=n.alphaArr,b=n.origConnectorThickness,f=n.hoverBorderThickness,p=n.visibleEntityAttr,m=p["fill-opacity"];n.shadowOptions={scalefactor:[s,s*o.config.baseScaleFactor],opacity:be.apply(ge,u)/100,useFilter:0},n.fillOpacity=e.hidden?0:m,l?(g=n.entityBorderThickness=d?g*h:g/s,b/=s,t=d?s:r.sFactor,f&&(f=n.hoverBorderThickness=d?f*h:f/s)):(g=d?g*c:g,t=d?r.scaleFactor:o.baseScaleFactor),n.entityBorderThickness=g,n.connectorThickness=b,n.customStrokeWidthModifier=t,p["stroke-width"]=g,p.transform=a.tb||!de?"":r.transformStr},o.drawLabels=function(e){var t,o,n,i,r=e,a=this.getFromEnv("chart"),l=this.config,s=l.labelBatchSize,c=l.entityLength,h=[],d=a.getChildContainer("upperAnnotationGroup"),g=0,u=this.getChildren("mapLabelAnnotations")&&this.getChildren("mapLabelAnnotations")[g],b=0,f=0,p=a.config.annotationConfig;for(t in u||(i=new q.a,this.attachChild(i,"mapLabelAnnotations"),(u=this.getChildren("mapLabelAnnotations")[g]).addCustomGroup(d)),u.destroy(),u._renderer&&(u._renderer=null),p.showbelow=0,r){if(this.drawLabel(r[t],h),++b===s){for(o=0;o<h.length;o++)h[o].animationLabel="entityLabel";for(n=u.addGroup(Object.assign(p,{id:"entityLabels"+g,items:h,animationLabel:"entityLabelGroup"}),this),o=0;o<n.items.length;o++)n.items[o].addEventListener("fc-mouseover",h[o].onmouseover),n.items[o].addEventListener("fc-mouseout",h[o].onmouseout),n.items[o].addEventListener("fc-click",h[o].onclick);g++,(u=this.getChildren("mapLabelAnnotations")&&this.getChildren("mapLabelAnnotations")[g])||(i=new q.a,this.attachChild(i,"mapLabelAnnotations"),(u=this.getChildren("mapLabelAnnotations")[g]).addCustomGroup(d)),u.destroy(),u._renderer&&(u._renderer=null),b=0,h=[]}else if(f===c-1){for(o=0;o<h.length;o++)h[o].animationLabel="entityLabel";for(n=u.addGroup(Object.assign(p,{id:"entityLabels"+g,items:h,animationLabel:"entityLabelGroup"}),this),o=0;o<n.items.length;o++)n.items[o].addEventListener("fc-mouseover",h[o].onmouseover),n.items[o].addEventListener("fc-mouseout",h[o].onmouseout),n.items[o].addEventListener("fc-click",h[o].onclick)}f++}this.drawLabelConnFn(0)},o.drawLabelConnFn=function(e){var t,o,n,i,r,a=this.config,l=this.components.data,s=a.BATCH_SIZE,c=a.entityKeys,h=c.length,d=0;for(o=e;o<h;o++){if("object"==typeof(i=(r=l[c[o]]).config).options)for(t=(n=i.labels)&&n.length||0;t--;)n[t].labelConnectors&&(this.drawLabelConnectors(r,n[t].labelConnectors,this),d++);else i.labelConnectors&&(this.drawLabelConnectors(r,i.labelConnectors,this),d++);if(d===s){this.addJob("drawLabelConnectors",this.drawLabelConnFn.bind(this,o),j.b.entitydraw);break}}},o._getLabelObject=function(e,t,o){var n,i,r,l,s,c,h,d,g,u,b,f=this,p=f.getFromEnv("chart"),m=f.getFromEnv("chart-attrib"),v=e.config,y=p.config.scalingParams,C=e.graphics&&e.graphics.outlines,L=v.fontSize,O=v.labelPadding,x=v.labels||[],k=v.entityLabels||[];return void 0!==t?(b=x[t],l=(n=k[t].config).style=b.style,i=b.labelPosition,r=b.labelAlignment):(n=e.labelConfig,i=v.labelPosition,r=v.labelAlignment),i?(s=i[0],c=i[1]):(s=(h=C.getBBox()).x+h.width/2,c=h.y+h.height/2),r?("right"===(d=r[0])?s-=O:"left"===d&&(s+=O),"top"===(g=r[1])?c-=O:"bottom"===g&&(c+=O)):(d="center",g="middle"),u=parseFloat(L)/y.sFactor,!o&&l&&(l.color&&(n.fontColor=l.color),l["font-size"]&&(u=parseFloat(l["font-size"])/y.sFactor),l["font-family"]&&(n.fontFamily=l["font-family"]),void 0!==l["font-weight"]&&(n.fontBold="bold"===l["font-weight"])),n.x=s.toString(),n.y=c.toString(),n.wrap=1,n.type="text",n.fontSize=u,{x:s.toString(),y:c.toString(),wrapwidth:Ce[d](void 0,s+void 0)-O,wrapheight:Le[g](void 0,c+void 0)-O,wrap:1,type:"text",align:n.align,valign:n.vAlign,text:n.displayValue,tooltext:n.toolText,outlineText:Object(a.Lb)(m.textoutline,0),css:void 0!==n.link&&{cursor:"pointer",_cursor:"hand"},bgcolor:n.bgColor,bordercolor:n.borderColor,fillcolor:n.fontColor,fontsize:n.fontSize,font:n.fontFamily,bold:n.fontBold,onclick:function(t){var o,n,i=e.graphics.outlines;if(i instanceof Array)for(o=0,n=i.length;o<n;o++)f.entityClick(i[o].outline,t);else f.entityClick(i,t)},onmouseover:function(t){var o,n,i=e.graphics.outlines;if(i instanceof Array)for(o=0,n=i.length;o<n;o++)f.entityRollOver(i[o].outline,t);else f.entityRollOver(i,t)},onmouseout:function(t){var o,n,i=e.graphics.outlines;if(i instanceof Array)for(o=0,n=i.length;o<n;o++)f.entityRollOut(i[o].outline,t);else f.entityRollOut(i,t)},ontouchstart:function(t){var o,n,i=e.graphics.outlines;if(i instanceof Array)for(o=0,n=i.length;o<n;o++)f.entityRollOver(i[o].outline,t);else f.entityRollOver(i,t);f.entityRollOver(i,t)}}},o.drawLabel=function(e,t){var o,n,i,r=e.config;if(r.showLabel)if("object"==typeof r.options)for(n=(i=r.labels)&&i.length||0,o=r.options.isDataEnabled;n--;)t.push(this._getLabelObject(e,n,o,!n));else t.push(this._getLabelObject(e,void 0,!0,!0))},o.drawLabelConnectors=function(e,t,o){for(var n,i,r=e.config,l=this.getFromEnv("chart"),s=l.getFromEnv("animationManager"),c=l.config.scalingParams,h=o.getLinkedParent().getChildContainer("plot"),d=t&&t.length||0,g=r.showLabel;d--;)i=t[d],n=e.graphics.connectorElem,g?e.graphics.connectorElem=n=s.setAnimation({el:e.graphics.connectorElem||"path",attr:{path:i,opacity:1,transform:a.tb||!de?"":c.transformStr,stroke:Object(a.R)(r.connectorColor,r.connectorAlpha),"shape-rendering":"crisp","stroke-width":r.connectorThickness},container:h,component:this,label:"labelConnectors"}):n&&n.hide()},o.entityClick=function(e,t){var o=e.node.__entity,n=this.getFromEnv("chart"),i=n.config.scalingParams,r=e.getBBox(),a=n.getFromEnv("linkClickFN"),l=o.config,s=l.link;r.width=r.width*i.scaleFactor,r.height=r.height*i.scaleFactor,r.x=r.x*i.scaleFactor+i.translateX,r.y=r.y*i.scaleFactor+i.translateY,r.x2=r.x+r.width,r.y2=r.y+r.height,n.fireChartInstanceEvent("entityclick",l.eventArgs,t),void 0!==s&&a.call({link:s,entity:o,entityBox:r},!0)},o.entityRollOver=function(e,t){var o=e.node.__entity,n=o.config,i=this.getFromEnv("chart"),r=i.getFromEnv("animationManager"),a=n.hoverAttr;i.plotEventHandler(e,t,"entityRollOver"),e.data("hovered")?clearTimeout(o.config.timer):n.useHoverColor&&n.isVisible&&!o.hidden&&a&&(i.config.hoverEntity=e,r.setAnimation({el:e,attr:a,component:this,state:"updating",label:"path"}),e.data("hovered",!0))},o.entityRollOut=function(e,t){var o=e.node.__entity,n=this,i=n.getFromEnv("chart"),r=i.getFromEnv("animationManager"),a=o.config.revertAttr;i.plotEventHandler(e,t,"entityRollOut"),o.config.timer=setTimeout((function(){!0!==o.hidden&&a&&(r.setAnimation({el:e,attr:a,component:n,state:"updating",label:"path"}),e.data("hovered",!1))}),100)},o.addMouseGestures=function(e){var t,o,n,i,r=e.config,l=r.originalId,s=this,c=e.graphics,h=r.useHoverColor,d=r.hoverBorderThickness,g=r.hoverBorderColor,u=r.hoverBorderAlpha,b=r.entityBorderThickness,f=r.borderColor,p=r.borderAlpha,m=r.link,v=r.visibleEntityAttr,y="groupId"+l,C=function(t){void 0!==m&&t.css({cursor:"pointer",_cursor:"hand"}),t.data("eventArgs",r.eventArgs),t.data("groupId",y),t.node.__entity=e,e._listenersBinded||t.on("fc-click",s.entityClick.bind(s,t)).hover(s.entityRollOver.bind(s,t),s.entityRollOut.bind(s,t))};for(t in r.eventArgs={value:r.cleanValue,label:r.label,shortLabel:r.shortLabel,originalId:r.origId,id:r.id||r.origId},r.legacyEventArgs={value:r.value,lName:r.label,sName:r.shortLabel,id:r.originalId||r.id},h&&(r.hoverAttr={fill:Object(a.Xb)(r.hoverColor)},r.revertAttr={fill:Object(a.Xb)(r.fillColor),stroke:Object(a.Xb)(r.borderColor,r.borderAlpha)},r.revertAttr["fill-opacity"]=v["fill-opacity"],d!==b&&(r.hoverAttr["stroke-width"]=Object(a.Lb)(d,b),r.revertAttr["stroke-width"]=b),g===f&&u===p||(r.hoverAttr.stroke=Object(a.R)(g,u),r.revertAttr.stroke=Object(a.R)(f,p))),c)if(c.hasOwnProperty(t))if(c[t]instanceof Array){for(o=0,n=(i=c[t]).length;o<n;o++)C(i[o].outline);e._listenersBinded=!0}else C(c[t]),e._listenersBinded=!0},o.getDataLimits=function(){var e=this.config;return{max:e.max,min:e.min}},o.createContainer=function(){var e=this.getLinkedParent(),t=this.getFromEnv("animationManager"),o=e.getChildContainer("layer0");!this.getChildContainer("abovePlotGroup")&&this.addChildContainer("abovePlotGroup",t.setAnimation({el:"group",attr:{name:"abovePlotGroup",opacity:1},container:o,component:this,label:"group"})),!this.getChildContainer("belowPlotGroup")&&this.addChildContainer("belowPlotGroup",t.setAnimation({el:"group",attr:{name:"belowPlotGroup",opacity:1},container:o,component:this,label:"group"}))},o.initComplete=function(){var e=this.getFromEnv("chart"),t=this.components.data;this.drawLabels(t),e.config.entitiesReady=!0,e.checkComplete()},t}(g.a),ke=function(e,t,o,n,i){return Math.pow(o-e,2)+Math.pow(n-t,2)<=Math.pow(i,2)},we=Math.PI,je=Math.cos,Fe=Math.sin,Se=Math.max,Ae=Math.min,Ee=we/180,_e=function(e,t,o,n,i,r){var a,l,s;return a=(n-t)*(i-o),l=(o-e)*(r-n),isNaN(a)&&(a=0),isNaN(l)&&(l=0),0===(s=a-l)?0:s>0?1:2},Ie=function(e,t,o,n,i,r){return o<=Se(e,i)&&o>=Ae(e,i)&&n<=Se(t,r)&&n>=Ae(t,r)},Pe=function(e,t,o,n,i,r,a,l){var s=_e(e,t,o,n,i,r),c=_e(e,t,o,n,a,l),h=_e(i,r,a,l,e,t),d=_e(i,r,a,l,o,n);return s!==c&&h!==d||(!(0!==s||!Ie(e,t,i,r,o,n))||(!(0!==c||!Ie(e,t,a,l,o,n))||(!(0!==h||!Ie(i,r,e,t,a,l))||!(0!==d||!Ie(i,r,o,n,a,l)))))},Te=function(e,t,o,n,i,r,a){var l,s,c,h,d,g,u,b=0,f=!1;if(ke(e,t,o,n,i)&&r>=3){for(s=void 0===a?.5*we:a%360*Ee,u=2*we/r,c=o+i*je(-s),g=n+i*Fe(-s),l=0;l<r;l++){if(h=o+i*je(-(s+=u)),d=n+i*Fe(-s),Pe(c,g,h,d,e,t,1/0,t)){if(0===_e(c,g,e,t,h,d))return Ie(c,g,e,t,h,d);b++}c=h,g=d}f=b%2!=0}return f},Me=function(e,t){return!e||e&&t&&t.i>e.i?t:e};var Be=function(){function e(e){this.configure(e)}var t=e.prototype;return t.configure=function(e){this.validatorFn=e?this.shapeValidator():this.defaultValidator()},t.defaultValidator=function(){var e=this;return function(t){var o=e.mousePoint;return!!(t&&Math.pow((t.x-o.x)/e.xLimit,2)+Math.pow((t.y-o.y)/e.yLimit,2)<=1)}},t.shapeValidator=function(){var e=this;return function(t){var o,n,i,r,a,l,s,c,h=e.mousePoint,d=t&&t.shapeInfo,g=!1,u=h.x,b=h.y;switch(d&&d.type){case"circle":n=d.radius,g=ke(u,b,t.x,t.y,n);break;case"arc":o=d.innerradius,n=d.radius,g=!ke(u,b,t.x,t.y,o)&&ke(u,b,t.x,t.y,n);break;case"polygon":n=d.radius,r=d.startAngle,i=d.sides,g=Te(u,b,t.x,t.y,n,i,r);break;case"rect":case"rectangle":a=t.x,s=t.y,l=a+(d.width||0),c=s+(d.height||0),g=u>=a&&u<=l&&b>=s&&b<=c;break;case"default":g=!1}return g}},t.buildKdTree=function(e){return this.kdTree=function(e){var t,o,n,i=e,r=i&&i[0]&&i[0].r||5,a=Math.max,l=Math.floor,s=Math.sqrt,c=Math.min,h=Math.log,d=Math.exp,g=Math.pow;function u(e,t,o){var n=e[t];e[t]=e[o],e[o]=n}for(o=function(e,t,n,i){for(var r,g,b,f,p,m,v,y,C,L,O=n,x=i;x>O;){for(x-O>600&&(g=t-O+1,b=h(r=x-O+1),f=.5*d(2*b/3),p=.5*s(b*f*(r-f)/r)*(g-r/2<0?-1:1),m=a(O,l(t-g*f/r+p)),v=c(x,l(t+(r-g)*f/r+p)),o(e,t,m,v)),y=e[t],C=O,L=x,u(e,O,t),e[x].x>y.x&&u(e,O,x);C<L;){for(u(e,C,L),C++,L--;e[C].x<y.x;)C++;for(;e[L].x>y.x;)L--}e[O].x===y.x?u(e,O,L):u(e,++L,x),L<=t&&(O=L+1),t<=L&&(x=L-1)}},n=function(e,t,o,i){for(var r,g,b,f,p,m,v,y,C,L,O=o,x=i,k=e;x>O;){for(x-O>600&&(g=t-O+1,b=h(r=x-O+1),f=.5*d(2*b/3),p=.5*s(b*f*(r-f)/r)*(g-r/2<0?-1:1),m=a(O,l(t-g*f/r+p)),v=c(x,l(t+(r-g)*f/r+p)),n(k,t,m,v)),y=k[t],C=O,L=x,u(k,O,t),k[x].y>y.y&&u(k,O,x);C<L;){for(u(k,C,L),C++,L--;k[C].y<y.y;)C++;for(;k[L].y>y.y;)L--}k[O].y===y.y?u(k,O,L):u(k,++L,x),L<=t&&(O=L+1),t<=L&&(x=L-1)}},t=(i=i||[]).length;t--;)i[t].r>r&&(r=i[t].r),i[t].i=t,i[t].x=+i[t].x,i[t].y=+i[t].y;return{tree:0===i.length?{}:function e(t,i,r,a){var l,s={},c=a?"y":"x";return i===r?(s.point=t[i],s):r-i==1?(t[i][c]>t[r][c]?(s.point=t[i],s.left={point:t[r]}):(s.point=t[r],s.left={point:t[i]}),s):(l=i+r>>1,a?n(t,l,i,r):o(t,l,i,r),s.point=t[l],s.left=e(t,i,l-1,!a),s.right=e(t,l+1,r,!a),s)}(i,0,i.length-1,!1),search:function(e,t,o,n){var i,a,l,c=this.tree,h=n,d=e-r,u=e+r,b=t-r,f=t+r,p=!1,m=0;function v(e,t,o,n){return s(g(e-o,2)+g(t-n,2))}function y(n,i){return"circle"===o?v(n,i,e,t)<=d:n>=d&&n<=u&&i>=b&&i<=f}function C(e,t,o){return e>=t&&e<=o}function L(o){var n=C(e,o.x1,o.x2)&&C(t,o.y1,o.y2),r=v(e,t,o.point.x,o.point.y);if(!i)return i=o,p=n,void(m=r);n?p?o.point.i>i.point.i&&(i=o,p=n,m=r):(i=o,p=n,m=r):p||r<m&&(i=o,p=n,m=r)}function O(n,i){"circle"===o?d=n:(d=e-n||0,u=e+n||0,b=t-i||0,f=t+i||0)}return h=h||{},l=function(e){e&&e.point&&(O(h.rx||e.point.r,h.ry||e.point.r),y(e.point.x,e.point.y)&&L(e),b<=e.point.y&&a(e.left),f>=e.point.y&&a(e.right))},(a=function(e){e&&e.point&&(O(h.rx||e.point.r,h.ry||e.point.r),y(e.point.x,e.point.y)&&L(e),d<=e.point.x&&l(e.left),u>=e.point.x&&l(e.right))})(c),i&&i.point||i}}}(e),this.tree=this.kdTree.tree,this},t.getNeighbour=function(e,t,o){var n=this.tree,i={x1:e.x-this.xLimit,x2:e.x+this.xLimit,y1:e.y-this.yLimit,y2:e.y+this.yLimit},r=this.validatorFn;return this.mousePoint=e,t?this.kdTree&&this.kdTree.search(e.x,e.y,o,e.options):n?this._searchBtwnLimit(i,n,!0,r):void 0},t._searchBtwnLimit=function(e,t,o,n){var i,r,a=o?"x":"y",l=o?e.x1:e.y1,s=o?e.x2:e.y2;if(void 0!==(i=t&&t.point&&t.point[a]))return n(t.point)&&(r=t.point),i>=l&&t.left&&(r=Me(r,this._searchBtwnLimit(e,t.left,!o,n))),i<=s&&t.right&&(r=Me(r,this._searchBtwnLimit(e,t.right,!o,n))),r},t._setSearchLimit=function(e,t){this.xLimit=e,this.yLimit=t},e}();Be.prototype.constructor=Be;var Re=Be,De=window.Math,Je=De.min,Ge=De.max,Ne=function(e){var t,o=this.getFromEnv("chart"),n=this.getChildren("mapAnnotations")[0],i=e.markerShape,r=i.groupConfig,l=i.data("unfilteredConfig"),s=l._markerEventArgs,c=e.config;l.hovereffect&&("circle"===i.config.type&&(t=Object(a.X)({fillcolor:l.hoverfillcolor,fillalpha:l.hoverfillalpha,fillangle:l.hoverfillangle,fillratio:l.hoverfillratio,gradientUnits:"objectBoundingBox",radialGradient:1},l._hoverattrs)),t=Object(a.X)({},l._hoverattrs),n.update(i.getId(),t)),s||(s=l._markerEventArgs={x:+l.x,y:+l.y,scaledX:l.x*r.scaleX,scaledY:l.y*r.scaleY,chartX:l.x*r.scaleX+r.grpXShift,chartY:l.y*r.scaleY+r.grpYShift,id:l.id,label:l.label}),Object($.e)(c.options.id,"markerRollOver",s,o.getFromEnv("chartInstance"),c,void 0,void 0,void 0)},Ve=function(e){var t,o=this.getFromEnv("chart"),n=this.getChildren("mapAnnotations")[0],i=e.markerShape,r=i.getElement(),l=e.config,s=i.data("unfilteredConfig");r&&s.hovereffect&&("circle"===i.config.type&&(t=Object(a.X)({fillcolor:i.config.rawColor,fillalpha:i.config.rawAlpha,fillangle:i.config.rawAngle,fillratio:i.config.rawRatio,gradientUnits:"objectBoundingBox",radialGradient:"radial"===i.config.rawFillPattern},s._defaultattrs)),t=Object(a.X)({},s._defaultattrs),n.update(i.getId(),t)),Object($.e)(l.id,"markerRollOut",s._markerEventArgs,o.getFromEnv("chartInstance"),void 0,void 0,void 0)},We=function(e,t){var o=t.config.options,n=this.getFromEnv("chart"),i=t.markerShape,r=i.config,a=i.groupConfig,l=this.getFromEnv("linkClickFN"),s=i.config.link,c=r._markerEventArgs;s&&l&&l.call({link:s},!0),c||(c=r._markerEventArgs={x:+r.x,y:+r.y,scaledX:r.x*a.scaleX,scaledY:r.y*a.scaleY,chartX:r.x*a.scaleX+a.grpXShift,chartY:r.y*a.scaleY+a.grpYShift,id:o.id,label:o.label}),n.fireChartInstanceEvent("markerClick",c,e)},He=function(e,t){var o,n=e&&e.length||!1,i=t||"id",r={};if(!e)return e;for(;n--;)void 0!==(o=e[n])[i]&&(r[o[i].toLowerCase()]=o);return r},Xe=function(e,t,o){return{x:e.toString(),y:(t-o).toString(),align:"center",valign:"top"}},ze=function(e,t,o){return{x:(e-o).toString(),y:t.toString(),align:"right",valign:"middle"}},Ye=function(e,t,o){return{x:(e+o).toString(),y:t.toString(),align:"left",valign:"middle"}},Ke=function(e,t,o){return{x:e.toString(),y:(t+o).toString(),align:"center",valign:"bottom"}},Ue=function(e,t){return{x:e.toString(),y:t.toString(),align:"center",valign:"middle"}},Ze=function(){return arguments[1]},$e=function(e,t){return e-t},qe=function(e,t){return 2*Je(t,e-t)},Qe=function(){return arguments[1]},et=function(e,t){return 2*Je(t,e-t)},tt=function(e,t){return e-t};Object(u.a)({name:"mapsAnimation",type:"animationRule",extension:se});var ot=function(e){function t(){var t;return(t=e.call(this)||this).components={},t.getLabelAlignment={top:Xe,left:ze,right:Ye,bottom:Ke,center:Ue},t.getWrapWidth={right:Ze,left:$e,center:qe},t.getWrapHeight={top:Qe,middle:et,bottom:tt},t.hoverFn=Ne,t.hoverOutFn=Ve,t.clickFn=We,t}i()(t,e);var o=t.prototype;return o.getName=function(){return"markers"},o.getType=function(){return"dataset"},o.configureAttributes=function(e){if(e){this.JSONData=e;var t,o=this.getChildren("mapAnnotations")&&this.getChildren("mapAnnotations")[0],n=this.getFromEnv("chart").config.markerOpts;o||(t=new q.a,this.attachChild(t,"mapAnnotations"),o=this.getChildren("mapAnnotations")[0]),o.destroy(),this.calculateDataLimits(),n.dataEnabled?this._parseMarkers():this.defineMarkersNShapes(),this.configureConnectors()}},o.calculateMarkerRadiusLimits=function(){if(this.JSONData){var e=this.JSONData,o=this.config,n=this.getFromEnv("chart"),i=n.config.width,r=n.config.height,a=e.markermaxradius,l=e.markerminradius,s=t.getMarkerRadiusLimits(i,r,a,l);o.minRadius=s.min,o.maxRadius=s.max}},o.calculateDataLimits=function(){var e,t,o,n,i=this.getFromEnv("chart"),r=this.config,a=(i.jsonData.markers||{}).items||[],l=this.getFromEnv("number-formatter"),s=1/0,c=-1/0;for(n=0,t=a.length;n<t;n++)o=a[n].value,null!==(e=l.getCleanValue(o))&&(s=Je(e,s),c=Ge(e,c));r.min=s,r.max=c},o._parseMarkers=function(){var e,o,n,i,r,l,s,c,h=this.getFromEnv("chart"),d=h.jsonData.markers,g=d.items,u=d.shapes,b=h.config.markerOpts,f=b.dataLabels.style,p=this.getFromEnv("number-formatter"),m=this.components.shapeObjs={},v=this.components.markerObjs={};if(g&&g.length){if(u&&u.length)for(o=u.length;o;o-=1)(c=(i=u[o-1]).id.toLowerCase())&&(m[c]=i);for(o=g.length;o--;)(c=(i=g[o]).id&&i.id.toLowerCase())&&(void 0!==(e=i.value)&&""!==e&&(e=parseFloat(e)),(r=(n=t._initializeMarkerItem(c,i,null,h)).config.options.shapeid)&&"string"==typeof r&&(r=r.toLowerCase()),s=(l=n.config).options,l.cleanValue=p.getCleanValue(e),null!==l.cleanValue?l.formattedValue=p.dataLabels(e):l.formattedValue=void 0,l.fillColor=Object(a.Jb)(s.fillcolor,s.color,b.fillColor),l.fillAlpha=Object(a.Jb)(s.fillalpha,s.alpha,b.fillAlpha),l.fillRatio=Object(a.Jb)(s.fillratio,b.fillRatio),l.fillAngle=Object(a.Jb)(s.fillangle,b.fillAngle),l.borderThickness=Object(a.Lb)(s.borderthickness,b.borderThickness),l.borderColor=Object(a.Jb)(s.bordercolor,b.borderColor),l.borderAlpha=Object(a.Jb)(s.borderalpha,b.borderAlpha),l.labelPadding=s.labelpadding||b.labelPadding,l.fontColor=Object(a.Jb)(s.labelcolor,f.fontColor),l.labelBgColor=Object(a.Jb)(s.labelbgcolor,f.labelBgColor)||"",l.labelBorderColor=Object(a.Jb)(s.labelbordercolor,f.labelBorderColor)||"",i.__hideMarker&&(n._isHidden=!0),r&&(n.shapeObj=m[r]),v[c]=n)}},o.defineMarkersNShapes=function(){var e,o,n,i,r,l,s,c,h=this.getFromEnv("chart"),d=h.jsonData.markers,g=d.definition,u=this.getFromEnv("number-formatter"),b=h.config.markerOpts,f=b.dataLabels.style,p=He(g)||{},m=He(d.application)||{},v=d.shapes,y=this.components.shapeObjs=this.components.shapeObjs||(this.components.shapeObjs={}),C=this.components.markerObjs=this.components.markerObjs||(this.components.markerObjs={}),L={},O={};if(g&&g.length){for(i in y)L[i]=!1;for(i in C)O[i]=!1;if(v&&v.length)for(i=v.length;i;i-=1)(c=(l=v[i-1]).id.toLowerCase())&&(y[c]=l,L[c]=!0);for(c in p)l=p[c],r=C[c]=t._initializeMarkerItem(c,l,m[c],h),O[c]=!0,s=r.config.options.shapeid,o=r.config,n=l.value,o.cleanValue=u.getCleanValue(n),e=o.options,null!==o.cleanValue?o.formattedValue=u.dataLabels(n):o.formattedValue=void 0,o.fillColor=Object(a.Jb)(e.fillcolor,e.color,b.fillColor),o.fontColor=Object(a.Jb)(e.labelcolor,f.fontColor),o.fillAlpha=Object(a.Jb)(e.fillalpha,e.alpha,b.fillAlpha),o.fillRatio=Object(a.Jb)(e.fillratio,b.fillRatio),o.fillAngle=Object(a.Jb)(e.fillangle,b.fillAngle),o.borderThickness=Object(a.Lb)(e.borderthickness,b.borderThickness),o.borderColor=Object(a.Jb)(e.bordercolor,b.borderColor),o.borderAlpha=Object(a.Jb)(e.borderalpha,b.borderAlpha),o.labelPadding=e.labelpadding||b.labelPadding,o.options.tooltext=Object(a.Jb)(e.tooltext,b.tooltext),o.link=e.link,s&&(r.shapeObj=y[s.toLowerCase()]);for(i in L)L[i]||delete y[i];for(i in C)O[i]||delete C[i]}},t.getMarkerRadiusLimits=function(e,t,o,n){var i,r,a=Je(e,t),l=.02*a,s=.07*a;return i=parseFloat(n),r=parseFloat(o),isNaN(i)||isNaN(r)?isNaN(i)?isNaN(r)?{min:l,max:s}:{min:parseInt(r/10,10),max:r}:{min:i,max:10*i}:i<r?{min:i,max:r}:{min:r,max:i}},o.getDataLimits=function(){var e=this.config;return{min:e.min,max:e.max}},t._initializeMarkerItem=function(e,t,o){var n,i={},r=i.config;return r||(r=i.config={}),r.id=e,r.definition=t,r.application=o,r.hasValue=null,r.value=null,r.options=null,r.label=null,r.markerShape=null,r.markerLabel=null,r.drawOptions={shape:null,label:null},r.drawComplete=!1,n=i.config.options=Object(a.X)({},r.definition),r.dataEnabled?isNaN(n.value)||""===n.value||(i.value=parseFloat(n.value),i.hasValue=!0):r.applyAll?r.options=Object(a.X)(n,r.application):o&&(r.options=Object(a.X)(n,r.application)),i},o.configureConnectors=function(){var e,t,o,n,i,r,l,s,c,h,d,g,u,b,f=this.getFromEnv("chart"),p=this.getChildren("mapAnnotations")[0],m=f.jsonData,v=this.components,y=m.markers||{},C=y.connector||y.connectors||[],L=v.markerObjs,O=C.length,x=this.components.connectors,k=function(e){return function(t){var o=this.data("unfilteredConfig");o.hoverEffect&&p.update(this.getId(),o._hoverAttrs),f.fireChartInstanceEvent("connectorrollover",e,t)}},w=function(e){return function(t){var o=this.data("unfilteredConfig");o.hoverEffect&&p.update(this.getId(),o._defaultAttrs),f.fireChartInstanceEvent("connectorrollout",e,t)}},j=function(e){return function(t){f.fireChartInstanceEvent("connectorClick",e,t)}},F=f.config.connectorOpts,S={};for(x=this.components.connectors=[],b=0;b<O;b++)((u=C[b]).from||u.to)&&(t=L[u.from.toLowerCase()],o=L[u.to.toLowerCase()],t&&o&&(n=C[b].label,!(S=x[b])&&(S=x[b]={}),!S.config&&(e=S.config={}),!S.graphics&&(S.graphics={}),(e=S.config=Object(a.X)({},u)).fromMarker=t,e.toMarker=o,e.link=u.link,e.showTooltip=Object(a.Lb)(u.showtooltip,F.showTooltip),i=e.tooltext=e.showTooltip?Object(a.Jb)(u.tooltext,F.tooltext):"",r=e.thickness=Object(a.Jb)(u.thickness,F.thickness),l=e.color=Object(a.Jb)(u.color,F.color),s=e.alpha=Object(a.Jb)(u.alpha,F.alpha),e.hoverEffect=Object(a.Lb)(u.showhovereffect,F.showHoverEffect),c=Object(a.Jb)(u.hovercolor,F.hoverColor,l),h=Object(a.Jb)(u.hoveralpha,F.hoverAlpha,s),d=Object(a.Jb)(u.hoverthickness,F.hoverThickness,r),e.dashed=Object(a.Jb)(u.dashed,F.dashed),e.dashLen=Object(a.Lb)(u.dashlen,F.dashlen),e.dashGap=Object(a.Lb)(u.dashgap,F.dashgap),i&&(e.tooltext=i=Object(a.Ib)(Object(a.Hb)(i,[3,40,41,42,43],{label:n,fromId:t.config.definition.id,toId:o.config.definition.id,fromLabel:t.config.definition.label,toLabel:o.config.definition.label},void 0))),e.eventArgs={fromMarkerId:t.config.id,toMarkerId:o.config.id,label:n},e._hoverAttrs={color:c,alpha:h,thickness:d},e._defaultAttrs={color:l,alpha:s,thickness:r},e.type="line",e.onclick=j(e.eventArgs),e.onmouseover=k(e.eventArgs),e.onmouseout=w(e.eventArgs),n&&(!(g=S.labelConfig)&&(g=S.labelConfig={}),g.type="text",g.text=n,g.align="center",g.valign="middle",g.font=F.font,g.fillcolor=Object(a.Jb)(u.labelcolor,F.fontColor),g.bgcolor=Object(a.Jb)(u.labelbgcolor,F.labelBgColor),g.bordercolor=Object(a.Jb)(u.labelbordercolor,F.labelBorderColor),g.tooltext=e.tooltext)))},o.draw=function(){var e,t,o,n,i,r,a,l,s=this.getFromEnv("chart"),c=this.config,h=this.getChildren("mapAnnotations")[0],d=this.components.markerObjs,g=s.config,u=g.markerOpts,b=g.scalingParams,f=s.config.annotationConfig,p=[],m=[],v={},y={};for(i in h.destroy(),this.createContainer(),this._drawConnectors(),this.imageLoadCount=0,this.imageCount=0,c.autoScale=u.autoScale?b.sFactor:1,d)e=null,(n=(t=d[i]).config).conIsHidden||(e=this._drawMarkerItem(t)),e&&(y[i]=e,n._annotationIndex=p.length,v[i]=t,e.markerShape&&(o=Object.assign({align:"center",valign:"middle",animationLabel:"markerItem",autoscale:"image"===e.markerShape.type?0:1},e.markerShape),p.push(o)),e.markerLabel&&(o=Object.assign({animationLabel:"markerItem",id:e.markerShape.id},e.markerLabel),m.push(o)));for(i in l=h.addGroup(Object.assign(f,{id:"markers",fillalpha:"100",items:p,scaleimages:1}),this),a=h.addGroup(Object.assign(f,{id:"markerLabels",items:m,scaleimages:1}),this),this.components.markerGroup=l,this.components.markerLabelGroup=a,r=0,d)y[i]&&((t=d[i]).markerShape=l.retrieveItem(p[r].id),t.markerShape.data("unfilteredConfig",p[r]),y[i].markerLabel&&(t.markerLabel=a.retrieveItem(p[r].id),t.markerLabel.data("unfilteredConfig",m[r])),r++);this.addJob("buildKdtree",this._buildKdTree.bind(this),j.b.kdTree)},o._buildKdTree=function(){var e,t,o=this.components.kdArrayMap,n=this.components.markerGroup,i=[],r=n&&n.items,a=r&&r.length||0;for(t=0;t<a;t++)o[e=r[t].config.id]&&i.push(o[e]);this.components.kDTree||(this.components.kDTree=new Re(!0)),this.components.kDTree._setSearchLimit(1/0,1/0),this.components.kDTree.buildKdTree(i)},o._drawMarkerItem=function(e){var t,o,n,i,r,l,s,c,h,d,g,u,b,f,p,m,v,y,C=this,L=C.getFromEnv("chart"),O=L.config,x=C.config,k=O.scalingParams,w=e.config,j=w.options,F=w.definition,S=O.markerOpts,A=S.dataLabels.style,E=j.shapeid,_=j.scale||1,I=j.label||"",P=L.config.scalingParams.scaleFactor*L.config.baseScaleFactor,T=(j.labelpos||"top").toLowerCase(),M=void 0===w.formattedValue?void 0:w.formattedValue,B=j.tooltext||S.tooltext,R=Object(a.Lb)(F.radius,w.radius,S.radius)*_*x.autoScale||1e-4,D=w.fillColor,J=w.fillAlpha,G=w.fillRatio,N=w.fillAngle,V=w.borderThickness,W=w.borderColor,H=w.borderAlpha,X=C.getChildren("mapAnnotations")[0],z=C.components.kdArrayMap||(C.components.kdArrayMap={}),Y=e.config.id;if(w.autoScale=S.autoScale?P:1,E)return B=B?Object(a.Ib)(Object(a.Hb)(B,[1,2,3],{formattedValue:M,label:I},j)):M?I+S.tooltipSepChar+M:I,null!=M?I=I+S.labelSepChar+M:isNaN(_)?_=1:_<0?_=0:_>5&&(_=5),Object(a.X)(j,{x:j.x&&j.x.toString(),y:j.y&&j.y.toString(),fillcolor:D,fillalpha:J,fillratio:G,fillangle:N,borderthickness:V,bordercolor:W,borderalpha:H,hovereffect:Object(a.Jb)(S.showHoverEffect),radius:R&&R.toString(),link:j.link,showshadow:Object(a.Lb)(j.showshadow,w.shadow),_markerLabel:I,_markerId:j.id,id:(j.id+"").toLowerCase()}),delete j.tooltext,w.tooltext=!!S.showTooltip&&B,b=Number(j.x)*k.sFactor+k.translateX,f=Number(j.y)*k.sFactor+k.translateY,R=j.radius,"triangle"===E?(Object(a.X)(j,{type:"polygon",sides:3,startangle:S.startAngle}),y="polygon",v=3):"diamond"===E?(Object(a.X)(j,{type:"polygon",sides:4,startangle:S.startAngle}),y="polygon",v=4):"arc"===E?(m=.6*R,Object(a.X)(j,{type:"arc",startangle:0,endangle:360,innerradius:m}),y="arc"):"circle"===E?(j.type="circle",y="circle"):(g=C.getShapeArgs.call(e),S.dataEnabled&&S.valueToRadius&&void 0!==j.radius?delete g.radius:(!g.radius&&(g.radius=S.radius),g.radius*=_*w.autoScale),Object(a.X)(j,g),j.id=j._markerId&&j._markerId.toLowerCase(),m=g.innerradius,g.radius&&(R=g.radius),y=g.type&&g.type.toLowerCase(),v=g.sides,(R=Number(R))&&m&&R<m&&(u=R,j.radius=R=m,j.innerradius=m=u)),j.type=j.type&&j.type.toLowerCase(),Object(a.X)(j,{hoverfillcolor:Object(a.Jb)(j.fillhovercolor,S.hoverFillColor,j.fillcolor),hoverfillalpha:Object(a.Jb)(j.fillhoveralpha,S.hoverFillAlpha,j.fillalpha),hoverfillratio:Object(a.Jb)(j.fillhoverratio,S.hoverFillRatio,j.fillratio),hoverfillangle:Object(a.Jb)(j.fillhoverangle,S.hoverFillAngle,j.fillangle),hoverborderthickness:Object(a.Lb)(j.borderhoverthickness,S.hoverBorderThickness,j.borderthickness),hoverbordercolor:Object(a.Jb)(j.borderhovercolor,S.hoverBorderColor,j.bordercolor),hoverborderalpha:Object(a.Jb)(j.borderhoveralpha,S.hoverBorderAlpha,j.borderalpha)}),j._hoverattrs={fillalpha:j.hoverfillalpha,fillcolor:j.hoverfillcolor,fillangle:j.hoverfillangle,fillratio:j.hoverfillratio,borderThickness:"0"!==j.showborder?j.hoverborderthickness:0,borderColor:j.hoverbordercolor,borderAlpha:j.hoverborderalpha},j._defaultattrs={fillalpha:j.fillalpha,fillcolor:j.fillcolor,fillangle:j.fillangle,fillratio:j.fillratio,borderThickness:"0"!==j.showborder?j.borderthickness:0,borderColor:j.bordercolor,borderAlpha:j.borderalpha},"image"===j.type?(j.borderthickness=j.borderthickness||0,j.onload=function(t){var o=t.width,n=t.height;p={},j=this.config,b=(Number(j.derivedX)-o/(2*k.sFactor))*k.sFactor,f=(Number(j.derivedY)-n/(2*k.sFactor))*k.sFactor,(p=z[Y]||(z[Y]={})).x=b+k.translateX,p.y=f+k.translateY,p.element=e,p.shapeInfo={type:"rect",width:o,height:n},o&&n&&X.update(this.getId(),{x:b,y:f,width:o,height:n,autoscale:0}),C.imageLoadCount++,C.imageLoadCount===C.imageCount&&C._buildKdTree()},j.onerror=function(){C.imageLoadCount++,C.imageLoadCount===C.imageCount&&C._buildKdTree()},C.imageCount++):((p=z[Y]||(z[Y]={})).x=b,p.y=f,p.element=e,p.shapeInfo={type:y,sides:v,radius:Number(R)+j.borderthickness/2,innerradius:m}),w.drawOptions.shape=j,S.showLabels?(d=j.labelpadding||S.labelPadding,o=(t=C._getLabelOptions(T,d,j)).align,n=t.valign,i=w._labelBaseWidth,r=w._labelBaseHeight,l=w._labelXOffset,s=w._labelYOffset,(c=S.labelWrapWidth?S.labelWrapWidth:C.getWrapWidth[o](i,Number(t.x)+l))>d&&(c-=d),(h=S.labelWrapHeight?S.labelWrapHeight:C.getWrapHeight[n](r,Number(t.y)+s))>d&&(h-=d),w.drawOptions.label=Object(a.X)({type:"text"},{text:I,tooltext:j.tooltext,x:t.x,y:t.y,align:o,valign:t.valign,wrap:1,wrapwidth:c,wrapheight:h,fontsize:A.fontSize/k.sFactor,font:A.fontFamily,color:w.fontColor,bgcolor:w.labelBgColor||"",bordercolor:w.labelBorderColor||""}),{markerShape:j,markerLabel:w.drawOptions.label}):{markerShape:j}},o.highlightPoint=function(e,t){var o=e.element,n=t.originalEvent,i=this.getFromEnv("chart"),r=this.getFromEnv("toolTipController"),a=this.config.currentToolTip,l=i.config.lastHoveredPoint;l&&l!==e&&(l&&this.hoverOutFn(l.element),i.config.lastHoveredPoint=null,r.hide(a)),!1!==e&&("click"===t.type||"touchstart"===t.type?(i.config.lastHoveredPoint!==e&&this.hoverFn(o),this.clickFn(t,o)):"mousemove"===t.type&&i.config.lastHoveredPoint!==e&&this.hoverFn(o),o.config.tooltext&&(a?r.draw(n,o.config.tooltext,a):a=this.config.currentToolTip=r.draw(n,o.config.tooltext)),i.config.lastHoveredPoint=e)},o._drawConnectors=function(){var e,t,o,n,i,r,a,l,s,c,h,d,g,u=this.getFromEnv("chart"),b=u.config.annotationConfig,f=this.components.connectors||(this.components.connectors=[]),p=f.length,m=u.config.scalingParams,v=u.config.connectorOpts,y=v.showLabels,C=this.getChildren("mapAnnotations")[0],L=[],O=[],x=[],k={};for(x.push({id:"connectorLabels",fillalpha:"100",items:O}),x.push({id:"connectors",fillalpha:"100",items:L}),o=0;o<p;o++)f[o]&&(k[o]=!0,s=f[o].config.fromMarker.config,c=f[o].config.toMarker.config,i=s.options.x,r=s.options.y,a=c.options.x,l=c.options.y,f[o].config.x=i,f[o].config.y=r,f[o].config.tox=a,f[o].config.toy=l,g=Object.assign({animationLabel:"markerItem"},f[o].config),L.push(g),f[o].labelConfig&&y&&(f[o].labelConfig.x=((Number(i)+Number(a))/2).toString(),f[o].labelConfig.y=((Number(r)+Number(l))/2).toString(),f[o].labelConfig.fontsize=v.fontSize/(m.scaleFactor*u.config.baseScaleFactor),g=Object.assign({animationLabel:"markerItem"},f[o].labelConfig),O.push(g)));for(h=C.addGroup(Object.assign(b,x[1]),this),d=C.addGroup(Object.assign(b,x[0]),this),o=0,n=0;o<p;o++)k[o]&&((e=h.items[n])&&(e.data("unfilteredConfig",L[n]),e.addEventListener("fc-mouseover",f[o].config.onmouseover),e.addEventListener("fc-mouseout",f[o].config.onmouseout),e.addEventListener("fc-click",f[o].config.onclick)),f[o].labelConfig&&y&&(t=d.items[n])&&t.data("unfilteredConfig"),n++)},o.getShapeArgs=function(){var e,t=this.config,o=Object(a.X)({},this.shapeObj);return t.autoScale=1,o?("polygon"===o.type?o.sides<3?o.type="circle":o.startangle=t.startAngle:"arc"===o.type&&(e=(o.radius||t.markerRadius)*t.autoScale,o.radius=e,o.innerradius=o.innerradius&&o.innerradius*t.autoScale||.6*e),o):null},o._getLabelOptions=function(e,t,o,n,i){var r,a,l,s=e&&e.toLowerCase();return this.getLabelAlignment[s]||(s="center"),a=Number(o.x),l=Number(o.y),r=void 0===n||void 0===i?o.radius||0:/^(top|bottom)$/gi.test(s)&&.5*i||/^(left|right)$/gi.test(s)&&.5*n||0,r=Number(r)+Number(t),this.getLabelAlignment[s](a,l,r)},o.addMarkerItem=function(e){var o,n,i,r,l,s,c,h,d=this.getFromEnv("chart"),g=e,u=this.components.markerObjs,b=this.components.shapeObjs,f=this.components.markerGroup,p=this.components.markerLabelGroup,m=this.getChildren("mapAnnotations")[0],v=this.getFromEnv("number-formatter"),y=d.config.markerOpts;if(h=g.id.toLowerCase()){if(u[h])return;delete g.value,this.imageLoadCount=0,(o=t._initializeMarkerItem(h,g,null)).dataset=this,c=o.config.options.shapeid,r=o.config,s=g.value,r.cleanValue=v.getCleanValue(s),n=r.options,null!==r.cleanValue?r.formattedValue=v.dataLabels(s):r.formattedValue=void 0,r.fillColor=Object(a.Jb)(n.fillcolor,n.color,y.fillColor),r.fillAlpha=Object(a.Jb)(n.fillalpha,n.alpha,y.fillAlpha),r.fillRatio=Object(a.Jb)(n.fillratio,y.fillRatio),r.fillAngle=Object(a.Jb)(n.fillangle,y.fillAngle),r.borderThickness=Object(a.Lb)(n.borderthickness,y.borderThickness),r.borderColor=Object(a.Jb)(n.bordercolor,y.borderColor),r.borderAlpha=Object(a.Jb)(n.borderalpha,y.borderAlpha),r.labelPadding=n.labelpadding||y.labelPadding,r.options.tooltext=Object(a.Jb)(n.tooltext,y.tooltext),r.link=n.link,c&&(o.shapeObj=b[c&&c.toLowerCase()]),u[h]=o,i=this._drawMarkerItem(o),f&&p&&(i.markerShape&&(l=Object.assign({align:"center",valign:"middle",animationLabel:"markerItem",autoscale:"image"===i.markerShape.type?0:1},i.markerShape),o.markerShape=m.addItem(f.getId(),l,this),o.markerShape.data("unfilteredConfig",l)),i.markerLabel&&(l=Object.assign({animationLabel:"markerItem"},i.markerLabel),o.markerLabel=m.addItem(p.getId(),l,this),o.markerLabel.data("unfilteredConfig",l))),this._buildKdTree()}},o.updateMarkerItem=function(e,t){var o,n,i,r,l=this.getFromEnv("chart"),s=this.getChildren("mapAnnotations")[0],c=this.components.markerObjs,h=l.config.markerOpts,d={},g=c[e];if(g){for(n in o=g.config.options,Object(a.X)(o,t),this.imageLoadCount=0,i=g.config,t)d[n.toLowerCase()]=t[n]&&t[n].toString();i.fillColor=Object(a.Jb)(d.fillcolor,d.color,h.fillColor),i.fillAlpha=Object(a.Jb)(d.fillalpha,d.alpha,h.fillAlpha),i.fillRatio=Object(a.Jb)(d.fillratio,h.fillRatio),i.fillAngle=Object(a.Jb)(d.fillangle,h.fillAngle),i.borderThickness=Object(a.Lb)(d.borderthickness,h.borderThickness),i.borderColor=Object(a.Jb)(d.bordercolor,h.borderColor),i.borderAlpha=Object(a.Jb)(d.borderalpha,h.borderAlpha),i.labelPadding=d.labelpadding||h.labelPadding,i.options.tooltext=Object(a.Jb)(d.tooltext,h.tooltext),i.link=d.link,r=this._drawMarkerItem(g).markerShape,this._buildKdTree(),s.update(e,r)}},o.createContainer=function(){var e=this.getLinkedParent(),t=this.getFromEnv("animationManager"),o=e.getChildContainer("layer1");!this.getChildContainer("abovePlotGroup")&&this.addChildContainer("abovePlotGroup",t.setAnimation({el:"group",attr:{name:"abovePlotGroup",opacity:1},container:o,component:this,label:"group"})),!this.getChildContainer("belowPlotGroup")&&this.addChildContainer("belowPlotGroup",t.setAnimation({el:"group",attr:{name:"belowPlotGroup",opacity:1},container:o,component:this,label:"group"}))},o._removeMarkerItem=function(e){var t,o,n=this.components,i=n.markerObjs,r=i[e],a=n.kdArrayMap,l=this.getChildren("mapAnnotations")[0];r&&(t=r.markerShape,o=r.markerLabel,t&&l.destroy(t.getId()),o&&l.destroy(o.getId()),delete a[e],this._buildKdTree()),delete i[e]},o.getElement=function(e){if(this.components.kDTree)return this.components.kDTree.getNeighbour(e)},t}(xe),nt=function(e){e.configure&&e.configure()};Object(u.a)({name:"mapsAnimation",type:"animationRule",extension:se});var it=function(e){function t(){return e.apply(this,arguments)||this}i()(t,e);var o=t.prototype;return o.getType=function(){return"group"},o.getName=function(){return"mapGroup"},o.configure=function(){this._mapChildren(nt)},o.createContainer=function(){var e,t=this.getLinkedParent(),o=this.getFromEnv("animationManager"),n=t.getChildContainer();e=n.plotGroup,!this.getChildContainer("plotShadow")&&this.addChildContainer("plotShadow",o.setAnimation({el:"group",attr:{name:"manager-plot-shadow",opacity:1},container:e,component:this,label:"group"})),!this.getChildContainer("plot")&&this.addChildContainer("plot",o.setAnimation({el:"group",attr:{name:"manager-plot",opacity:1},container:e,component:this,label:"group"})),!this.getChildContainer("layer0")&&this.addChildContainer("layer0",o.setAnimation({el:"group",attr:{name:"ann-layer0",opacity:1},container:n.abovePlotGroup,component:this,label:"group"})),!this.getChildContainer("layer1")&&this.addChildContainer("layer1",o.setAnimation({el:"group",attr:{name:"ann-layer1",opacity:1},container:n.abovePlotGroup,component:this,label:"group"})),t.config.labelsOnTop?this.getChildContainer("layer0").toFront():this.getChildContainer("layer0").toBack()},o._transformGroup=function(){var e=this,t=this.getFromEnv("chart"),o=t.getFromEnv("chartInstance"),n=e.getFromEnv("animationManager"),i=t.jsonData,r=e.getChildContainer("plot"),l=e.getChildContainer("plotShadow"),s=t.config.scalingParams;r.hide(),l.hide(),t.config.entitiesReady=!1,o.addEventListener("internal.mapdrawingcomplete",(function(t){t.detachHandler(),a.tb&&(o.args.link&&o.args.clickedEntityBox&&i.chart.linkedcharttransition,r&&n.setAnimation({el:r,attr:{transform:s.transformStr},component:e,label:"group"}),l&&n.setAnimation({el:l,attr:{transform:s.transformStr},component:e,label:"group"})),r.show(),l.show()})),t.checkComplete()},o.draw=function(){this.createContainer(),this._transformGroup()},o.getDataLimits=function(e){var t,o=1/0,n=-1/0,i=0,r=function(e){n=Math.max(n,e.max),o=Math.min(o,e.min)};return this._mapChildren((function(o){o.getState("removed")||!1===o.getState("visible")?e&&(t=o.getDataLimits(e),r(t)):(i++,t=o.getDataLimits(e),r(t))})),i?this.setState("visible",!0):this.setState("visible",!1),this.config.range||(this.config.range={},this.config.range.min=this.config.dataMin,this.config.range.max=this.config.dataMax),{max:n,min:o}},t}(g.a),rt=function(e){var t,o=e.getFromEnv("dataSource"),n=o.data||{},i=o.markers;Object(a.P)(e,it,"mapGroup"),t=e.getChildren("mapGroup")[0],Object(a.U)(t,xe,"entities",1,[n]),i?Object(a.U)(t,ot,"markers",1,[i]):e.getDatasets()[1]&&e.getDatasets()[1].remove()},at=o(30),lt=function(e,t){return+e.minvalue==+t.minvalue?e.maxvalue-t.maxvalue:e.minvalue-t.minvalue},st=function(e,t,o){var n=e[0],i=e[1],r=e[2],l=n+(t[0]-n)*o,s=i+(t[1]-i)*o,c=r+(t[2]-r)*o;return{hex:(a.e+(l<<16|s<<8|c).toString(16)).slice(-6),rgb:[l,s,c]}},ct=function(e){function t(){var t;t=e.call(this)||this;var o=d()(t);return o.mapByCategory=!1,o.colorArr=[],o.noValidRange=!0,o.sortLegend=!1,t}i()(t,e);var o=t.prototype;return o.__setDefaultConfig=function(){e.prototype.__setDefaultConfig.call(this),this.config.defaultObj={code:"CCCCCC",alpha:"100"}},o.getType=function(){return"colorComponent"},o.getName=function(){return"colorBucket"},o.configure=function(e){if(e){var t,o,n,i,r,l,s,c,h,d,g,u=this.mapByCategory,b=e.numberFormatter,f=e.colorRange||{},p=Object(a.X)([],f.color),m=this.getLinkedParent(),v=Math.min(Math.max(Object(a.Lb)(this.getFromEnv("dataSource").chart.palette,0)-1,0),4),y=m.defaultPaletteOptions&&m.defaultPaletteOptions.paletteColors[v],C=Object(a.Lb)(b.getCleanValue(f.maxvalue),1/0),L=Object(a.Lb)(b.getCleanValue(f.minvalue),-1/0),O=this.colorArr;if(void 0!==e.mapByCategory&&(u=this.mapByCategory=!!Number(e.mapByCategory)),(p=u?p.filter((function(e){return e.code||e.color})):p.filter((function(e){return e.minvalue||e.maxvalue}))).forEach((function(e){e.minvalue&&e.maxvalue&&+e.maxvalue<+e.minvalue&&(c=e.maxvalue,e.maxvalue=e.minvalue,e.minvalue=c),e.minvalue?e.maxvalue?(d=b.getCleanValue(e.minvalue),h=b.getCleanValue(e.maxvalue),e.rangeLabel=b.dataLabels(d)+"-"+b.dataLabels(h)):(d=b.getCleanValue(e.minvalue),e.maxvalue=h=C,e.rangeLabel=h===1/0?">"+b.dataLabels(d):b.dataLabels(d)+"-"+b.dataLabels(h)):(e.minvalue=d=L,h=b.getCleanValue(e.maxvalue),e.rangeLabel=d===-1/0?"<"+b.dataLabels(h):b.dataLabels(d)+"-"+b.dataLabels(h))})),p.sort(lt),p&&(t=p.length)){for(O.length=0,o=0;o<t;o+=1)s=p[o],n=Object(a.Jb)(s.color,s.code,y&&y[o]),i=Object(a.Jb)(s.alpha),l=Object(a.Jb)(s.bordercolor),r=Object(a.Jb)(s.borderalpha,100),h=Object(a.Lb)(s.maxvalue),d=Object(a.Lb)(s.minvalue),g=Object(a.Jb)(s.label,s.displayvalue,s.rangeLabel),(n&&h>=d||u&&g)&&O.push({code:n,alpha:i||"100",oriAlpha:i,maxvalue:h,minvalue:d,label:Object(a.Ib)(g),labelId:g.toLowerCase(),bordercolor:l,borderAlpha:r,name:s.name});this.sortedColorArr=this.colorArr.slice(0)}else this.noValidRange=!0,this.colorArr=[],this.sortedColorArr=[]}},o.getColorObj=function(e){if(void 0===e)return{outOfRange:!0};var t,o,n=this.sortedColorArr,i=this.gradient?1:0,r=n[i],l=e;if(this.mapByCategory){for(l=Object(a.Ib)(l).toLowerCase()||l.toString().toLowerCase();r;){if(r.labelId===l||r.maxvalue>=l&&r.minvalue<=l)return{code:r.code,alpha:r.alpha||"100",oriAlpha:r.oriAlpha,seriesIndex:i,legendItemId:r.legendItemId};r=n[i+=1]}return{outOfRange:!0}}if(this.gradient){if(this.scaleMin<=l&&this.scaleMax>=l){for(;r&&r.maxvalue<l;)r=n[i+=1];return o=(l-r.minvalue)/r.range,{code:st(n[i-1].codeRGB,r.codeRGB,o).hex}}return{outOfRange:!0}}for(;r;){if(l<r.minvalue&&!t)return 0===i?{code:r.code,alpha:r.alpha||"100",oriAlpha:r.oriAlpha,seriesIndex:i,name:r.name,label:r.label,outOfRange:!0,bordercolor:r.bordercolor,borderalpha:r.borderAlpha}:{code:n[i-1].code,alpha:n[i-1].alpha||"100",oriAlpha:n[i-1].oriAlpha,seriesIndex:i,name:n[i-1].name,label:n[i-1].label,outOfRange:!0,bordercolor:n[i-1].bordercolor,borderalpha:n[i-1].borderAlpha};if(l>r.maxvalue&&i===n.length-1)return{code:r.code,alpha:r.alpha||"100",oriAlpha:r.oriAlpha,seriesIndex:i,name:r.name,label:r.label,outOfRange:!0,bordercolor:r.bordercolor,borderalpha:r.borderAlpha};if(r.maxvalue>l&&r.minvalue<=l)return{code:r.code,alpha:r.alpha||"100",oriAlpha:r.oriAlpha,seriesIndex:i,name:r.name,label:r.label,bordercolor:r.bordercolor,borderalpha:r.borderAlpha};if(l===r.maxvalue&&(t={code:r.code,alpha:r.alpha||"100",oriAlpha:r.oriAlpha,seriesIndex:i,name:r.name,label:r.label,bordercolor:r.bordercolor,borderalpha:r.borderAlpha}),i===n.length-1&&t)return t;r=n[i+=1]}return n.length?void 0:{outOfRange:!0}},o.getColorRangeArr=function(e,t){var o,n,i,r,l,s,c,h,d=[],g=e,u=t;if(!this.defaultAsigned&&(g>u&&(o=g,g=u,u=o),g<u&&(r=this.getColorObj(g),s=this.getColorObj(u),r&&s))){for(l=g,n=r.seriesIndex,i=s.seriesIndex;n<=i;n+=1)(c=Object(a.X)({},this.colorArr[n])).minvalue!==l&&(c.minvalue=l),d.push(c),h=c,l=c.maxvalue;h&&(h.maxvalue=u)}return d},t}(g.a),ht=function(e){function t(){var t;return(t=e.call(this)||this).colorRange={},t.valueRatio={},t.data={},t.mapByPercent=a.F,t}i()(t,e);var o=t.prototype;return o.getType=function(){return"colorComponent"},o.getName=function(){return"gradientColorRange"},o.configure=function(e){if(e){var t,o,n;for(this.data=e,this.appender=a.b,n=this.colorRange=e.colorRange.sort((function(e,t){return e.value-t.value})),this.valueRatio=a.F,this.values=[],t=0,o=n.length;t<o;t++)this.values.push(n[t].value)}},o.getValueRatio=function(){var e,t,o=this.colorRange,n=o.length,i=this.valueRatio,r=o[n-1].value,a=o[0].value,l=r-a,s=0;if(i)return i;for(i=this.valueRatio=[],e=0;e<n;e++)t=(o[e].value-a)/l,i.push(100*(t-s)),s=t;return i},o.getCumulativeValueRatio=function(){var e,t,o=this.colorRange,n=o.length,i=o[0].value,r=o[n-1].value,a=[];for(t=0;t<n;t++)e=o[t],a.push((e.value-i)/(r-i)*100);return a},o.getBoxFill=function(e){var t,o,n,i=this.colorRange,r=i.length,l=[];for(n=e?90:0,o=0;o<r;o++)t=i[o],l.push(t.code);return Object(a.Xb)({FCcolor:{alpha:"100,100,100",angle:n,color:l.join(","),ratio:this.getValueRatio().join(",")}})},o.getColorByValue=function(e){var t,o,n,i,r=this.values,l=this.colorRange;if(e!==a.F&&null!==e){for(o=0,t=r.length;o<t;o++){if(e===r[o]){i=l[o].code;break}if(!o&&e<r[o]){n=!0;break}if(o===t-1&&e>r[o]){n=!0;break}if(e>r[o]&&e<r[o+1]){s=l[o],c=l[o+1],h=e,d=void 0,g=void 0,u=void 0,b=void 0,g=s.value,u=Object(a.k)(s.code),b=Object(a.k)(c.code),d=c.value-g,i=Object(a.y)([Math.round(u[0]+(b[0]-u[0])/d*(h-g)),Math.round(u[1]+(b[1]-u[1])/d*(h-g)),Math.round(u[2]+(b[2]-u[2])/d*(h-g))]);break}}var s,c,h,d,g,u,b;if(!n)return i}},o.getLabelByValue=function(e){var t,o,n,i,r=this.values,l=this.colorRange;if(e!==a.F&&null!==e){for(o=0,t=r.length;o<t;o++){if(e===r[o]){i=l[o].label;break}if(!o&&e<r[o]){n=!0;break}if(o===t-1&&e>r[o]){n=!0;break}if(e>r[o]&&e<r[o+1]){i=l[o].label;break}}if(!n)return i}},t}(g.a);function dt(e){var t=e||ft;return Object(a.rb)(t)||ft}var gt,ut,bt="rgba(192,192,192,"+(a.zb?.002:1e-6)+")",ft="#000000",pt=((ut={}).legendCarpetConf={spreadFactor:.85,allowDrag:!1,captionAlignment:"center",padding:{v:3,h:3},style:{fill:"#e4d9c1",stroke:"#c4b89d"}},ut.legendCaptionConf={spreadFactor:.2,padding:{v:2,h:2},style:{fill:"#786B50",fontFamily:"sans-serif",fontSize:"12px",fontWeight:"bold",fontStyle:"normal"},bound:{style:{stroke:"none"}}},ut.legendBodyConf={spreadFactor:.8,padding:{v:2,h:2},bound:{style:{stroke:"none"}}},ut.legendAxisConf={legendAxisHeight:11,spreadFactor:.4,padding:{v:1,h:1},style:{stroke:"none","stroke-opacity":0,"stroke-width":1},line:{grooveLength:3,offset:8,style:{stroke:"rgba(255, 255, 255, 0.65)","stroke-width":1.5}},shadow:{style:{stroke:"none",fill:Object(a.Xb)({FCcolor:{alpha:"25,0,0",angle:360,color:"000000,FFFFFF,FFFFFF",ratio:"0,30,40"}})}},bound:{style:{stroke:"none"}}},ut.sliderGroupConf={showTooltip:1,outerCircle:{rFactor:1.4,style:{fill:bt,stroke:"#757575","stroke-width":3}},innerCircle:{rFactor:.65,style:{fill:bt,stroke:"#FFFFFF"}}},ut.axisTextItemConf={spreadFactor:.3,padding:{v:1,h:1},style:{fill:"#786B50",fontFamily:"sans-serif",fontSize:"12px",fontWeight:"normal",fontStyle:"normal"}},{init:function(e){gt=e.chart},legacyDataParser:function(e,t){var o,n,i,r,l,s,c,h,d,g,u,b,f,p={},m=gt.getFromEnv("number-formatter"),v=gt.getFromEnv("dataSource"),y=v.data,C=t||{};if(!e)return!1;for("maps"!==gt.defaultDatasetType||void 0!==C.min&&void 0!==C.max?"HeatMap"!==gt.getName()||void 0!==C.min&&void 0!==C.max||(C={min:1/0,max:-1/0},v.dataset.forEach((function(e){e.data&&e.data.forEach((function(e){C.min=Math.min(C.min,Object(a.Lb)(e.value,C.min)),C.max=Math.max(C.max,Object(a.Lb)(e.value,C.max))}))}))):(C={min:1/0,max:-1/0},y&&y.forEach((function(e){C.min=Math.min(C.min,Object(a.Lb)(e.value,C.min)),C.max=Math.max(C.max,Object(a.Lb)(e.value,C.min))}))),p.mapByPercent=u=!!Object(a.Lb)(e.mapbypercent,0),o=e.color||[],void 0===e.minvalue&&(e.minvalue=void 0!==C.min?u?0:C.min:0),void 0===e.maxvalue&&(e.maxvalue=void 0!==C.max?u?100:C.max:100),e.maxvalue!==e.minvalue&&C.min!==1/0&&C.max!==-1/0||(e.minvalue=0,e.maxvalue=100),b=!1,l=0,c=o.length;l<c;l++)if(o[l].maxvalue){b=!0;break}for(b||(o=[]),i=e.code,h=p.colorRange=[],p.gradient=!!Object(a.Lb)(e.gradient,1),o.length?i=dt(i):(i?(r=dt(i),i=dt()):(i=dt(),f=i,r=Object(a.jb)(f,1)),o.push({code:r,maxvalue:e.maxvalue,label:void 0})),function(e){var t,o,n,i=gt.getFromEnv("number-formatter");for(t=0,o=e.length;t<o;t++)(n=e[t].maxvalue)&&(e[t].maxvalue=i.getCleanValue(n))}(o),o=o.sort((function(e,t){return e.maxvalue-t.maxvalue})),d=g=e.minvalue&&m.getCleanValue(e.minvalue),g=(void 0!==d||null!==d)&&(u?d+"%":m.legendValue(d)),h.push({code:Object(a.V)(i),value:d,displayValue:g,label:e.startlabel}),l=0,c=o.length;l<c;l++)s=dt((n=o[l]).code||n.color),d=g=n.maxvalue,isNaN(parseInt(d,10))||(g=(void 0!==d||null!==d)&&(u?d+"%":m.legendValue(d)),h.push({code:Object(a.V)(s),value:d,displayValue:g,label:n.label||n.displayvalue}));return h[h.length-1].label=e.endlabel||n.label,p},getDefaultConf:function(e){return ut[e]}}),mt=function(e){function t(){var t;return(t=e.call(this)||this).datasource={},t.config.legendItemIds=[],t}i()(t,e);var o=t.prototype;return o.configure=function(){var e,t,o=this.getFromEnv("chart"),n=this.getFromEnv("dataSource").chart.mapbycategory,i=o.config.showLegend,r=o.getChildren("colorRange")&&o.getChildren("colorRange")[0];switch(o.addToEnv("colorManager",this),this.datasource=o.getFromEnv("dataSource"),e=this.datasource.colorrange,r&&r.remove({instant:!0}),i||(this.config.legendItemIds=[]),"maps"===o.defaultDatasetType?e.gradient&&Number(e.gradient)?"gradient":e.color?"icon":"none":"TreeMap"===o.getName()?"gradient":e.gradient&&"0"!==e.gradient&&!Number(n)?"gradient":"icon"){case"gradient":pt.init({chart:o}),t=pt.legacyDataParser(e),Object(a.P)(o,ht,"colorRange",1,[t]),r=o.getChildren("colorRange")[0],o.addToEnv("colorRange",r),t||(r._dontPlot=!0),this.config.legendItemIds=[],this._configureGradientLegend(r);break;case"icon":Object(a.P)(o,ct,"colorRange",1,[{colorRange:e,sortLegend:0,mapByCategory:Object(a.Lb)(n,0),defaultColor:"cccccc",numberFormatter:o.getFromEnv("number-formatter")}]),o.addToEnv("colorRange",o.getChildren("colorRange")[0]),i&&this._addLegendItems();break;case"none":o.deleteFromEnv("colorManager"),this.config.legendItemIds=[]}},o._configureGradientLegend=function(e){var t=this,o=t.getFromEnv("chart").getFromEnv("gLegend");o&&(o.setColorRange(e),t.addExtEventListener("rangeUpdated",(function(e,o){t.fireEvent("legendUpdate",{"original-event":e,maxMinArray:o,component:"gradientlegend"})}),o))},o._addLegendItems=function(){var e,t,o,n,i,r=this.config,l=this.getFromEnv("chart"),s=l.getChildren("legend")[0],c=l.getFromEnv("colorRange").colorArr,h=c.length;for(n=0;n<h;n++)i={label:Object(a.Jb)(c[n].label,c[n].displayvalue),datasetObj:c[n],index:n},t=Object(a.jb)(c[n].code,40),e={FCcolor:{color:c[n].code+","+c[n].code+","+t,ratio:"0,70,30",angle:270,alpha:"100,100,100"}},(o=s.getItem(r.legendItemIds[n]))||(r.legendItemIds.push(s.createItem(this)),(o=s.getItem(r.legendItemIds[n])).addEventListener("fc-click",o.itemClickFn)),o.removeLegendState("hidden"),c[n].legendItemId=o&&o.getId(),o.configure(i),o.setStateCosmetics("default",{symbol:{fill:Object(a.Xb)(e),rawFillColor:c[n].code}});for(n=h;n<r.legendItemIds.length;n++)s.disposeItem(r.legendItemIds[n]);r.legendItemIds.splice(h)},o.legendInteractivity=function(e){var t=this.getFromEnv("colorRange").colorArr[e.config.index];this.fireEvent("legendUpdate",{legendItem:e,colorObj:t,component:"legend"})},o.getColor=function(e){return!Number(this.datasource.chart.mapbycategory)&&Number(this.datasource.colorrange.gradient)?{code:this.getColorByValue(e),label:this.getLabelByValue(e)}:this.getColorObj(e)},o.getValueRatio=function(){return this.getFromEnv("colorRange").getValueRatio()},o.getCumulativeValueRatio=function(){return this.getFromEnv("colorRange").getCumulativeValueRatio()},o.getBoxFill=function(e){return this.getFromEnv("colorRange").getBoxFill(e)},o.getColorByValue=function(e){return this.getFromEnv("colorRange").getColorByValue(e)},o.getColorObj=function(e){return this.getFromEnv("colorRange").getColorObj(e)},o.getLabelByValue=function(e){return this.getFromEnv("colorRange").getLabelByValue(e)},t}(g.a);var vt,yt,Ct=function(e){!function(e){var t=e.getChildren("colorManager");e.getFromEnv("dataSource").colorrange?t?(e.addToEnv("colorManager",t[0]),t[0].configure()):(t=new mt,e.attachChild(t,"colorManager"),e.addToEnv("colorManager",t),t.configure()):(t&&(t[0].config.legendItemIds=[]),e.deleteFromEnv("colorManager"))}(e)},Lt={},Ot="rgba(192,192,192,"+(a.zb?.002:1e-6)+")",xt={}.hasOwnProperty;function kt(e,t){return function e(t,o){var n,i;for(i in t)xt.call(t,i)&&(n=t[i],void 0===o[i]?o[i]=n:"object"==typeof n&&null!==n&&e(n,o[i]))}(e,t),t}function wt(e){var t=e||"#000000";return Object(a.rb)(t)||"#000000"}function jt(e){var t,o=e.fontSize+"";return o?(t=o.replace(/(\d+)(px)*/,"$1px"),e.fontSize=t,e):e}function Ft(e){return!(void 0!==e&&null!=e&&!isNaN(e))}Lt.CAPTION="CAPTION",Lt.LEGEND_BODY="LEGEND_BODY",Lt.AXIS_LABEL="LEGEND_LABEL",Lt.LEGEND_AXIS="LEGEND_AXIS",Lt.RANGE="RANGE",Lt.AXIS_VALUE="AXIS_VALUE",vt=function(){var e,t={};return t.legendCarpetConf={spreadFactor:.85,allowDrag:!1,captionAlignment:"center",padding:{v:3,h:3},style:{fill:"#e4d9c1",stroke:"#c4b89d"}},t.legendCaptionConf={spreadFactor:.2,padding:{v:2,h:2},style:{fill:"#786B50",fontFamily:"sans-serif",fontSize:"12px",fontWeight:"bold",fontStyle:"normal"},bound:{style:{stroke:"none"}}},t.legendBodyConf={spreadFactor:.8,padding:{v:2,h:2},bound:{style:{stroke:"none"}}},t.legendAxisConf={legendAxisHeight:11,spreadFactor:.4,padding:{v:1,h:1},style:{stroke:"none","stroke-opacity":0,"stroke-width":1},line:{grooveLength:3,offset:8,style:{stroke:"rgba(255, 255, 255, 0.65)","stroke-width":1.5}},shadow:{style:{stroke:"none",fill:Object(a.Xb)({FCcolor:{alpha:"25,0,0",angle:360,color:"000000,FFFFFF,FFFFFF",ratio:"0,30,40"}})}},bound:{style:{stroke:"none"}}},t.sliderGroupConf={showTooltip:1,outerCircle:{rFactor:1.4,style:{fill:Ot,stroke:"#757575","stroke-width":3}},innerCircle:{rFactor:.65,style:{fill:Ot,stroke:"#FFFFFF"}}},t.axisTextItemConf={spreadFactor:.3,padding:{v:1,h:1},style:{fill:"#786B50",fontFamily:"sans-serif",fontSize:"12px",fontWeight:"normal",fontStyle:"normal"}},{init:function(t){e=t.chart},legacyDataParser:function(t,o){var n,i,r,l,s,c,h,d,g,u,b,f,p,m={},v=e.getFromEnv("number-formatter");if(!t)return!1;for(m.mapByPercent=b=!!Object(a.Lb)(t.mapbypercent,0),n=t.color||[],void 0===t.minvalue&&(t.minvalue=void 0!==o.min?b?0:o.min:0),void 0===t.maxvalue&&(t.maxvalue=void 0!==o.max?b?100:o.max:100),f=!1,s=0,h=n.length;s<h;s++)if(n[s].maxvalue){f=!0;break}for(f||(n=[]),r=t.code,d=m.colorRange=[],m.gradient=!!Object(a.Lb)(t.gradient,1),n.length?r=wt(r):(r?(l=wt(r),r=wt()):(r=wt(),p=r,l=Object(a.jb)(p,1)),n.push({code:l,maxvalue:t.maxvalue,label:void 0})),function(t){var o,n,i,r=e.getFromEnv("number-formatter");for(o=0,n=t.length;o<n;o++)(i=t[o].maxvalue)&&(t[o].maxvalue=r.getCleanValue(i))}(n),n=n.sort((function(e,t){return e.maxvalue-t.maxvalue})),g=u=t.minvalue&&v.getCleanValue(t.minvalue),u=(void 0!==g||null!==g)&&(b?g+"%":v.legendValue(g)),d.push({code:Object(a.V)(r),value:g,displayValue:u,label:t.startlabel}),s=0,h=n.length;s<h;s++)c=wt((i=n[s]).code||i.color),g=u=i.maxvalue,isNaN(parseInt(g,10))||(u=(void 0!==g||null!==g)&&(b?g+"%":v.legendValue(g)),d.push({code:Object(a.V)(c),value:g,displayValue:u,label:i.label||i.displayvalue}));return d[d.length-1].label=t.endlabel||i.label,m},getDefaultConf:function(e){return t[e]}}}();var St=function(e){i()(o,e);var t=o.prototype;function o(){var t;return t=e.call(this)||this,yt=d()(t),t.enabled=!1,t.drawOptions={},t.components={},t}return t.getType=function(){return"gradientLegend"},t.getName=function(){return"gLegend"},t.setColorRange=function(e){var t=this.drawOptions.colorRange=e;t&&t._preparationGoneWrong&&(this._dontPlot=!0)},t.configureAttributes=function(){var e,t,o,n,i,r,l,s,c,h,d=this.getFromEnv("chart"),g=this.getFromEnv("dataSource").chart,u=this.conf={},b=g.outcnvbasefont,f=g.outcnvbasefontsize,p=g.outcnvbasefontcolor,m=d.config.dataLabelStyle;vt.init({chart:d}),this.data=this.getFromEnv("dataSource").colorrange,this._dontPlot||(this.drawOptions={smartLabel:this.getFromEnv("smartLabel"),gLegend:this},this._dontPlot=!1,this._recalculateLogicalSpace=!0,u.caption=Object(a.Jb)(g.legendcaption),u.legendPosition=Object(a.Jb)(g.legendposition,"bottom").toLowerCase(),u.showLegend=Object(a.Lb)(g.showlegend,1),u.interactiveLegend=Object(a.Lb)(g.interactivelegend,1),u.showLegendLabels=Object(a.Lb)(g.showlegendlabels,1),e=g.legenditemfontcolor||p,t=g.legenditemfont||b,o=g.legenditemfontsize||f,n=Object(a.Lb)(g.legenditemfontbold,0),i=g.legendcaptionfontcolor||p,r=g.legendcaptionfont||b,l=g.legendcaptionfontsize||f,s=Object(a.Lb)(g.legendcaptionfontbold,1),h=(c=g.legendaxisbordercolor?Object(a.vb)(Object(a.V)(g.legendaxisbordercolor)):void 0)?Object(a.Lb)(g.legendaxisborderalpha,100)/100:void 0,u.axisTextItemConf={style:{fill:e?Object(a.R)(Object(a.Jb)(e)):m.color,fontFamily:t?Object(a.Jb)(t):m.fontFamily,fontSize:o?Object(a.Lb)(o):m.fontSize.match(/\d+/)[0],fontWeight:n?"bold":m.fontWeight}},u.legendCaptionConf={style:{fill:i?Object(a.R)(Object(a.Jb)(i)):m.color,fontFamily:r?Object(a.Jb)(r):m.fontFamily,fontSize:l?Object(a.Lb)(l):m.fontSize.match(/\d+/)[0],fontWeight:s?"bold":m.fontWeight,fontStyle:"normal"}},u.legendAxisConf={legendAxisHeight:11,style:{stroke:c,"stroke-opacity":h},line:{style:{stroke:Object(a.R)(Object(a.Jb)(g.legendscalelinecolor,"FFF8E9"),Object(a.Lb)(g.legendscalelinealpha,100)),"stroke-width":Object(a.Lb)(g.legendscalelinethickness)}}},u.sliderGroupConf={showTooltip:Object(a.Lb)(g.showtooltip,1),outerCircle:{rFactor:Object(a.Lb)(g.sliderdiameterfactor),style:{stroke:Object(a.R)(Object(a.Jb)(g.legendpointerbordercolor,"757575"),Object(a.Lb)(g.legendpointerborderalpha,100))}},innerCircle:{rFactor:Object(a.Lb)(g.sliderholediameterfactor),style:{stroke:Object(a.R)(Object(a.Jb)(g.legendpointercolor,"FFFFFF"),Object(a.Lb)(g.legendpointeralpha,100))}}},u.legendCarpetConf={spreadFactor:Object(a.Lb)(g.legendspreadfactor),allowDrag:!!Object(a.Lb)(g.legendallowdrag,0),captionAlignment:Object(a.Jb)(g.legendcaptionalignment,"center"),style:{fill:Object(a.R)(Object(a.Jb)(g.legendbgcolor,"e4d9c1"),Object(a.Lb)(g.legendbgalpha,100)),stroke:Object(a.R)(Object(a.Jb)(g.legendbordercolor,"c4b89d"),Object(a.Lb)(g.legendborderalpha,100)),"stroke-width":Object(a.Lb)(g.legendborderthickness,1)}})},t.postConfigureInit=function(){var e,t,o,n,i,r,a,l,s,c,h,d=this.conf;this.elem={},d.interactiveLegend?(n=kt(vt.getDefaultConf("sliderGroupConf"),d.sliderGroupConf),this.sGroup?((o=this.elem.sGroup=this.sGroup).configure(n),this.elem.sGroup.gLegend=this):(this.sGroup=this.elem.sGroup=o=new Bt(n),o.configure(n),this.elem.sGroup.gLegend=this)):(this.sGroup&&this.sGroup.dispose(),this.sGroup&&delete this.sGroup),(n=kt(vt.getDefaultConf("legendCarpetConf"),d.legendCarpetConf)).legendPosition=d.legendPosition,h=vt.getDefaultConf("legendBodyConf"),"bottom"===d.legendPosition?(this.drawOptions.refSideKey="canvasWidth",this.drawOptions.refOffsetKey="canvasLeft",i=kt(vt.getDefaultConf("axisTextItemConf"),d.axisTextItemConf),h.legendPosition="bottom",(c=kt(vt.getDefaultConf("legendAxisConf"),d.legendAxisConf)).legendPosition="bottom",i.legendPosition="bottom"):(this.drawOptions.refSideKey="canvasHeight",this.drawOptions.refOffsetKey="canvasTop",i=kt(vt.getDefaultConf("axisTextItemConf"),d.axisTextItemConf),h.legendPosition="right",(c=kt(vt.getDefaultConf("legendAxisConf"),d.legendAxisConf)).legendPosition="right",i.legendPosition="right"),Object.keys(this.components).length||(this.components.LegendCarpet=new Et,this.components.LegendBody=new It,this.components.LegendAxis=new Tt,this.components.LegendValues=new Rt,d.showLegendLabels&&(this.components.LegendLabels=new Pt)),t=this.components.LegendAxis,l=this.components.LegendValues,e=this.components.LegendCarpet,r=this.components.LegendBody,d.showLegendLabels&&(a=this.components.LegendLabels),this.components.LegendCarpet.configure(n),this.components.LegendValues.configure(i),this.components.LegendAxis.configure(c),this.components.LegendBody.configure(this.drawOptions.colorRange,h,i),d.showLegendLabels&&a.configure(i),d.caption?(s=kt(vt.getDefaultConf("legendCaptionConf"),d.legendCaptionConf),this.componentCaption&&Object.keys(this.componentCaption).length?this.componentCaption.configure(d.caption,s):(this.componentCaption=new _t).configure(d.caption,s),e.addCompositions(this.componentCaption,Lt.CAPTION)):(e.removeCompositions(Lt.CAPTION),this.componentCaption&&this.componentCaption.dispose(),delete this.componentCaption),o&&t.addCompositions(o,Lt.RANGE),a&&r.addCompositions(a,Lt.AXIS_LABEL),r.addCompositions(t,Lt.LEGEND_AXIS),r.addCompositions(l,Lt.AXIS_VALUE),e.addCompositions(r,Lt.LEGEND_BODY),this.elem.gl=new At(e)},t.getValueRange=function(){var e,t,o=this.elem&&this.elem.sGroup,n=o.sliders,i=o.extremes;return e=n.false.currPos,t=i[1]-i[0]+n.true.currPos,[{min:o.getValueFormPixel(e),max:o.getValueFormPixel(t)}]},t._dispose=function(){this.elem&&this.elem.gl&&this.elem.gl.dispose(),this.elem={},e.prototype._dispose.call(this)},t.getCalculatedLogicalSpace=function(){return this._logicalArea},t.setCalculatedLogicalSpace=function(e){this._logicalArea=e},t.getLogicalSpace=function(e){var t,o,n,i=this.conf,r={height:0,width:0},a=this.drawOptions,l=this.getFromEnv("chartConfig");return this._recalculateLogicalSpace?this._dontPlot?r:(this._recalculateLogicalSpace=!1,this.postConfigureInit(),i.showLegend?(o=a.refSideKey,n=a.refOffsetKey,this.drawOptions.refSide=l[o],this.drawOptions.refOffset=l[n],this.drawOptions.maxOtherSide=e||this.drawOptions.maxOtherSide,this.elem.gl&&(t=this.elem.gl.getLogicalSpace(this.drawOptions,!0),this.elem.gl&&this.setCalculatedLogicalSpace(t)),this.getCalculatedLogicalSpace()):r):(o=a.refSideKey,n=a.refOffsetKey,this.drawOptions.refSide=l[o],this.drawOptions.refOffset=l[n],this.drawOptions.maxOtherSide=e||this.drawOptions.maxOtherSide,t=this.elem.gl.getLogicalSpace(this.drawOptions,!0),this.setCalculatedLogicalSpace(t),this.getCalculatedLogicalSpace()||r)},t.resetLegend=function(){var e;(e=this.elem&&this.elem.sGroup)&&e.reset()},t.allocatePosition=function(){var e,t,o,n,i,r,a=this.getFromEnv("chart"),l=a.config,s=this.conf||{},c=s.legendPosition,h=l.canvasLeft,d=l.canvasTop,g=l.canvasWidth,u=l.canvasHeight,b=l.marginBottom,f=l.marginRight;a.config.gLegendEnabled&&(e=this.getCalculatedLogicalSpace(),o=s.width=e.width,n=s.height=e.height,"bottom"===c?(i=h+((t=g-o)<0?0:t/2),r=l.height-e.height-b-(l.actionBarHeight||0)):(r=d+((t=u-n)<0?0:t/2),i=l.width-e.width-f),s.xPos=i,s.yPos=r)},t.draw=function(){var e=this.getFromEnv("chart"),t=e.getFromEnv("dataSource").colorrange,o=this.conf||{},n=e.hasGradientLegend;e.config.gLegendEnabled&&t&&n&&this.drawLegendComponent(o.xPos,o.yPos,{parentGroup:e.getContainer("parentgroup"),animationManager:e.getFromEnv("animationManager")})},t.drawLegendComponent=function(e,t,o){var n,i=this.conf;this._dontPlot||(i.showLegend?(this.drawOptions.animationManager=o.animationManager,this.drawOptions.parentGroup=o.parentGroup,this.drawOptions.x=e,this.drawOptions.y=t,this.drawOptions.maxOtherSide=this.drawOptions.maxOtherSide||o.maxOtherSide,n=this.elem.gl.draw(this.drawOptions).getBBox(),i.xPos=n.x,i.yPos=n.y,i.height=n.height,i.width=n.width,this.enabled=!0):this.enabled=!1)},o}(g.a),At=function(){function e(e){this.carpet=e}var t=e.prototype;return t.draw=function(e){return this.carpet.draw(e)},t.getLogicalSpace=function(e,t){return this.carpet.getLogicalSpace(e,t)},t.dispose=function(){this.carpet&&this.carpet.group&&this.carpet.group.remove()},e}(),Et=function(){function e(e){this.conf=e,this._id="GL_CARPET",this.compositionsByCategory={},this.node=void 0,this.group=void 0,this._lSpace=void 0,this.autoRecalculate=!1,this.groupName="fc-gradient-legend",this.moveInstructions={}}var t=e.prototype;return t.configure=function(e){this.conf=e},t.getName=function(){return"LegendCarpet"},t.getType=function(){return"legend"},t.addCompositions=function(e,t){this.compositionsByCategory[t]=e},t.removeCompositions=function(e){delete this.compositionsByCategory[e]},t.getBoundingBox=function(e){var t,o,n=this.conf,i=n.spreadFactor,r=e.refSide,a=e.alignment,l=e.refOffset,s=e.x,c=e.y;return"bottom"===this.conf.legendPosition?(t=n.width=r*i,o=e.maxOtherSide,a&&null==s&&(s=(l+r)/2-t/2)):(o=n.height=r*i,t=e.maxOtherSide,a&&null==c&&(c=(l+r)/2-o/2)),{width:t,height:o,x:s,y:c}},t.getPostCalcDecisionsH=function(e,t){var o,n=this.conf.padding,i=0;for(o in this.moveInstructions={},t)i+=t[o].height||0;e.height=i+2*n.v},t.getLogicalSpace=function(e,t){var o,n,i,r,a,l=this._lSpace,s=["CAPTION","LEGEND_BODY"],c=this.conf.padding,h=this.compositionsByCategory,d=0,g={},u=0;if(l&&!t)return l.isImpure=!0,l;(Ft((l=this._lSpace=n=this.getBoundingBox(e)).x)||Ft(l.y)||Ft(l.height)||Ft(l.width))&&(this.autoRecalculate=!0),(i=kt(n,{})).height-=2*c.v,i.width-=2*c.h,i.x+=c.h,i.y+=c.v;for(var b=0;b<s.length;b++)(o=h[s[b]])&&((a=kt(i,{})).y+=d,d=i.height*o.conf.spreadFactor,a.height=d+u,r=o.getLogicalSpace(kt(a,{}),e,t),u=a.height-r.height,g[s[b]]=r,d=r.height);return this.getPostCalcDecisions(n,g),this._lSpace=n,n},t.setupDragging=function(){var e=this.group,t=0,o=0,n=0,i=0;e.css({cursor:"move"}),e.drag((function(r,a){t=r,o=a,e.attr({transform:"t"+(n+t)+","+(i+o)})}),(function(){n+=t,i+=o}),a.Vb)},t.draw=function(e){var t,o,n,i=this.conf,r=["CAPTION","LEGEND_BODY"],a=this.compositionsByCategory,l=e.animationManager,s=e.parentGroup;this.getLogicalSpace(e,this.autoRecalculate),n=this._lSpace,this.group=t=l.setAnimation({el:this.group||"group",attr:{name:this.groupName},component:yt,container:s,label:"carpetGroup"}),this.node=l.setAnimation({el:this.node||"rect",attr:n,css:i.style,component:yt,container:t,label:"rect"});for(var c=0;c<r.length;c++)(o=a[r[c]])&&o.draw(i.captionAlignment,n,{animationManager:l,colorRange:e.colorRange,numberFormatter:e.numberFormatter,parentLayer:t,smartLabel:e.smartLabel,moveInstructions:this.moveInstructions[void 0],gLegend:e.gLegend});return i.allowDrag&&this.setupDragging(),this.node},t.getPostCalcDecisions=function(e,t){return"bottom"===this.conf.legendPosition?this.getPostCalcDecisionsH(e,t):this.getPostCalcDecisionsV(e,t)},t.getPostCalcDecisionsV=function(e,t){var o,n,i,r=this.conf.padding,a=Number.NEGATIVE_INFINITY,l=this.moveInstructions;for(n in this.getPostCalcDecisionsH(e,t),t)a=a<(o=t[n].width)?o:a;for(n in e.width=a+2*r.h,t)(i=a-(o=t[n].width))&&(l[n]="t"+i/2+",0")},e}(),_t=function(){function e(e,t){this.rawText=e,this.conf=t,this._id="GL_CAPTION",this.node=void 0,this.bound=void 0,this._lSpace=void 0,this.LegendCaption={},this.LegendCaption.LEFT={x:function(e,t){return t.x+e.width/2+2}},this.LegendCaption.RIGHT={x:function(e,t){return t.x+t.width-e.width/2-2}},this.LegendCaption.CENTER={x:function(){var e=arguments[1];return e.x+e.width/2}}}var t=e.prototype;return t.configure=function(e,t){this.rawText=e,this.conf=t},t.getName=function(){return"LegendCaption"},t.getType=function(){return"caption"},t.getLogicalSpace=function(e,t,o){var n,i,r,a,l=this.conf.padding,s=this._lSpace,c=this.rawText,h=t.gLegend.getFromEnv("chartConfig");return s&&!o?(s.isImpure=!0,s):(s=this._lSpace={bound:{height:0,width:0},node:{logicArea:void 0,smartText:void 0}},n=t.smartLabel,c?((i=kt(e,{})).height-=2*l.v,i.width-=2*l.h,i.x+=l.h,i.y+=l.v,n.useEllipsesOnOverflow(h.useEllipsesWhenOverflow),jt(a=kt(this.conf.style,{})),n.setStyle(this._metaStyle=a),r=n.getSmartText(c,i.width,i.height),i.height=r.height,i.width=r.width,e.height=r.height+2*l.v,e.width=r.width+2*l.h,s.node.smartText=r,s.node.logicArea=i,s.bound=e,e):s.bound)},t.draw=function(){var e,t,o,n,i,r,a,l,s,c,h,d=this.conf,g=d.bound||{};return arguments.length>=3?(a=arguments[0],l=arguments[1],s=arguments[2]):arguments.length>=2&&(a=arguments[0],s=arguments[1]),e=s.parentLayer,h=s.animationManager,this.group=t=h.setAnimation({el:this.group||"group",attr:{name:"legend-caption"},css:d.style,component:yt,container:e}),this.getLogicalSpace(l,s),c=(i=this._lSpace).node,n=i.bound,this.bound=o=h.setAnimation({el:this.bound||"rect",attr:n,css:g.style,container:t,component:yt}),r="string"==typeof a?this.LegendCaption[a.toUpperCase()].x(c.smartText,l||c.logicArea):a,this.node=h.setAnimation({el:this.node||"text",attr:{text:c.smartText.text,x:r,y:c.logicArea.y+c.smartText.height/2,lineHeight:this._metaStyle.lineHeight,fill:d.style.fill},container:t,component:yt}),{group:t,bound:o,node:this.node}},t.dispose=function(){this.group.remove(),this.bound.remove(),this.node.remove()},e}(),It=function(){function e(e,t,o){this.colorRange=e,this.conf=t,this.childTextConf=o,this._id="GL_BODY",this.bound=void 0,this.group=void 0,this.compositionsByCategory={},this._lSpace=void 0,this.SC_STACK=[Lt.AXIS_LABEL,Lt.LEGEND_AXIS,Lt.AXIS_VALUE],this.DARW_STACK=[Lt.AXIS_VALUE,Lt.LEGEND_AXIS,Lt.AXIS_LABEL]}var t=e.prototype;return t.configure=function(e,t,o){this.colorRange=e,this.conf=t,this.childTextConf=o,this.compositionsByCategory={}},t.getName=function(){return"LegendBody"},t.getType=function(){return"legend"},t.addCompositions=function(e,t){this.compositionsByCategory[t]=e},t.getSpaceTaken=function(e){return"bottom"===this.conf.legendPosition?e.height:e.width},t.getLogicalSpace=function(e,t,o){var n,i,r,a,l,s,c,h=this._lSpace,d=this.conf.padding,g=this.compositionsByCategory,u=0;if(h&&!o)return h.isImpure=!0,h;for(h=this._lSpace={bound:{height:0,width:0},node:{logicArea:void 0}},(a=kt(e,{})).height-=2*d.v,a.width-=2*d.h,a.x+=d.h,a.y+=d.v,l=this.getCompositionPlotAreaFor(a),t.colorRange=this.colorRange,s=0,c=this.SC_STACK.length;s<c;s++)(n=g[this.SC_STACK[s]])&&(i=l(r,n.conf.spreadFactor),r=n.getLogicalSpace(kt(i,{}),t,o),u+=this.getSpaceTaken(r));return this.updateEffectivePlotArea(e,a,u),h.node.logicArea=a,h.bound=e,e},t.draw=function(){var e,t,o,n,i,r,a,l,s,c,h=this.childTextConf,d=this.conf,g=d.bound.style||{},u=this.compositionsByCategory;for(arguments.length>=3?(r=arguments[1],l=arguments[2]):arguments.length>=2&&(l=arguments[1]),t=l.parentLayer,e=l.animationManager,this.getLogicalSpace(r,l),a=this._lSpace,this.group=i=e.setAnimation({el:this.group||"group",attr:{name:"legend-body",transform:"t0,0"},css:h.style,container:t,component:yt}),this.bound=o=e.setAnimation({el:this.bound||"rect",attr:a.bound,css:g,container:i,component:yt}),l.colorRange=this.colorRange,l.parentLayer=i,s=0,c=this.DARW_STACK.length;s<c;s++)(n=u[this.DARW_STACK[s]])&&n.draw(l);return l.moveInstructions&&i.attr({transform:l.moveInstructions}),{bound:o,group:i}},t.getCompositionPlotAreaFor=function(e){var t,o="bottom"===this.conf.legendPosition;return t=kt(e,{}),function(n,i){var r=n;return r=r||{},o?(t.y+=r.height||0,t.height=e.height*i):(t.x+=r.width||0,t.width=e.width*i),t}},t.updateEffectivePlotArea=function(e,t,o){var n=this.conf.padding;"bottom"===this.conf.legendPosition?(t.height=o,e.height=o+2*n.v):(t.width=o,e.width=o+2*n.h)},e}(),Pt=function(){function e(e){this.conf=e,this.node=[],this._id="GL_LABELS"}var t=e.prototype;return t.configure=function(e){this.conf=e},t.getType=function(){return"label"},t.getName=function(){return"LegendLabel"},t.getEffectivePlotArea=function(e){var t=this.conf.padding;return e.height-=2*t.v,e.width-=2*t.h,e.x+=t.h,e.y+=t.v,e},t.getLogicalSpace=function(e,t,o){var n,i,r,a,l,s,c,h,d,g,u,b,f,p,m,v,y,C,L,O,x,k,w,j="bottom"===this.conf.legendPosition,F=this._lSpace,S=this.conf,A=S.padding,E=[],_=t.gLegend.getFromEnv("chartConfig"),I=[];if(F&&!o)return F.isImpure=!0,F;for(n=t.colorRange,i=t.smartLabel,g=n.getCumulativeValueRatio(),r=n.colorRange,f=(F=this._lSpace={bound:{height:0,width:0},node:{logicArea:void 0,smartTexts:[]}}).node.smartTexts,h=kt(e,{}),m=this.getEffectivePlotArea(h),w=j?m.width:m.height,i.useEllipsesOnOverflow(_.useEllipsesWhenOverflow),k=kt(S.style,{}),jt(this._metaStyle=k),i.setStyle(k),v=i.getSmartText("W"),a=0,l=r.length;a<l;a++)(d=r[a].label)?I.push({oriIndex:a,label:d}):f[a]=void 0;if(0===(l=I.length))return{height:0,width:0};for(b=u=l>1?(g[I[l-1].oriIndex]-g[I[0].oriIndex])/2*w/100:Math.max(g[I[0].oriIndex],100-g[I[0].oriIndex])/2*w/100,j?((O=i.getSmartText(I[0].label,b,m.height)).x=g[I[0].oriIndex]*m.width/100,s=O.x+O.width):((O=i.getSmartText(I[0].label,b,m.width)).y=g[I[0].oriIndex]*m.height/100,s=O.y+O.width),E.push(O.height),f[I[0].oriIndex]=O,j?((O=i.getSmartText(I[l-1].label,b,m.height)).x=g[I[l-1].oriIndex]*m.width/100,c=O.x-O.width):((O=i.getSmartText(I[l-1].label,b,m.width)).y=g[I[l-1].oriIndex]*m.height/100,c=O.y-O.width),E.push(O.height),f[I[l-1].oriIndex]=O,L=s,a=1;a<l-1;a++)d=I[a].label,x=I[a].oriIndex,O=void 0,y=a+1===l-1?c:g[I[a+1].oriIndex]*w/100,C=g[I[a].oriIndex]*w/100,(u=Math.min(C-L,y-C))>2*v.width&&(j?(O=i.getSmartText(d,u,m.height)).x=g[x]*m.width/100:(O=i.getSmartText(d,u,m.width)).y=g[x]*m.height/100,L=u,E.push(O.height)),f[I[a].oriIndex]=O;return p=Math.max.apply(Math,E),j?(m.height=p,e.height=p+2*A.v):(m.width=p,e.width=p+2*A.v),F.node.logicArea=m,F.bound=e,e},t.draw=function(){var e,t,o,n,i,r,a,l,s,c,h,d,g="bottom"===this.conf.legendPosition,u=this.conf,b=u.bound&&u.bound.style||{stroke:"none"},f={};arguments.length>=2&&arguments[1]?(n=arguments[0],a=arguments[1]):arguments.length>=1&&(a=arguments[0]),d=a.animationManager,e=a.parentLayer,this.getLogicalSpace(n,a),s=(r=this._lSpace).node.logicArea,c=r.node.smartTexts,this.group=o=d.setAnimation({el:this.group||"group",attr:{name:"legend-labels"},container:e,component:yt}),this.bound=t=d.setAnimation({el:this.bound||"rect",attr:r.bound,css:b,container:o,component:yt});for(var p=0;p<this.node.length;p++)this.node[p].remove();for(this.node=[],l=0,h=c.length;l<h;l++)(i=c[l])&&(g?(f.y=s.y+i.height/2,f.x=l===h-1?s.x+i.x-i.width/2:l?s.x+i.x:s.x+i.x+i.width/2):(f.x=s.x+i.height/2,f.y=l===h-1?s.y+i.y-i.width/2:l?s.y+i.y:s.y+i.y+i.width/2),this.node.push(d.setAnimation({el:"text",attr:{text:i.text,x:f.x,y:f.y,lineHeight:this._metaStyle.lineHeight,fill:u.style.fill,transform:g?"R0":"R270,"+f.x+","+f.y},container:o,component:yt})));return{group:o,bound:t,node:this.node}},e}(),Tt=function(){function e(e){this.conf=e,this._id="FL_AXIS",this.node=void 0,this.group=void 0,this.shadow=void 0,this.markerLine=void 0,this.compositionsByCategory={}}var t=e.prototype;return t.configure=function(e){this.conf=e},t.getName=function(){return"LegendAxis"},t.getType=function(){return"axis"},t.addCompositions=function(e,t){this.compositionsByCategory[t]=e},t.getLogicalSpace=function(){var e,t,o,n,i,r,a="bottom"===this.conf.legendPosition,l=arguments[0],s=arguments[2],c=this._lSpace,h=this.conf,d=h.padding,g=h.legendAxisHeight,u=this.compositionsByCategory,b=0;return c&&!s?(c.isImpure=!0,c):(c=this._lSpace={bound:{height:0,width:0},node:{logicArea:void 0}},(i=kt(l,{})).height-=2*d.v,i.width-=2*d.h,i.x+=d.h,i.y+=d.v,e=g/2+h.line.offset,t=g/2,(n=u[Lt.RANGE])&&(r=n.sliders.false.conf.outerCircle.rFactor*g,t+=b=Math.max(r/2-g/2,0)),a?(i.y+=b,i.height=o=t+e+b,l.height=o+2*d.v):(i.x+=b,i.width=o=t+e+b,l.width=o+2*d.v),c.node.logicArea=i,c.bound=l,l)},t.getDrawableAxisArea=function(e){var t=this.conf,o="bottom"===this.conf.legendPosition;return{x:e.x,y:e.y,width:o?e.width:t.legendAxisHeight,height:o?t.legendAxisHeight:e.height,r:t.legendAxisHeight/2}},t.preDrawingRangeParamV=function(e){return{x:e.x+e.width/2,calculationBase:e.width,rangeStart:e.y,rangeEnd:e.y+e.height,prop:"x"}},t.preDrawingRangeParamH=function(e){return{y:e.y+e.height/2,calculationBase:e.height,rangeStart:e.x,rangeEnd:e.x+e.width,prop:"y"}},t.preDrawingRangeParam=function(e){return"bottom"===this.conf.legendPosition?this.preDrawingRangeParamH(e):this.preDrawingRangeParamV(e)},t.getScaleMarkerPathStrH=function(e,t){var o,n,i,r,l,s=kt(e,{}),c=this.conf.line,h=a.b,d=a.b;for(s.x+=s.r,s.width-=2*s.r,l=s.y+s.height,o=0,n=t.length;o<n;o++)i=t[o],h+="M"+(r=s.x+i*s.width/100)+","+(l-c.grooveLength)+"L"+r+","+(l+c.offset);return h+(d+="M"+s.x+","+(l+c.offset)+"L"+(s.x+s.width)+","+(l+c.offset))},t.getColorGradientH=function(e){return{axis:e.getBoxFill(),shadow:Object(a.Xb)({FCcolor:{alpha:"25,0,0",angle:90,color:"000000,FFFFFF,FFFFFF",ratio:"0,30,40"}})}},t.draw=function(){var e,t,o,n,i,r,a,l,s,c,h,d,g,u,b=this.conf,f=b.bound||{},p=b.line,m=f.style||{},v=this.compositionsByCategory;for(o in arguments.length>=2?(t=arguments[0],d=arguments[1]):arguments.length>=1&&(d=arguments[0]),g=d.animationManager,e=d.parentLayer,i=(n=d.colorRange).getCumulativeValueRatio(),this.getLogicalSpace(t,d),h=this._lSpace,this.group=a=g.setAnimation({el:this.group||"group",attr:{name:"legend-axis"},container:e,component:yt}),this.bound=g.setAnimation({el:this.bound||"rect",attr:h.bound,css:m,component:yt,container:a}),c=this.getDrawableAxisArea(h.node.logicArea),s=this.getColorGradient(n),b.style.fill=s.axis,b.shadow.style.fill=s.shadow,this.node=g.setAnimation({el:this.node||"rect",attr:c,css:b.style,container:a,component:yt}),this.shadow=g.setAnimation({el:this.shadow||"rect",attr:c,css:b.shadow.style,container:a,component:yt}),u=this.getScaleMarkerPathStr(c,i),this.path=g.setAnimation({el:this.path||"path",attr:{path:u},css:p.style,container:a,component:yt}),v)switch(r=v[o],o){case Lt.RANGE:d[(l=this.preDrawingRangeParam(c)).prop]=l[l.prop],d.key=l.prop,d.rCalcBase=l.calculationBase,d.parentLayer=a,r.draw(l.rangeStart,l.rangeEnd,d)}},t.getScaleMarkerPathStr=function(e,t){return"bottom"===this.conf.legendPosition?this.getScaleMarkerPathStrH(e,t):this.getScaleMarkerPathStrV(e,t)},t.getColorGradient=function(e){return"bottom"===this.conf.legendPosition?this.getColorGradientH(e):this.getColorGradientV(e)},t.getScaleMarkerPathStrV=function(e,t){var o,n,i,r,l,s=kt(e,{}),c=this.conf.line,h=a.b,d=a.b;for(s.y+=s.r,s.height-=2*s.r,r=s.x+s.width,o=0,i=t.length;o<i;o++)n=t[o],l=s.y+n*s.height/100,h+="M"+(r-c.grooveLength)+","+l+"L"+(r+c.offset)+","+l;return h+(d+="M"+(r+c.offset)+","+s.y+"L"+(r+c.offset)+","+(s.y+s.height))},t.getColorGradientV=function(e){return{axis:e.getBoxFill(!0),shadow:Object(a.Xb)({FCcolor:{alpha:"25,0,0",angle:360,color:"000000,FFFFFF,FFFFFF",ratio:"0,30,40"}})}},e}(),Mt=function(){function e(e,t,o){this.conf=t.conf,this.sliderIndex=e,this.rangeGroup=t.sliderGroup,this._id=o,this.node=void 0,this.tracker=void 0,this.currPos=0,this.swing=[]}var t=e.prototype;return t.configure=function(e,t,o){this.conf=t.conf,this.sliderIndex=e,this.rangeGroup=t.sliderGroup,this._id=o,this.currPos=0,this.swing=[]},t.getType=function(){return"slider"},t.getName=function(){return"Slider"},t.updateSwingRange=function(e,t){this.swing[+e]=t},t.draw=function(e,t,o,n){var i,r,a,l,s,c,h,d=n.parentLayer,g=n.animationManager,u=this.conf,b=u.outerCircle,f=u.innerCircle,p=g.getFromEnv("chart").config,m=Math.ceil(b.rFactor*n.rCalcBase/2),v=Math.ceil(f.rFactor*n.rCalcBase/2),y=m-v,C=n.gLegend.getFromEnv("toolTipController"),L=this.sliderIndex;return u.outerRadius=m,u.innerRadius=v,this._scaleVal=t,f.style["stroke-width"]=y,v+=l=Math.ceil(b.style["stroke-width"]/2),r=this.node=g.setAnimation({el:this.node||"group",attr:{name:"fc-gl-slider",cursor:"pointer",transform:"t0,0"},container:d,component:yt}),"x"===n.key?(s=o,c=e,c+=L?-v:+v):(s=e,c=o,s+=L?-v:+v),this.oCircle=g.setAnimation({el:this.oCircle||"circle",attr:{cx:s,cy:c,r:m},css:b.style,container:r,component:yt}),this.iCircle=g.setAnimation({el:this.iCircle||"circle",attr:{cx:s,cy:c,r:v},css:f.style,container:r,component:yt}),h=this.tracker=g.setAnimation({el:this.tracker||"circle",attr:{cx:s,cy:c,r:m+5,fill:Ot,stroke:Ot,cursor:"pointer"},container:r,component:yt}),r.attr({transform:"x"===n.key?"t0,"+this.currPos:"t"+this.currPos+",0"}),i=p.showToolTip?t:"",C.enableToolTip(h,i),this._dragAPI=a=this.getDragAPI("x"===n.key),h.undrag(),h.drag(a.dragging,a.dragStart,a.dragEnd),{translateAscending:m+l}},t.getDragAPI=function(e){var t,o,n,i,r=this,a=r.node,l=r.sliderIndex,s=r.rangeGroup,c=r.conf.innerRadius;return{dragging:function(h){var d,g,u,b,f;return h.stopPropagation(),u=e?h.data[1]:h.data[0],l?(d=t[0]-t[1]+c,g=0):(d=0,g=t[1]-t[0]-c),(f=r.currPos+u)<d?u+=d-f:f>g&&(u-=f-g),a.attr({transform:e?"t0,"+(r.currPos+u):"t"+(r.currPos+u)+",0"}),o=u,n&&clearTimeout(n),n=setTimeout((function(){s.updateWhenInRest(r,r.currPos+u)}),100),b=s.updateWhenInMove(r,r.currPos+u),r.conf.showTooltip&&r.tracker.data("__FC_tooltipText",b),i=!0,!0},dragStart:function(e){e.stopPropagation(),t=r.swing,i=!1,s.dragStarted(r)},dragEnd:function(){var e;s.dragCompleted(r,i,r.currPos+o),i&&(n&&clearTimeout(n),n=setTimeout((function(){s.updateWhenInRest(r,r.currPos)}),100),r.currPos+=o,e=t[+l]+r.currPos,s.updateRange(r,e))}}},t.dispose=function(){this.node.remove(),this.oCircle.remove(),this.iCircle.remove(),this.tracker.remove()},e}(),Bt=function(){function e(e){var t=e,o={};this._id="GL_SG1",this.conf=e,o.conf=t,this.extremes=[],this.sliders={},this.min=void 0,this.max=void 0,o.sliderGroup=this,this.valueRange=[],this.callbacks=[],this.sliders[!1]=new Mt(!1,o,this._id+"_0"),this.sliders[!0]=new Mt(!0,o,this._id+"_1")}var t=e.prototype;return t.configure=function(e){var t=e,o={};this.min=void 0,this.max=void 0,this.conf=e,o.conf=t,o.sliderGroup=this,this.sliders[!1].configure(!1,o,this._id+"_0"),this.sliders[!0].configure(!0,o,this._id+"_1")},t.getType=function(){return"slider"},t.getName=function(){return"SliderGroup"},t.initRange=function(e,t){var o=e.sliderIndex;this.extremes[+o]=t},t.updateRange=function(e,t){var o=e.sliderIndex;this.sliders[!o].updateSwingRange(o,t)},t.reset=function(){var e={};e.conf=this.conf,e.sliderGroup=this,this.min=void 0,this.max=void 0,this.sliders[!1].configure(!1,e,this._id+"_0"),this.sliders[!0].configure(!0,e,this._id+"_1"),this.draw.apply(this,this._drawParams)},t.draw=function(e,t,o){var n,i,r,a,l,s,c=this.sliders,h=c[!1],d=c[!0],g=o.colorRange,u=g.colorRange,b=g.data.mapByPercent,f=o.gLegend.getFromEnv("number-formatter");return this._fcChart=o.gLegend.getFromEnv("chart"),this.getValueFormPixel=function(e,t,o,n){var i=(t-e)/(n-o);this.getValueFormPixel=function(t){return e+i*t}},this.updateWhenInMove=function(e,t){this.updateWhenInMove=function(o,n){var i,r,a=this.extremes;return i=o.sliderIndex?a[1]-a[0]+n:n,r=this.getValueFormPixel(i),r=t?parseFloat(r).toFixed(2)+"%":e.legendValue(r)}},this._drawParams=[e,t,o],this.updateWhenInMove(f,b),r=h.conf.outerCircle,i=h.conf.innerCircle,a=Math.ceil(i.rFactor*o.rCalcBase/2),a+=Math.ceil(r.style["stroke-width"]/2),this.extremes[0]=e+a,this.extremes[1]=t-a,l=this.extremes[1]-this.extremes[0],this.min=this.min?this.min:u[0].value,this.max=this.max?this.max:u[u.length-1].value,s=u[u.length-1].value-u[0].value,h.currPos=l*(this.min-u[0].value)/s,d.currPos=l*(this.max-u[0].value)/s-l,h.draw(e,b?f.legendPercentValue(this.min):f.legendValue(this.min),o[o.key],o),n=d.draw(t,b?f.legendPercentValue(this.max):f.legendValue(this.max),o[o.key],o),h.swing=this.extremes.slice(0),d.swing=this.extremes.slice(0),h.swing[1]+=d.currPos,d.swing[0]+=h.currPos,this.getValueFormPixel(u[0].value,u[u.length-1].value,this.extremes[0],this.extremes[1]),n},t.updateWhenInRest=function(e,t){var o,n,i=this.sliders,r=this.extremes,a=e.sliderIndex;a?(o=i[!a].currPos,n=r[1]-r[0]+t):(o=t,n=r[1]-r[0]+i[!a].currPos),this.min=Number(this.getValueFormPixel(o).toFixed(2)),this.max=Number(this.getValueFormPixel(n).toFixed(2)),this.gLegend.fireEvent("rangeUpdated",[{min:this.min,max:this.max}])},t.dragStarted=function(e){var t=this.sliders,o=this.extremes,n=e.conf,i=this._fcChart;i.fireChartInstanceEvent("legendpointerdragstart",{pointerIndex:+e.sliderIndex,pointers:[{value:this.getValueFormPixel(t.false.currPos)},{value:this.getValueFormPixel(o[1]-o[0]+t.true.currPos)}],legendPointerHeight:n.outerRadius,legendPointerWidth:n.innerRadius,outerRadius:n.outerRadius,innerRadius:n.innerRadius},[i.id])},t.dragCompleted=function(e,t,o){var n,i,r=this.sliders,a=this.extremes,l=e.conf,s=this.getValueFormPixel(r.false.currPos),c=this.getValueFormPixel(a[1]-a[0]+r.true.currPos),h=this._fcChart;e.sliderIndex?(n=s,i=this.getValueFormPixel(a[1]-a[0]+o)):(n=this.getValueFormPixel(o),i=c),t&&h.fireChartInstanceEvent("legendrangeupdated",{previousMinValue:s,previousMaxValue:c,minValue:n,maxValue:i},[h.id]),h.fireChartInstanceEvent("legendpointerdragstop",{pointerIndex:+e.sliderIndex,pointers:[{value:n},{value:i}],legendPointerHeight:l.outerRadius,legendPointerWidth:l.innerRadius,outerRadius:l.outerRadius,innerRadius:l.innerRadius},[h.id])},t.dispose=function(){this.sliders[!1].dispose(),this.sliders[!0].dispose()},e}(),Rt=function(e){function t(){var t;return(t=e.call(this,arguments[0])||this)._id="GL_VALUES",t.node=[],t}i()(t,e);var o=t.prototype;return o.configure=function(e){this.conf=e},o.getName=function(){return"LegendValues"},o.getType=function(){return"legend"},o.getLogicalSpace=function(e,t,o){var n,i,r,a,l,s,c,h,d,g,u,b,f,p,m,v,y,C,L,O,x,k,w,j,F,S="bottom"===this.conf.legendPosition,A=this._lSpace,E=this.conf,_=E.padding,I=t.gLegend.getFromEnv("chartConfig"),P=[],T=[];if(A&&!o)return A.isImpure=!0,A;for(n=t.colorRange,i=t.smartLabel,r=n.colorRange,c=n.getCumulativeValueRatio(),F=(A=this._lSpace={bound:{height:0,width:0},node:{logicArea:void 0,smartTexts:[]}}).node.smartTexts,(O=kt(e,{})).height-=2*_.v,O.width-=2*_.h,O.x+=_.h,O.y+=_.v,i.useEllipsesOnOverflow(I.useEllipsesWhenOverflow),j=kt(E.style,{}),jt(this._metaStyle=j),i.setStyle(j),w=i.getSmartText("W"),s=r.length,S?(u=h=(c[s-1]-c[0])/2*O.width/100,k=r[0].displayValue,(a=i.getSmartText("string"!=typeof k&&void 0!==k&&k.toString()||k,u,O.height)).x=c[0]*O.width/100,b=a.x+a.width,P.push(a.height)):(u=h=(c[s-1]-c[0])/2*O.height/100,(a=i.getSmartText(r[0].displayValue,O.width,u)).y=c[0]*O.height/100,m=a.y+a.width,T.push(a.width)),F[0]=a,S?((a=i.getSmartText(r[s-1].displayValue,u,O.height)).x=c[s-1]*O.width/100,p=a.x-a.width,P.push(a.height),f=b):((a=i.getSmartText(r[s-1].displayValue,O.width,u)).y=c[s-1]*O.height/100,y=a.y-a.height,T.push(a.width),v=m),F[s-1]=a,l=1;l<s-1;l++)a=void 0,x=r[l].displayValue,S?(d=l+1===s-1?p:c[l+1]*O.width/100,g=c[l]*O.width/100,(h=Math.min(g-f,d-g))>1.5*w.width&&((a=i.getSmartText(x,2*h,O.height)).x=c[l]*O.width/100,f=h,P.push(a.height))):(d=l+1===s-1?y:c[l+1]*O.height/100,g=c[l]*O.height/100,(h=Math.min(g-v,d-g))>2*w.height&&((a=i.getSmartText(x,O.width,2*h)).y=c[l]*O.height/100,v=h,T.push(a.width))),F[l]=a;return S?(C=Math.max.apply(Math,P),O.height=C,e.height=C+2*_.v):(L=Math.max.apply(Math,T),O.width=L,e.width=L+2*_.h),A.node.logicArea=O,A.bound=e,e},o.draw=function(){var e,t,o,n,i,r,a,l,s,c,h,d,g,u=this.conf,b="bottom"===u.legendPosition,f=u.bound&&u.bound.style||{stroke:"none"},p={};arguments.length>=2&&arguments[1]?(n=arguments[0],a=arguments[1]):arguments.length>=1&&(a=arguments[0]),g=a.animationManager,e=a.parentLayer,l=a.colorRange.getCumulativeValueRatio(),this.getLogicalSpace(n,a),r=(i=this._lSpace).node.logicArea,h=i.node.smartTexts,this.group=o=g.setAnimation({el:this.group||"group",attr:{name:"legend-values"},container:e,component:yt}),this.bound=t=g.setAnimation({el:this.bound||"rect",attr:i.bound,css:f,container:o,component:yt});for(var m=0;m<this.node.length;m++)this.node[m].remove();for(this.node=[],s=0,c=l.length;s<c;s++)(d=h[s])&&(b?(p.y=r.y+d.height/2,p.x=s===c-1?r.x+d.x-d.width/2:s?r.x+d.x:r.x+d.x+d.width/2):(p.x=r.x+d.width/2,p.y=s===c-1?r.y+d.y-d.height/2:s?r.y+d.y:r.y+d.y+d.height/2),this.node.push(g.setAnimation({el:"text",attr:{text:d.text,x:p.x,y:p.y,lineHeight:this._metaStyle.lineHeight,fill:u.style.fill},container:o,component:yt})));return{group:o,bound:t}},t}(Pt),Dt=St;var Jt=function(e){!function(e){var t=e.getFromEnv("dataSource").colorrange,o=e.getFromEnv("dataSource").chart.mapbycategory,n="maps"===e.defaultDatasetType,i="TreeMap"===e.getName(),r=e.getFromEnv("legend"),l=e.getFromEnv("gLegend");switch(t&&e.config.showLegend?n?t.gradient&&Number(t.gradient)?"gradient":t.color?"icon":"none":i?t.gradient&&"0"!==t.gradient?"gradient":"none":t.gradient&&"0"!==t.gradient&&!Number(o)?"gradient":"icon":"none"){case"gradient":e.deleteFromEnv("legend"),r&&r.remove(),Object(a.P)(e,Dt,"gLegend",1),(l=e.getChildren("gLegend")[0]).configure(),e.addToEnv("gLegend",l);break;case"icon":e.deleteFromEnv("gLegend"),l&&l.remove(),Object(a.P)(e,z,"legend",1,{showLegend:!0}),(r=e.getChildren("legend")[0]).configure(),e.addToEnv("legend",r);break;case"none":e.deleteFromEnv("gLegend"),e.deleteFromEnv("legend"),l&&l.remove(),r&&r.remove()}}(e)},Gt=Object(a.X)({foregroundcolor:"333333",foregroundalpha:"100",foregrounddarkcolor:"111111",foregrounddarkalpha:"100",foregroundlightcolor:"666666",foregroundlightalpha:"100",backgroundlightcolor:"FFFFFF",backgroundlightalpha:"100",backgroundlightangle:90,backgroundlightratio:"",backgroundcolor:"FFFFCC",backgroundalpha:"100",backgrounddarkcolor:"ffcc66",backgrounddarkalpha:"100",backgrounddarkangle:270,backgrounddarkratio:"",shadow:1},U),Nt={basefontcolor:"foregroundcolor",bordercolor:"foregrounddarkcolor",borderalpha:"foregrounddarkalpha",bgcolor:"backgroundlightcolor",bgalpha:"backgroundlightalpha",bgangle:"backgroundlightangle",bgratio:"backgroundlightratio",canvasbordercolor:"foregrounddarkcolor",canvasborderalpha:"foregrounddarkalpha",canvasbgcolor:"backgroundlightcolor",canvasbgalpha:"backgroundlightalpha",canvasbgangle:"backgroundlightangle",canvasbgratio:"backgroundlightratio",tooltipbordercolor:"foregrounddarkcolor",tooltipborderalpha:"foregrounddarkalpha",tooltipbgcolor:"backgroundlightcolor",tooltipbgalpha:"backgroundlightalpha",tooltipfontcolor:"foregroundcolor",legendbordercolor:"foregrounddarkcolor",legendborderalpha:"foregrounddarkalpha",markerbordercolor:"foregroundlightcolor",markerborderalpha:"foregroundlightalpha",markerfillcolor:"backgrounddarkcolor",markerfillalpha:"backgrounddarkalpha",markerfillangle:"backgrounddarkangle",markerfillratio:"backgrounddarkratio",plotfillcolor:"backgroundcolor",plotfillalpha:"backgroundalpha",plotfillangle:"backgroundangle",plotfillratio:"backgroundratio",plothoverfillcolor:"backgrounddarkcolor",plothoverfillalpha:"backgrounddarkalpha",plothoverfillangle:"backgrounddarkangle",plothoverfillratio:"backgrounddarkratio",plotbordercolor:"foregroundcolor",plotborderalpha:"foregroundalpha",shadow:"shadow"},Vt={getMapName:function(){return this.jsVars.instanceAPI.getName().toLowerCase()},getEntityList:function(){var e,t,o,n,i,r=this.jsVars.instanceAPI.getDatasets()||[],a=r.length,l=[];for(e=0;e<a;e++)if("entities"===(o=r[e]||[]).getName()){t=o;break}for(e in a=(n=t.components.data).length,n)n.hasOwnProperty(e)&&(i=(n[e]||{}).config||{},l.push({id:i.id,originalId:i.originalId||i.id,label:i.label,shortlabel:i.shortLabel,value:i.value,formattedValue:i.formattedValue,toolText:i.toolText}));return l},getMapAttribute:function(){var e=this;return Object($.f)(this,"12061210581","run","JavaScriptRenderer~getMapAttribute()",'Use of deprecated "getMapAttribute()". Replace with "getChartAttribute()".'),e.getChartAttribute.apply(e,arguments)},exportMap:function(){var e=this;return Object($.f)(this,"12061210581","run","JavaScriptRenderer~exportMap()",'Use of deprecated "exportMap()". Replace with "exportChart()".'),e.exportChart&&e.exportChart.apply(e,arguments)},addMarker:function(e){var t,o,n,i=this.jsVars.instanceAPI.getDatasets()||[],r=i.length;for(t=0;t<r;t++)if("markers"===(o=i[t]||[]).getName()){n=o;break}n&&!n.addMarkerItem(e)&&Object($.f)(this,"1309264086","run","MapsRenderer~addMarker()","Failed to add marker. Check the options and try again.")},updateMarker:function(e,t){var o,n,i,r,a=this.jsVars.instanceAPI.getDatasets()||[],l=a.length;for(n=0;n<l;n++)if("markers"===(i=a[n]||[]).getName()){r=i;break}r&&e&&(o=(e+Wt).toLowerCase(),r.updateMarkerItem(o,t))},removeMarker:function(e){var t,o,n,i,r=this.jsVars.instanceAPI.getDatasets()||[],a=r.length;for(o=0;o<a;o++)if("markers"===(n=r[o]||[]).getName()){i=n;break}e&&(t=(e+Wt).toLowerCase(),i._removeMarkerItem(t))}},Wt="",Ht=window.Math,Xt=Ht.min,zt=Ht.max,Yt=function(e){function t(t,o){var n,i;for(i in(n=e.call(this)||this).subpalette=a.b,n.key=a.b,n.index=o,t)n.subpalette=Gt[t[i]],n[i]=n.subpalette instanceof Array?n.subpalette[o]:n.subpalette,n.key=i;return n}return i()(t,e),t}(g.a),Kt=function(e){function t(){var t;return(t=e.call(this)||this).friendlyName="Map",t.revision=1,t.hasCanvas=!0,t.standaloneInit=!1,t.defaultDatasetType="maps",t.defaultSeriesType="geo",t.fireGroupEvent=!0,t.legendposition="right",t.hasGradientLegend=!0,t.isMap=!0,t.defaultPaletteOptions={paletteColors:[["A6A6A6","CCCCCC","E1E1E1","F0F0F0"],["A7AA95","C4C6B7","DEDFD7","F2F2EE"],["04C2E3","66E7FD","9CEFFE","CEF8FF"],["FA9101","FEB654","FED7A0","FFEDD5"],["FF2B60","FF6C92","FFB9CB","FFE8EE"]],bgColor:["FFFFFF","CFD4BE,F3F5DD","C5DADD,EDFBFE","A86402,FDC16D","FF7CA0,FFD1DD"],bgAngle:[270,270,270,270,270],bgRatio:["0,100","0,100","0,100","0,100","0,100"],bgAlpha:["100","60,50","40,20","20,10","30,30"],toolTipBgColor:["FFFFFF","FFFFFF","FFFFFF","FFFFFF","FFFFFF"],toolTipBorderColor:["545454","545454","415D6F","845001","68001B"],baseFontColor:["555555","60634E","025B6A","A15E01","68001B"],tickColor:["333333","60634E","025B6A","A15E01","68001B"],trendColor:["545454","60634E","415D6F","845001","68001B"],plotFillColor:["545454","60634E","415D6F","845001","68001B"],borderColor:["767575","545454","415D6F","845001","68001B"],borderAlpha:[50,50,50,50,50]},t.colorPaletteMap=Nt,t.eiMethods=Vt,t.registerFactory("legend",Jt,["canvas"]),t.registerFactory("axis",a.Vb,["canvas"]),t.registerFactory("colormanager-decider",Ct,["legend"]),t.registerFactory("dataset",rt,["colormanager-decider"]),t.registerFactory("canvas",at.a),t}i()(t,e);var o=t.prototype;return o._checkInvalidSpecificData=function(){return this.config.invalid=!1,!1},o.__setDefaultConfig=function(){e.prototype.__setDefaultConfig.call(this);var t=this.config;!t.baseWidth&&(t.baseWidth=400),!t.baseHeight&&(t.baseHeight=300),!t.baseScaleFactor&&(t.baseScaleFactor=1)},t.getName=function(){return"maps"},t.getType=function(){return"chartAPI"},o.getName=function(){return this.config.name||"GEO"},o.getType=function(){return"chartAPI"},o.configureAttributes=function(t){var o,n=this.getChildren("colorPalette")&&this.getChildren("colorPalette")[0];o=t.chart=t.chart||t.graph||t.map||{},this.jsonData=t,n||(n=new Yt(this.colorPaletteMap,(o.palette>0&&o.palette<6?o.palette:Object(a.Lb)(this.paletteIndex,1))-1),this.attachChild(n,"colorPalette")),this.config.skipCanvasDrawing=!0,e.prototype.configureAttributes.call(this,t),this._parseBackgroundCosmetics()},o.parseChartAttr=function(t){var o,n,i,r,l,s=this.jsonData,c=s.chart||s.map,h=s.markers,d=new Yt(this.colorPaletteMap,(c.palette>0&&c.palette<6?c.palette:Object(a.Lb)(this.paletteIndex,1))-1),g=Object(a.Jb)(c.entitybordercolor,c.bordercolor,d.plotbordercolor),u=Object(a.Jb)(c.entityfillcolor,c.fillcolor,d.plotfillcolor),b=Object(a.Jb)(c.entityfillalpha,c.fillalpha,d.plotfillalpha),f=Object(a.Jb)(c.entityfillratio,c.fillratio,d.plotfillratio),p=Object(a.Jb)(c.entityfillangle,c.fillangle,d.plotfillangle),m=Object(a.Jb)(c.nullentityfillcolor,c.nullentitycolor,u),v=Object(a.Lb)(c.usevaluesformarkers,s.markers&&s.markers.items&&s.markers.items.length,!(s.markers&&s.markers.application&&s.markers.application.length&&s.markers.definition&&s.markers.definition.length));e.prototype.parseChartAttr.call(this,t),(o=this.config).origMarginTop=Object(a.Lb)(c.charttopmargin,c.maptopmargin,11),o.origMarginLeft=Object(a.Lb)(c.chartleftmargin,c.mapleftmargin,11),o.origMarginBottom=Object(a.Lb)(c.chartbottommargin,c.mapbottommargin,11),o.origMarginRight=Object(a.Lb)(c.chartrightmargin,c.maprightmargin,11),o.labelsOnTop=Object(a.Lb)(c.entitylabelsontop,1),n=(l=o.style).inCancolor,i=l.inCanfontFamily,r=l.inCanfontSize,o.entityOpts={baseScaleFactor:o.baseScaleFactor,dataLabels:{style:{fontFamily:i,fontSize:r,lineHeight:l.inCanLineHeight,color:Object(a.Jb)(c.entitylabelcolor,l.inCancolor),bgColor:Object(a.Jb)(c.entitylabelbgcolor)||Wt,borderColor:Object(a.Jb)(c.entitylabelbordercolor)||Wt}},fillColor:u,fillAlpha:b,fillRatio:f,fillAngle:p,borderColor:g,borderAlpha:Object(a.Jb)(c.entityborderalpha,c.borderalpha,this.borderAlpha,"100"),borderThickness:Object(a.Lb)(c.showentityborder,c.showborder,1)?Object(a.Lb)(c.entityborderthickness,c.borderthickness,1):0,scaleBorder:Object(a.Lb)(c.scaleentityborder,c.scaleborder,0),hoverFillColor:Object(a.Jb)(c.entityfillhovercolor,c.hoverfillcolor,c.hovercolor,d.plothoverfillcolor),hoverFillAlpha:Object(a.Jb)(c.entityfillhoveralpha,c.hoverfillalpha,c.hoveralpha,d.plothoverfillalpha),hoverFillRatio:Object(a.Jb)(c.entityfillhoverratio,c.hoverfillratio,c.hoverratio,d.plothoverfillratio),hoverFillAngle:Object(a.Jb)(c.entityfillhoverangle,c.hoverfillangle,c.hoverangle,d.plothoverfillangle),hoverBorderThickness:Object(a.Jb)(c.entityborderhoverthickness,c.hoverborderthickness),hoverBorderColor:Object(a.Jb)(c.entityborderhovercolor,g,d.plotbordercolor),hoverBorderAlpha:Object(a.Jb)(c.entityborderhoveralpha,d.plotborderalpha),nullEntityColor:m,nullEntityAlpha:Object(a.Jb)(c.nullentityfillalpha,c.nullentityalpha,b),nullEntityRatio:Object(a.Jb)(c.nullentityfillratio,c.nullentityratio,f),nullEntityAngle:Object(a.Jb)(c.nullentityfillangle,c.nullentityangle,p),connectorColor:Object(a.Jb)(c.labelconnectorcolor,c.connectorcolor,n),connectorAlpha:Object(a.Jb)(c.labelconnectoralpha,c.connectoralpha,"100"),connectorThickness:Object(a.Lb)(c.labelconnectorthickness,c.borderthickness,1),showHoverEffect:Object(a.Lb)(c.showentityhovereffect,c.usehovercolor,c.showhovereffect,1),hoverOnNull:Object(a.Lb)(c.hoveronnull,c.entityhoveronnull,1),labelPadding:Object(a.Lb)(c.labelpadding,5),showLabels:Object(a.Lb)(c.showlabels,1),labelsOnTop:Object(a.Lb)(c.entitylabelsontop,1),includeNameInLabels:Object(a.Lb)(c.includenameinlabels,1),includeValueInLabels:Object(a.Lb)(c.includevalueinlabels,0),useSNameInTooltip:Object(a.Lb)(c.usesnameintooltip,0),useShortName:Object(a.Lb)(c.usesnameinlabels,1),labelSepChar:Object(a.Jb)(c.labelsepchar,", "),showTooltip:Object(a.Lb)(c.showentitytooltip,c.showtooltip,1),tooltipSepChar:Object(a.Jb)(c.tooltipsepchar,", "),tooltext:c.entitytooltext,hideNullEntities:Object(a.Lb)(c.hidenullentities,0),showHiddenEntityBorder:Object(a.Lb)(c.showhiddenentityborder,1),showNullEntityBorder:Object(a.Lb)(c.shownullentityborder,1),hiddenEntityColor:Object(a.Jb)(c.hiddenentitycolor,c.hiddenentityfillcolor,c.hiddenentityalpha||c.hiddenentityfillalpha?m:"ffffff"),hiddenEntityAlpha:Object(a.Jb)(c.hiddenentityalpha,c.hiddenentityfillalpha,.001),shadow:Object(a.Lb)(c.showshadow,this.defaultPlotShadow,d.shadow)},o.markerOpts={dataLabels:{style:{fontFamily:Object(a.Jb)(c.markerfont,i),fontSize:Object(a.Lb)(c.markerfontsize,parseInt(r,10)),fontColor:Object(a.Jb)(c.markerlabelcolor,c.markerfontcolor,n),labelBgColor:Object(a.Jb)(c.markerlabelbgcolor)||Wt,labelBorderColor:Object(a.Jb)(c.markerlabelbordercolor)||Wt}},showTooltip:Object(a.Lb)(c.showmarkertooltip,c.showtooltip,1),showLabels:Object(a.Lb)(c.showmarkerlabels,c.showlabels,1),showHoverEffect:Object(a.Lb)(c.showmarkerhovereffect,1),labelPadding:Object(a.Jb)(c.markerlabelpadding,"5"),labelWrapWidth:Object(a.Lb)(c.markerlabelwrapwidth,0),labelWrapHeight:Object(a.Lb)(c.markerlabelwrapheight,0),fillColor:Object(a.Jb)(c.markerfillcolor,c.markerbgcolor,d.markerfillcolor),fillAlpha:Object(a.Jb)(c.markerfillalpha,d.markerfillalpha),fillAngle:Object(a.Jb)(c.markerfillangle,d.markerfillangle),fillRatio:Object(a.Jb)(c.markerfillratio,d.markerfillratio),fillPattern:Object(a.Jb)(c.markerfillpattern,d.markerbgpattern),hoverFillColor:c.markerfillhovercolor,hoverFillAlpha:c.markerfillhoveralpha,hoverFillRatio:c.markerfillhoverratio,hoverFillAngle:c.markerfillhoverangle,borderThickness:Object(a.Jb)(c.markerborderthickness,1),borderColor:Object(a.Jb)(c.markerbordercolor,d.markerbordercolor),borderAlpha:Object(a.Lb)(c.markerborderalpha,d.markerborderalpha),hoverBorderThickness:c.markerborderhoverthickness,hoverBorderColor:c.markerborderhovercolor,hoverBorderAlpha:c.markerborderhoveralpha,radius:Object(a.Lb)(c.markerradius&&Object(a.Zb)(c.markerradius),7),shapeId:Object(a.Jb)(c.defaultmarkershape,"circle"),labelSepChar:Object(a.Jb)(c.labelsepchar,", "),tooltipSepChar:Object(a.Jb)(c.tooltipsepchar,", "),autoScale:Object(a.Lb)(c.autoscalemarkers,0),tooltext:Object(a.Jb)(h&&h.tooltext,c.markertooltext),dataEnabled:v,valueToRadius:Object(a.Lb)(c.markerradiusfromvalue,1),valueMarkerAlpha:Object(a.Jb)(c.valuemarkeralpha,"75"),hideNull:Object(a.Lb)(c.hidenullmarkers,0),nullRadius:Object(a.Lb)(c.nullmarkerradius,c.markerradius,7),adjustViewPort:Object(a.Lb)(c.adjustviewportformarkers,0),startAngle:Object(a.Lb)(c.markerstartangle,90),maxRadius:Object(a.Lb)(c.maxmarkerradius,0),minRadius:Object(a.Lb)(c.minmarkerradius,0),applyAll:Object(a.Lb)(c.applyallmarkers,0),shadow:Object(a.Lb)(c.showmarkershadow,c.showshadow,0)},o.connectorOpts={showHoverEffect:Object(a.Lb)(c.showconnectorhovereffect,1),thickness:Object(a.Lb)(c.connectorthickness,c.markerconnthickness,"2"),color:Object(a.Jb)(c.connectorcolor,c.markerconncolor,d.markerbordercolor),alpha:Object(a.Jb)(c.connectoralpha,c.markerconnalpha,"100"),hoverThickness:Object(a.Lb)(c.connectorhoverthickness,c.connectorthickness,c.markerconnthickness,"2"),hoverColor:Object(a.Jb)(c.connectorhovercolor,c.connectorcolor,c.markerconncolor,d.markerbordercolor),hoverAlpha:Object(a.Jb)(c.connectorhoveralpha,c.connectoralpha,c.markerconnalpha,"100"),dashed:Object(a.Lb)(c.connectordashed,c.markerconndashed,0),dashLen:Object(a.Lb)(c.connectordashlen,c.markerconndashlen,3),dashGap:Object(a.Lb)(c.connectordashgap,c.markerconndashgap,2),font:Object(a.Jb)(c.connectorfont,c.markerconnfont,i),fontColor:Object(a.Jb)(c.connectorlabelcolor,c.connectorfontcolor,c.markerconnfontcolor,n),fontSize:Object(a.Lb)(c.connectorfontsize,c.markerconnfontsize,parseInt(r,10)),showLabels:Object(a.Lb)(c.showconnectorlabels,c.showmarkerlabels,c.showlabels,1),labelBgColor:Object(a.Jb)(c.connectorlabelbgcolor,c.markerconnlabelbgcolor,d.plotfillcolor),labelBorderColor:Object(a.Jb)(c.connectorlabelbordercolor,c.markerconnlabelbordercolor,d.markerbordercolor),shadow:Object(a.Lb)(c.showconnectorshadow,c.showmarkershadow,c.showshadow,0),showTooltip:Object(a.Lb)(c.showconnectortooltip,c.showmarkertooltip,c.showtooltip,1),tooltext:Object(a.Jb)(h&&h.connectortooltext,c.connectortooltext),hideOpen:Object(a.Lb)(c.hideopenconnectors,1)},o.adjustViewPortForMarkers=Object(a.Lb)(c.adjustviewportformarkers,v)},o._attachMouseEvents=function(){var e=this.getFromEnv("eventListeners"),o=this.getFromEnv("chart-container");e.push(Z.a.listen(o,a.ub?"touchstart":"click",t.searchMouseMove,this)),e.push(Z.a.listen(window.document,a.ub?"touchstart":"mousemove",t.searchMouseMove,this))},o._dispose=function(){var o=this.getFromEnv("chart-container");a.ub&&(Z.a.unlisten(o,"touchstart",t.searchMouseMove),Z.a.unlisten(window.document,"touchstart",t.searchMouseMove)),Z.a.unlisten(o,"click",t.searchMouseMove),Z.a.unlisten(window.document,"mousemove",t.searchMouseMove),e.prototype._dispose.call(this)},t.searchMouseMove=function(e){var t,o=e.data,n=o.config,i=o.getDatasets()[1],r=i&&i.getFromEnv("toolTipController"),l=i&&i.config.currentToolTip,s=o.config.lastHoveredPoint,c={};o.getFromEnv("chart-container")&&o.config.lastInteractionEvent!==e.originalEvent&&(o.config.lastInteractionEvent=e.originalEvent,(t=function(e,t){var o=Object(a.lb)(t.getFromEnv("chart-container"),e,t),n=o.chartX,i=o.chartY,r=t.config,l=r.canvasLeft,s=r.canvasTop,c=r.canvasLeft+r.canvasWidth,h=r.canvasHeight+r.canvasTop;return o.insideCanvas=!1,o.originalEvent=e,n>l&&n<c&&i>s&&i<h&&(o.insideCanvas=!0),o}(e,o))&&t.insideCanvas?(n.lastMouseEvent=e,c={x:t.chartX,y:t.chartY},o._searchNearestNeighbour(c,e)):(s&&i&&i.hoverOutFn(s.element),o.config.lastHoveredPoint=null,r&&r.hide(l)))},o._searchNearestNeighbour=function(e,t){var o,n=this.getDatasets()[1];if(n){if(!n.components.kDTree)return;(o=n.getElement(e))?n.highlightPoint(o,t):n.highlightPoint(!1,t)}},o._createLayers=function(){e.prototype._createLayers.call(this),this._attachMouseEvents()},o._parseBackgroundCosmetics=function(){var e,t=this.getChildren("background")[0].config,o=this.getChildren("colorPalette")[0],n=this.getFromEnv("chart-attrib");e=t.showBorder=Object(a.Lb)(n.showcanvasborder,1),t.borderWidth=e?Object(a.Lb)(n.canvasborderthickness,1):0,t.borderRadius=t.borderRadius=Object(a.Lb)(n.canvasborderradius,0),t.borderDashStyle=t.borderDashStyle=Object(a.Lb)(n.borderdashed,0)?Object(a.db)(Object(a.Lb)(n.borderdashlen,4),Object(a.Lb)(n.borderdashgap,2)):"none",t.borderAlpha=Object(a.Jb)(n.canvasborderalpha,o.borderAlpha),t.borderColor=t.borderColor=Object(a.R)(Object(a.Jb)(n.canvasbordercolor,o&&o.borderColor),t.borderAlpha)},o._getBackgroundCosmetics=function(){var e=this.getFromEnv("chart-attrib")||this.jsonData.map,t=this.getChildren("colorPalette")[0];return{FCcolor:{color:Object(a.Jb)(e.bgcolor,e.canvasbgcolor,t.bgcolor),alpha:Object(a.Jb)(e.bgalpha,e.canvasbgalpha,t.bgalpha),angle:Object(a.Jb)(e.bgangle,e.canvasbgangle,t.bgangle),ratio:Object(a.Jb)(e.bgratio,e.canvasbgratio,t.bgratio)}}},o._parseCanvasCosmetics=function(){e.prototype._parseCanvasCosmetics.call(this);var t=this.config,o=this.getFromEnv("chart-attrib")||this.jsonData.map,n=this.getChildren("canvas")[0].config;t.origMarginTop=Object(a.Lb)(o.maptopmargin,11),t.origMarginLeft=Object(a.Lb)(o.mapleftmargin,11),t.origMarginBottom=Object(a.Lb)(o.mapbottommargin,11),t.origMarginRight=Object(a.Lb)(o.maprightmargin,11),t.origCanvasLeftMargin=Object(a.Lb)(o.canvasleftmargin,0),t.origCanvasRightMargin=Object(a.Lb)(o.canvasrightmargin,0),t.origCanvasTopMargin=Object(a.Lb)(o.canvastopmargin,0),t.origCanvasBottomMargin=Object(a.Lb)(o.canvasbottommargin,0),n.canvasBorderRadius=Object(a.Lb)(o.canvasborderradius,0),n.origCanvasTopPad=Object(a.Lb)(o.canvastoppadding,0),n.origCanvasBottomPad=Object(a.Lb)(o.canvasbottompadding,0),n.origCanvasLeftPad=Object(a.Lb)(o.canvasleftpadding,0),n.origCanvasRightPad=Object(a.Lb)(o.canvasrightpadding,0)},o.preliminaryScaling=function(){for(var e,t,o,n=this.jsonData,i=n.markers&&n.markers.items||[],r=i&&i.length||0,a=1/0,l=1/0,s=-1/0,c=-1/0;r--;)o=i[r],e=Number(o.x),t=Number(o.y),a=Xt(a,e),l=Xt(l,t),s=zt(s,e),c=zt(c,t);return{x:a,y:l,x1:s,y1:c}},o.getScalingParameters=function(e,t,o,n){var i,r,a=e/t,l=o/(e*this.config.baseScaleFactor),s=n/(t*this.config.baseScaleFactor),c=0,h=0;return l>s?(c+=(o-n*a)/2,r=200/(t*(i=s))):(h+=(n-o/a)/2,r=200/(e*(i=l))),{scaleFactor:i,strokeWidth:r,translateX:c,translateY:h}},o.calculateMarkerBounds=function(e,t,o){var n,i,r,a,l,s,c,h,d,g,u,b,f=this.config,p=f.markerOpts,m=this.getDatasets(),v=this.getDataLimits(),y=v.dataMin,C=v.dataMax,L=p.hideNull,O=p.nullRadius,x=p.valueToRadius,k=1/0,w=1/0,j=-1/0,F=-1/0;for(s=0,h=m.length;s<h;s++)"markers"===(c=m[s]).getName()&&(n=c);if(n)for(s in n.calculateMarkerRadiusLimits(),r=(i=n.config||{}).minRadius,a=i.maxRadius,l=n.components&&n.components.markerObjs||{})b=(f=l[s].config).definition||{},null!==f.cleanValue?(x&&void 0===b.radius&&(f.radius=r+(a-r)*(f.cleanValue-y)/(C-y)),u=Number(f.radius),d=(Number(b.x)+t)*e,g=(Number(b.y)+o)*e,k=Xt(k,d-u),w=Xt(w,g-u),j=zt(j,d+u),F=zt(F,g+u)):L?f.__hideMarker=!0:null===f.radius&&(f.radius=O);return{x:k,y:w,x1:j,y1:F}},o._spaceManager=function(){var e,t,o,n,i,r,l,s,c,h=this.config,d=this.getChildren("legend")&&this.getChildren("legend")[0],g=d&&d.config.legendPos,u=this.getFromEnv("chart-attrib"),b=h.showBorder,f=h.origMarginLeft,p=h.origMarginTop,m=this.config.baseWidth,v=this.config.baseHeight,y={},C=0,L=0,O=h.markerOpts,x=h.borderWidth=b?Object(a.Lb)(u.borderthickness,1):0;this._allocateSpace({top:x,bottom:x,left:x,right:x}),this._allocateSpace(this._manageActionBarSpace&&this._manageActionBarSpace(.225*h.availableHeight)||{}),s="right"===g?.3*h.canvasWidth:.3*h.canvasHeight,h.showLegend&&this._manageLegendSpace(s),e="bottom"===g?.225*h.canvasHeight:.225*h.canvasWidth,c=this._manageChartMenuBar(e),o=h.canvasWidth,n=h.canvasHeight,O.dataEnabled?(h.adjustViewPortForMarkers?((y=this.preliminaryScaling()).x1>m&&(m=y.x1),y.x<0&&(m+=-y.x,C=-y.x),y.y1>v&&(v=y.y1),y.y<0&&(v+=-y.y,L=-y.y),t=this.getScalingParameters(m,v,o,n),r=n,l=o,(y=this.calculateMarkerBounds(t.scaleFactor*this.config.baseScaleFactor,C,L)).x<0&&(f+=-y.x,o+=y.x),y.y<0&&(p+=-y.y,n+=y.y),y.x1>l&&(o-=y.x1-l),y.y1>r&&(n-=y.y1-r)):(t=this.getScalingParameters(m,v,o,n),this.calculateMarkerBounds(t.scaleFactor*this.config.baseScaleFactor,C,L)),f+=C*(t=this.getScalingParameters(m,v,o,n)).scaleFactor*this.config.baseScaleFactor,p+=L*t.scaleFactor*this.config.baseScaleFactor):t=this.getScalingParameters(m,v,o,n),this.config.scalingParams=t,i=t.scaleFactor,t.translateX=t.translateX+f,t.translateY=t.translateY+p+c.top||0,t.sFactor=i*this.config.baseScaleFactor*100/100,t.transformStr=["t",t.translateX,",",t.translateY,"s",i,",",i,",0,0"].join(""),this.config.annotationConfig={id:"Geo",showbelow:0,autoscale:0,grpxshift:t.translateX?t.translateX:0,grpyshift:t.translateY?t.translateY:0,xscale:100*(i?i*this.config.baseScaleFactor:1),yscale:100*(i?i*this.config.baseScaleFactor:1),scaletext:1,options:{useTracker:!0}}},o.getDataLimits=function(){var e,t,o=this.getDatasets(),n=o.length,i=1/0,r=-1/0;for(t=0;t<n;t++)e=o[t].getDataLimits(),i=Xt(i,e.min),r=zt(r,e.max);return{dataMin:i,dataMax:r}},o.getEntityPaths=function(e){var t,o={},n=this.config.entities;if(e){for(t in n)o[t]=n[t];return o}return n},o.checkComplete=function(){this.config.entityFlag&&this.config.entitiesReady&&(this.config.entityFlag=!1,this.config.markersDrawn=!0,this.fireChartInstanceEvent("internal.mapdrawingcomplete",{renderer:this}))},t}(K);o.d(t,"Maps",(function(){return Kt}));t.default={name:"maps",type:"package",requiresFusionCharts:!0,extension:function(e){return e.addDep(Kt)}}}}]);